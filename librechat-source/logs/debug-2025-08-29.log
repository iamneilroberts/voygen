2025-08-29T13:11:00.101Z info: Mongo Connection options
2025-08-29T13:11:00.123Z info: {
  "bufferCommands": false,
  "autoIndex": false,
  "autoCreate": false
}
2025-08-29T13:11:00.326Z info: Connected to MongoDB
2025-08-29T13:11:00.331Z info: [indexSync] Starting index synchronization check...
2025-08-29T13:11:00.630Z debug: [MEILI_SYNC:meili-index-sync] Creating initial flow state
2025-08-29T13:11:00.727Z error: [indexSync] error fetch failed
2025-08-29T13:11:01.074Z info: [getAppConfig] App configuration not initialized. Initializing AppService...
2025-08-29T13:11:01.102Z error: Invalid custom config file at /home/neil/dev/travelops.ai/librechat-source/librechat.yaml:
{
  "issues": [
    {
      "code": "unrecognized_keys",
  ... [truncated]
2025-08-29T13:11:01.109Z debug: Web search serperApiKey: Using environment variable SERPER_API_KEY (not set in environment, user provided value)
2025-08-29T13:11:01.109Z debug: Web search searxngInstanceUrl: Using environment variable SEARXNG_INSTANCE_URL (not set in environment, user provided value)
2025-08-29T13:11:01.109Z debug: Web search searxngApiKey: Using environment variable SEARXNG_API_KEY (not set in environment, user provided value)
2025-08-29T13:11:01.109Z debug: Web search firecrawlApiKey: Using environment variable FIRECRAWL_API_KEY (not set in environment, user provided value)
2025-08-29T13:11:01.109Z debug: Web search firecrawlApiUrl: Using environment variable FIRECRAWL_API_URL (not set in environment, user provided value)
2025-08-29T13:11:01.109Z debug: Web search jinaApiKey: Using environment variable JINA_API_KEY (not set in environment, user provided value)
2025-08-29T13:11:01.109Z debug: Web search cohereApiKey: Using environment variable COHERE_API_KEY (not set in environment, user provided value)
2025-08-29T13:11:01.110Z warn: Default value for CREDS_KEY is being used.
2025-08-29T13:11:01.110Z warn: Default value for CREDS_IV is being used.
2025-08-29T13:11:01.110Z warn: Default value for JWT_SECRET is being used.
2025-08-29T13:11:01.110Z warn: Default value for JWT_REFRESH_SECRET is being used.
2025-08-29T13:11:01.110Z info: Please replace any default secret values.
2025-08-29T13:11:01.113Z info: ‚Äã

    For your convenience, use this tool to generate your own secret values:
    https://www.librechat.ai/toolkit/creds_generator

    ‚Äã
2025-08-29T13:11:01.114Z warn: RAG API is either not running or not reachable at undefined, you may experience errors with file uploads.
2025-08-29T13:11:01.141Z info: Turnstile is DISABLED (no siteKey provided).
2025-08-29T13:11:01.150Z debug: Role 'USER': Preserving existing permissions for 'PROMPTS'
2025-08-29T13:11:01.150Z debug: Role 'USER': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T13:11:01.150Z debug: Role 'USER': Preserving existing permissions for 'MEMORIES'
2025-08-29T13:11:01.150Z debug: Role 'USER': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T13:11:01.150Z debug: Role 'USER': Preserving existing permissions for 'AGENTS'
2025-08-29T13:11:01.150Z debug: Role 'USER': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T13:11:01.150Z debug: Role 'USER': Preserving existing permissions for 'RUN_CODE'
2025-08-29T13:11:01.150Z debug: Role 'USER': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T13:11:01.150Z debug: Role 'USER': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T13:11:01.150Z debug: Role 'USER': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T13:11:01.150Z debug: Role 'USER': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T13:11:01.150Z debug: Role 'USER': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T13:13:07.594Z info: Mongo Connection options
2025-08-29T13:13:07.621Z info: {
  "bufferCommands": false,
  "autoIndex": false,
  "autoCreate": false
}
2025-08-29T13:13:07.788Z info: Connected to MongoDB
2025-08-29T13:13:07.789Z info: [indexSync] Starting index synchronization check...
2025-08-29T13:13:08.056Z debug: [MEILI_SYNC:meili-index-sync] Creating initial flow state
2025-08-29T13:13:08.068Z error: [indexSync] error fetch failed
2025-08-29T13:13:08.107Z info: [getAppConfig] App configuration not initialized. Initializing AppService...
2025-08-29T13:13:08.181Z info: Custom config file loaded:
2025-08-29T13:13:08.182Z info: {
  "version": "1.0.0",
  "cache": true,
  "endpoints": {
    "custom": [
      {
        "name": "Claude Haiku (Cost Effective)",
        "apiKey": "... [truncated]
2025-08-29T13:13:08.182Z debug: Custom config:
{
  version: "1.0.0",
  cache: true,
    // 3 custom(s)
    endpoints.custom: [{"name":"Claude Haiku (Cost Effective)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthr... [truncated],{"name":"Claude Sonnet (Premium)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthropic.c... [truncated],{"name":"GPT-4 (Fallback)","apiKey":"${OPENAI_API_KEY}","baseURL":"https://api.openai.com/v1","model... [truncated]],
    0.name: "Claude Haiku (Cost Effective)",
    0.apiKey: "${ANTHROPIC_API_KEY}",
    0.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-haiku-20241022"],
    default.0: "claude-3-5-haiku-20241022",
    0.modelDisplayLabel: "üí∞ Haiku - Economical ($0.25/1M tokens)",
    0.titleConvo: true,
    0.titleModel: "claude-3-5-haiku-20241022",
    1.name: "Claude Sonnet (Premium)",
    1.apiKey: "${ANTHROPIC_API_KEY}",
    1.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-sonnet-20241022"],
    default.0: "claude-3-5-sonnet-20241022",
    1.modelDisplayLabel: "‚≠ê Sonnet - Premium Planning ($3.00/1M tokens)",
    1.titleConvo: true,
    1.titleModel: "claude-3-5-sonnet-20241022",
    2.name: "GPT-4 (Fallback)",
    2.apiKey: "${OPENAI_API_KEY}",
    2.baseURL: "https://api.openai.com/v1",
    // 1 default(s)
    models.default: ["gpt-4-turbo-preview"],
    default.0: "gpt-4-turbo-preview",
    2.modelDisplayLabel: "üîÑ GPT-4 - Fallback ($10.00/1M tokens)",
    2.titleConvo: true,
    d1-database.command: "npx",
    // 3 arg(s)
    d1-database.args: ["-y","mcp-remote","https://d1-database-improved.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://d1-database-improved.somotravel.workers.dev/sse",
    d1-database.timeout: 30000,
    d1-database.env: [object Object],
    d1-database.description: "Access to client and trip database with comprehensive travel data",
    prompt-instructions.command: "npx",
    // 3 arg(s)
    prompt-instructions.args: ["-y","mcp-remote","https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse",
    prompt-instructions.timeout: 30000,
    prompt-instructions.env: [object Object],
    prompt-instructions.description: "Travel planning workflows, instructions, and structured processes",
    privacyPolicy.externalUrl: "https://travelops.ai/privacy",
    termsOfService.externalUrl: "https://travelops.ai/terms",
}
2025-08-29T13:13:08.203Z debug: Web search serperApiKey: Using environment variable SERPER_API_KEY (not set in environment, user provided value)
2025-08-29T13:13:08.203Z debug: Web search searxngInstanceUrl: Using environment variable SEARXNG_INSTANCE_URL (not set in environment, user provided value)
2025-08-29T13:13:08.203Z debug: Web search searxngApiKey: Using environment variable SEARXNG_API_KEY (not set in environment, user provided value)
2025-08-29T13:13:08.203Z debug: Web search firecrawlApiKey: Using environment variable FIRECRAWL_API_KEY (not set in environment, user provided value)
2025-08-29T13:13:08.203Z debug: Web search firecrawlApiUrl: Using environment variable FIRECRAWL_API_URL (not set in environment, user provided value)
2025-08-29T13:13:08.203Z debug: Web search jinaApiKey: Using environment variable JINA_API_KEY (not set in environment, user provided value)
2025-08-29T13:13:08.204Z debug: Web search cohereApiKey: Using environment variable COHERE_API_KEY (not set in environment, user provided value)
2025-08-29T13:13:08.204Z warn: Default value for CREDS_KEY is being used.
2025-08-29T13:13:08.204Z warn: Default value for CREDS_IV is being used.
2025-08-29T13:13:08.209Z warn: Default value for JWT_SECRET is being used.
2025-08-29T13:13:08.210Z warn: Default value for JWT_REFRESH_SECRET is being used.
2025-08-29T13:13:08.216Z info: Please replace any default secret values.
2025-08-29T13:13:08.218Z info: ‚Äã

    For your convenience, use this tool to generate your own secret values:
    https://www.librechat.ai/toolkit/creds_generator

    ‚Äã
2025-08-29T13:13:08.218Z warn: RAG API is either not running or not reachable at undefined, you may experience errors with file uploads.
2025-08-29T13:13:08.427Z info: Turnstile is DISABLED (no siteKey provided).
2025-08-29T13:13:08.428Z info: Outdated Config version: 1.0.0
Latest version: 1.2.8

      Check out the Config changelogs for the latest options and features added.

      https://... [truncated]
2025-08-29T13:13:08.498Z debug: Role 'USER': Preserving existing permissions for 'PROMPTS'
2025-08-29T13:13:08.499Z debug: Role 'USER': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T13:13:08.519Z debug: Role 'USER': Preserving existing permissions for 'MEMORIES'
2025-08-29T13:13:08.519Z debug: Role 'USER': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T13:13:08.519Z debug: Role 'USER': Preserving existing permissions for 'AGENTS'
2025-08-29T13:13:08.519Z debug: Role 'USER': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T13:13:08.519Z debug: Role 'USER': Preserving existing permissions for 'RUN_CODE'
2025-08-29T13:13:08.519Z debug: Role 'USER': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T13:13:08.519Z debug: Role 'USER': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T13:13:08.519Z debug: Role 'USER': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T13:13:08.519Z debug: Role 'USER': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T13:13:08.519Z debug: Role 'USER': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T13:27:24.078Z info: Mongo Connection options
2025-08-29T13:27:24.081Z info: {
  "bufferCommands": false,
  "autoIndex": false,
  "autoCreate": false
}
2025-08-29T13:27:24.213Z info: Connected to MongoDB
2025-08-29T13:27:24.213Z info: [indexSync] Starting index synchronization check...
2025-08-29T13:27:24.373Z info: [getAppConfig] App configuration not initialized. Initializing AppService...
2025-08-29T13:27:24.395Z info: Custom config file loaded:
2025-08-29T13:27:24.395Z info: {
  "version": "1.0.0",
  "cache": true,
  "endpoints": {
    "custom": [
      {
        "name": "Claude Haiku (Cost Effective)",
        "apiKey": "... [truncated]
2025-08-29T13:27:24.396Z debug: Custom config:
{
  version: "1.0.0",
  cache: true,
    // 3 custom(s)
    endpoints.custom: [{"name":"Claude Haiku (Cost Effective)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthr... [truncated],{"name":"Claude Sonnet (Premium)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthropic.c... [truncated],{"name":"GPT-4 (Fallback)","apiKey":"${OPENAI_API_KEY}","baseURL":"https://api.openai.com/v1","model... [truncated]],
    0.name: "Claude Haiku (Cost Effective)",
    0.apiKey: "${ANTHROPIC_API_KEY}",
    0.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-haiku-20241022"],
    default.0: "claude-3-5-haiku-20241022",
    0.modelDisplayLabel: "üí∞ Haiku - Economical ($0.25/1M tokens)",
    0.titleConvo: true,
    0.titleModel: "claude-3-5-haiku-20241022",
    1.name: "Claude Sonnet (Premium)",
    1.apiKey: "${ANTHROPIC_API_KEY}",
    1.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-sonnet-20241022"],
    default.0: "claude-3-5-sonnet-20241022",
    1.modelDisplayLabel: "‚≠ê Sonnet - Premium Planning ($3.00/1M tokens)",
    1.titleConvo: true,
    1.titleModel: "claude-3-5-sonnet-20241022",
    2.name: "GPT-4 (Fallback)",
    2.apiKey: "${OPENAI_API_KEY}",
    2.baseURL: "https://api.openai.com/v1",
    // 1 default(s)
    models.default: ["gpt-4-turbo-preview"],
    default.0: "gpt-4-turbo-preview",
    2.modelDisplayLabel: "üîÑ GPT-4 - Fallback ($10.00/1M tokens)",
    2.titleConvo: true,
    d1-database.command: "npx",
    // 3 arg(s)
    d1-database.args: ["-y","mcp-remote","https://d1-database-improved.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://d1-database-improved.somotravel.workers.dev/sse",
    d1-database.timeout: 30000,
    d1-database.env: [object Object],
    d1-database.description: "Access to client and trip database with comprehensive travel data",
    prompt-instructions.command: "npx",
    // 3 arg(s)
    prompt-instructions.args: ["-y","mcp-remote","https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse",
    prompt-instructions.timeout: 30000,
    prompt-instructions.env: [object Object],
    prompt-instructions.description: "Travel planning workflows, instructions, and structured processes",
    privacyPolicy.externalUrl: "https://travelops.ai/privacy",
    termsOfService.externalUrl: "https://travelops.ai/terms",
}
2025-08-29T13:27:24.409Z debug: Web search serperApiKey: Using environment variable SERPER_API_KEY (not set in environment, user provided value)
2025-08-29T13:27:24.412Z debug: Web search searxngInstanceUrl: Using environment variable SEARXNG_INSTANCE_URL (not set in environment, user provided value)
2025-08-29T13:27:24.412Z debug: Web search searxngApiKey: Using environment variable SEARXNG_API_KEY (not set in environment, user provided value)
2025-08-29T13:27:24.412Z debug: Web search firecrawlApiKey: Using environment variable FIRECRAWL_API_KEY (not set in environment, user provided value)
2025-08-29T13:27:24.412Z debug: Web search firecrawlApiUrl: Using environment variable FIRECRAWL_API_URL (not set in environment, user provided value)
2025-08-29T13:27:24.412Z debug: Web search jinaApiKey: Using environment variable JINA_API_KEY (not set in environment, user provided value)
2025-08-29T13:27:24.413Z debug: Web search cohereApiKey: Using environment variable COHERE_API_KEY (not set in environment, user provided value)
2025-08-29T13:27:24.413Z warn: Default value for CREDS_KEY is being used.
2025-08-29T13:27:24.413Z warn: Default value for CREDS_IV is being used.
2025-08-29T13:27:24.413Z warn: Default value for JWT_SECRET is being used.
2025-08-29T13:27:24.413Z warn: Default value for JWT_REFRESH_SECRET is being used.
2025-08-29T13:27:24.413Z info: Please replace any default secret values.
2025-08-29T13:27:24.414Z info: ‚Äã

    For your convenience, use this tool to generate your own secret values:
    https://www.librechat.ai/toolkit/creds_generator

    ‚Äã
2025-08-29T13:27:24.414Z warn: RAG API is either not running or not reachable at undefined, you may experience errors with file uploads.
2025-08-29T13:27:24.461Z info: Turnstile is DISABLED (no siteKey provided).
2025-08-29T13:27:24.465Z info: Outdated Config version: 1.0.0
Latest version: 1.2.8

      Check out the Config changelogs for the latest options and features added.

      https://... [truncated]
2025-08-29T13:27:24.482Z debug: [MEILI_SYNC:meili-index-sync] Creating initial flow state
2025-08-29T13:27:24.492Z debug: Role 'USER': Preserving existing permissions for 'PROMPTS'
2025-08-29T13:27:24.492Z debug: Role 'USER': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T13:27:24.492Z debug: Role 'USER': Preserving existing permissions for 'MEMORIES'
2025-08-29T13:27:24.492Z debug: Role 'USER': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T13:27:24.492Z debug: Role 'USER': Preserving existing permissions for 'AGENTS'
2025-08-29T13:27:24.492Z debug: Role 'USER': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T13:27:24.492Z debug: Role 'USER': Preserving existing permissions for 'RUN_CODE'
2025-08-29T13:27:24.492Z debug: Role 'USER': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T13:27:24.492Z debug: Role 'USER': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T13:27:24.493Z debug: Role 'USER': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T13:27:24.493Z debug: Role 'USER': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T13:27:24.493Z debug: Role 'USER': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T13:28:33.095Z info: Mongo Connection options
2025-08-29T13:28:33.103Z info: {
  "bufferCommands": false,
  "autoIndex": false,
  "autoCreate": false
}
2025-08-29T13:28:33.255Z info: Connected to MongoDB
2025-08-29T13:28:33.255Z info: [indexSync] Starting index synchronization check...
2025-08-29T13:28:33.455Z info: [getAppConfig] App configuration not initialized. Initializing AppService...
2025-08-29T13:28:33.479Z info: Custom config file loaded:
2025-08-29T13:28:33.483Z info: {
  "version": "1.0.0",
  "cache": true,
  "endpoints": {
    "custom": [
      {
        "name": "Claude Haiku (Cost Effective)",
        "apiKey": "... [truncated]
2025-08-29T13:28:33.483Z debug: Custom config:
{
  version: "1.0.0",
  cache: true,
    // 3 custom(s)
    endpoints.custom: [{"name":"Claude Haiku (Cost Effective)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthr... [truncated],{"name":"Claude Sonnet (Premium)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthropic.c... [truncated],{"name":"GPT-4 (Fallback)","apiKey":"${OPENAI_API_KEY}","baseURL":"https://api.openai.com/v1","model... [truncated]],
    0.name: "Claude Haiku (Cost Effective)",
    0.apiKey: "${ANTHROPIC_API_KEY}",
    0.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-haiku-20241022"],
    default.0: "claude-3-5-haiku-20241022",
    0.modelDisplayLabel: "üí∞ Haiku - Economical ($0.25/1M tokens)",
    0.titleConvo: true,
    0.titleModel: "claude-3-5-haiku-20241022",
    1.name: "Claude Sonnet (Premium)",
    1.apiKey: "${ANTHROPIC_API_KEY}",
    1.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-sonnet-20241022"],
    default.0: "claude-3-5-sonnet-20241022",
    1.modelDisplayLabel: "‚≠ê Sonnet - Premium Planning ($3.00/1M tokens)",
    1.titleConvo: true,
    1.titleModel: "claude-3-5-sonnet-20241022",
    2.name: "GPT-4 (Fallback)",
    2.apiKey: "${OPENAI_API_KEY}",
    2.baseURL: "https://api.openai.com/v1",
    // 1 default(s)
    models.default: ["gpt-4-turbo-preview"],
    default.0: "gpt-4-turbo-preview",
    2.modelDisplayLabel: "üîÑ GPT-4 - Fallback ($10.00/1M tokens)",
    2.titleConvo: true,
    d1-database.command: "npx",
    // 3 arg(s)
    d1-database.args: ["-y","mcp-remote","https://d1-database-improved.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://d1-database-improved.somotravel.workers.dev/sse",
    d1-database.timeout: 30000,
    d1-database.env: [object Object],
    d1-database.description: "Access to client and trip database with comprehensive travel data",
    prompt-instructions.command: "npx",
    // 3 arg(s)
    prompt-instructions.args: ["-y","mcp-remote","https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse",
    prompt-instructions.timeout: 30000,
    prompt-instructions.env: [object Object],
    prompt-instructions.description: "Travel planning workflows, instructions, and structured processes",
    privacyPolicy.externalUrl: "https://travelops.ai/privacy",
    termsOfService.externalUrl: "https://travelops.ai/terms",
}
2025-08-29T13:28:33.492Z debug: Web search serperApiKey: Using environment variable SERPER_API_KEY (not set in environment, user provided value)
2025-08-29T13:28:33.492Z debug: Web search searxngInstanceUrl: Using environment variable SEARXNG_INSTANCE_URL (not set in environment, user provided value)
2025-08-29T13:28:33.492Z debug: Web search searxngApiKey: Using environment variable SEARXNG_API_KEY (not set in environment, user provided value)
2025-08-29T13:28:33.492Z debug: Web search firecrawlApiKey: Using environment variable FIRECRAWL_API_KEY (not set in environment, user provided value)
2025-08-29T13:28:33.492Z debug: Web search firecrawlApiUrl: Using environment variable FIRECRAWL_API_URL (not set in environment, user provided value)
2025-08-29T13:28:33.492Z debug: Web search jinaApiKey: Using environment variable JINA_API_KEY (not set in environment, user provided value)
2025-08-29T13:28:33.492Z debug: Web search cohereApiKey: Using environment variable COHERE_API_KEY (not set in environment, user provided value)
2025-08-29T13:28:33.493Z warn: Default value for CREDS_KEY is being used.
2025-08-29T13:28:33.493Z warn: Default value for CREDS_IV is being used.
2025-08-29T13:28:33.493Z warn: Default value for JWT_SECRET is being used.
2025-08-29T13:28:33.493Z warn: Default value for JWT_REFRESH_SECRET is being used.
2025-08-29T13:28:33.493Z info: Please replace any default secret values.
2025-08-29T13:28:33.493Z info: ‚Äã

    For your convenience, use this tool to generate your own secret values:
    https://www.librechat.ai/toolkit/creds_generator

    ‚Äã
2025-08-29T13:28:33.494Z warn: RAG API is either not running or not reachable at undefined, you may experience errors with file uploads.
2025-08-29T13:28:33.531Z info: Turnstile is DISABLED (no siteKey provided).
2025-08-29T13:28:33.535Z info: Outdated Config version: 1.0.0
Latest version: 1.2.8

      Check out the Config changelogs for the latest options and features added.

      https://... [truncated]
2025-08-29T13:28:33.547Z debug: [MEILI_SYNC:meili-index-sync] Creating initial flow state
2025-08-29T13:28:33.558Z debug: Role 'USER': Preserving existing permissions for 'PROMPTS'
2025-08-29T13:28:33.558Z debug: Role 'USER': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T13:28:33.558Z debug: Role 'USER': Preserving existing permissions for 'MEMORIES'
2025-08-29T13:28:33.558Z debug: Role 'USER': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T13:28:33.558Z debug: Role 'USER': Preserving existing permissions for 'AGENTS'
2025-08-29T13:28:33.558Z debug: Role 'USER': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T13:28:33.558Z debug: Role 'USER': Preserving existing permissions for 'RUN_CODE'
2025-08-29T13:28:33.558Z debug: Role 'USER': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T13:28:33.558Z debug: Role 'USER': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T13:28:33.558Z debug: Role 'USER': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T13:28:33.558Z debug: Role 'USER': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T13:28:33.558Z debug: Role 'USER': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T13:28:33.567Z error: [indexSync] error fetch failed
2025-08-29T13:28:33.570Z debug: Role 'ADMIN': Preserving existing permissions for 'PROMPTS'
2025-08-29T13:28:33.570Z debug: Role 'ADMIN': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T13:28:33.570Z debug: Role 'ADMIN': Preserving existing permissions for 'MEMORIES'
2025-08-29T13:28:33.570Z debug: Role 'ADMIN': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T13:28:33.570Z debug: Role 'ADMIN': Preserving existing permissions for 'AGENTS'
2025-08-29T13:28:33.570Z debug: Role 'ADMIN': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T13:28:33.570Z debug: Role 'ADMIN': Preserving existing permissions for 'RUN_CODE'
2025-08-29T13:28:33.570Z debug: Role 'ADMIN': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T13:28:33.570Z debug: Role 'ADMIN': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T13:28:33.570Z debug: Role 'ADMIN': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T13:28:33.570Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T13:28:33.570Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T13:28:33.619Z info: Server listening at http://localhost:3080
2025-08-29T13:28:33.792Z debug: [MCP][d1-database] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librech... [truncated]
2025-08-29T13:28:33.792Z debug: [MCP][prompt-instructions] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"... [truncated]
2025-08-29T13:28:36.614Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{"listChanged"... [truncated]
2025-08-29T13:28:36.619Z debug: [MCP][prompt-instructions] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T13:28:36.619Z debug: [MCP][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T13:28:36.719Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{}},"serverInfo":{"nam... [truncated]
2025-08-29T13:28:36.719Z debug: [MCP][d1-database] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T13:28:36.720Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T13:28:36.797Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T13:28:36.801Z debug: [MCP][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T13:28:36.802Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T13:28:36.863Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T13:28:36.868Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T13:28:36.875Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T13:28:36.876Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T13:28:36.876Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T13:28:36.923Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T13:28:36.924Z info: [MCP][prompt-instructions] -------------------------------------------------‚îê
2025-08-29T13:28:36.924Z info: [MCP][prompt-instructions] URL: undefined
2025-08-29T13:28:36.924Z info: [MCP][prompt-instructions] OAuth Required: false
2025-08-29T13:28:36.924Z info: [MCP][prompt-instructions] Capabilities: {"tools":{"listChanged":false}}
2025-08-29T13:28:36.924Z info: [MCP][prompt-instructions] Tools: get_instruction, list_instructions, create_instruction, update_instruction, get_instructions_by_confidence, set_verb... [truncated]
2025-08-29T13:28:36.924Z info: [MCP][prompt-instructions] Server Instructions: undefined
2025-08-29T13:28:36.924Z info: [MCP][prompt-instructions] -------------------------------------------------‚îò
2025-08-29T13:28:36.942Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T13:28:36.943Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T13:28:36.981Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T13:28:36.982Z info: [MCP][d1-database] -------------------------------------------------‚îê
2025-08-29T13:28:36.982Z info: [MCP][d1-database] URL: undefined
2025-08-29T13:28:36.982Z info: [MCP][d1-database] OAuth Required: false
2025-08-29T13:28:36.982Z info: [MCP][d1-database] Capabilities: {"tools":{}}
2025-08-29T13:28:36.982Z info: [MCP][d1-database] Tools: health_check, update_activitylog_clients, reset_activitylog_from_trips, explore_database, get_anything, remember_context, bu... [truncated]
2025-08-29T13:28:36.982Z info: [MCP][d1-database] Server Instructions: undefined
2025-08-29T13:28:36.983Z info: [MCP][d1-database] -------------------------------------------------‚îò
2025-08-29T13:28:36.993Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T13:28:37.051Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T13:28:37.052Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T13:28:37.107Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T13:28:37.118Z debug: Merged 33 app-level tools
2025-08-29T13:28:37.118Z info: MCP servers initialized successfully. Added 33 MCP tools.
2025-08-29T13:28:37.118Z debug: Checking if agent permissions migration is needed
2025-08-29T13:28:37.177Z info: Created collection: aclentries
2025-08-29T13:28:37.239Z debug: Agent migration check completed
{
  totalToMigrate: 0,
  globalEditAccess: 0,
  globalViewAccess: 0,
  privateAgents: 0,
}
2025-08-29T13:28:37.240Z debug: Checking if prompt permissions migration is needed
2025-08-29T13:28:37.243Z debug: Collection already exists: aclentries
2025-08-29T13:28:37.263Z debug: Prompt migration check completed
{
  totalToMigrate: 0,
  globalViewAccess: 0,
  privateGroups: 0,
}
2025-08-29T13:31:50.534Z info: [Login] [Login successful] [Username: dneilroberts@gmail.com] [Request-IP: 127.0.0.1]
2025-08-29T13:31:51.127Z debug: Merged 33 user-level tools
2025-08-29T13:31:51.462Z debug: [MCP][d1-database] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librech... [truncated]
2025-08-29T13:31:51.462Z debug: [MCP][prompt-instructions] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"... [truncated]
2025-08-29T13:31:52.350Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{"listChanged"... [truncated]
2025-08-29T13:31:52.351Z debug: [MCP][prompt-instructions] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T13:31:52.351Z debug: [MCP][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T13:31:52.355Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{}},"serverInfo":{"nam... [truncated]
2025-08-29T13:31:52.356Z debug: [MCP][d1-database] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T13:31:52.356Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T13:31:52.476Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T13:31:52.477Z debug: [MCP][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T13:31:52.477Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T13:31:52.519Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T13:31:52.520Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T13:31:52.520Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T13:31:52.520Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T13:31:52.566Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T13:32:13.200Z error: [handleAbortError] AI response error; aborting request: {"type":"no_user_key"}
2025-08-29T13:32:13.202Z debug: [AgentController] Performing cleanup
2025-08-29T13:32:13.202Z debug: [AgentController] Request closed
2025-08-29T13:32:13.202Z debug: [AgentController] Request aborted on close
2025-08-29T13:32:13.202Z debug: [AgentController] Cleanup completed
2025-08-29T13:36:03.919Z debug: [AgentController] Request aborted on close
2025-08-29T13:36:03.921Z debug: [BaseClient] Loading history:
{
  conversationId: "afba1169-cb4b-4788-89a0-40762b2399e9",
  parentMessageId: "00000000-0000-0000-0000-000000000000",
}
2025-08-29T13:36:04.167Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 179990,
  maxContextTokens: 180000,
}
2025-08-29T13:36:04.167Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 179990,
  maxContextTokens: 180000,
}
2025-08-29T13:36:04.168Z debug: [BaseClient] tokenCountMap:
{
  2ee4def1-b6fc-4a92-ac65-8498b7c22ed0: 7,
}
2025-08-29T13:36:04.168Z debug: [BaseClient]
{
  promptTokens: 10,
  remainingContextTokens: 179990,
  payloadSize: 1,
  maxContextTokens: 180000,
}
2025-08-29T13:36:04.168Z debug: [BaseClient] tokenCountMap
{
  2ee4def1-b6fc-4a92-ac65-8498b7c22ed0: 7,
}
2025-08-29T13:36:04.168Z debug: [BaseClient] userMessage
{
  messageId: "2ee4def1-b6fc-4a92-ac65-8498b7c22ed0",
  parentMessageId: "00000000-0000-0000-0000-000000000000",
  conversationId: "afba1169-cb4b-4788-89a0-40762b2399e9",
  sender: "User",
  text: "travel_agent_start",
  isCreatedByUser: true,
  tokenCount: 7,
}
2025-08-29T13:36:04.541Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T13:36:04.721Z error: [api/server/controllers/agents/client.js #sendCompletion] Operation aborted 401 Invalid Anthropic API Key

Troubleshooting URL: https://js.langchain.c... [truncated]
2025-08-29T13:36:04.722Z error: [api/server/controllers/agents/client.js #sendCompletion] Unhandled error type 401 Invalid Anthropic API Key

Troubleshooting URL: https://js.langchai... [truncated]
2025-08-29T13:36:04.770Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T13:36:04.779Z debug: [AgentController] Request closed
2025-08-29T13:36:04.897Z error: [api/server/controllers/agents/client.js #titleConvo] Error 401 Invalid Anthropic API Key

Troubleshooting URL: https://js.langchain.com/docs/troubles... [truncated]
2025-08-29T13:36:04.897Z debug: [saveConvo] api/server/services/Endpoints/agents/title.js
2025-08-29T13:36:04.908Z debug: [AgentController] Title generation started
2025-08-29T13:36:04.908Z debug: [AgentController] Title generation completed
2025-08-29T13:36:04.908Z debug: [AgentController] Performing cleanup
2025-08-29T13:36:04.908Z debug: [AgentController] Cleaning up abort controller
2025-08-29T13:36:04.910Z debug: [AgentController] Cleanup completed
2025-08-29T13:40:36.341Z debug: [AgentController] Request aborted on close
2025-08-29T13:40:36.341Z debug: [BaseClient] Loading history:
{
  conversationId: "afba1169-cb4b-4788-89a0-40762b2399e9",
  parentMessageId: "00000000-0000-0000-0000-000000000000",
}
2025-08-29T13:40:36.344Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 179990,
  maxContextTokens: 180000,
}
2025-08-29T13:40:36.344Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 179990,
  maxContextTokens: 180000,
}
2025-08-29T13:40:36.344Z debug: [BaseClient] tokenCountMap:
{
  17d0a959-ade2-4b92-90d5-55dec568de61: 7,
}
2025-08-29T13:40:36.344Z debug: [BaseClient]
{
  promptTokens: 10,
  remainingContextTokens: 179990,
  payloadSize: 1,
  maxContextTokens: 180000,
}
2025-08-29T13:40:36.345Z debug: [BaseClient] tokenCountMap
{
  17d0a959-ade2-4b92-90d5-55dec568de61: 7,
}
2025-08-29T13:40:36.345Z debug: [BaseClient] userMessage
{
  messageId: "17d0a959-ade2-4b92-90d5-55dec568de61",
  parentMessageId: "00000000-0000-0000-0000-000000000000",
  conversationId: "afba1169-cb4b-4788-89a0-40762b2399e9",
  sender: "User",
  text: "travel_agent_start",
  isCreatedByUser: true,
  tokenCount: 7,
}
2025-08-29T13:40:36.550Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T13:40:39.597Z debug: [MCP][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":3}
2025-08-29T13:40:39.814Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":3,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T13:40:39.814Z debug: [MCP][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T13:40:39.814Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T13:40:39.854Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T13:40:39.855Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/call","params":{"name":"travel_agent_start","arguments":{}},"jsonrpc":"2.0","id":5}
2025-08-29T13:40:40.671Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":5,"result":{"content":[{"type":"text","text":"‚úÖ **Claude Travel Agent System Read... [truncated]
2025-08-29T13:40:40.672Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T13:40:40.672Z
2025-08-29T13:40:44.795Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T13:40:44.803Z debug: [AgentController] Request closed
2025-08-29T13:40:44.807Z debug: [AgentController] Performing cleanup
2025-08-29T13:40:44.807Z debug: [AgentController] Cleaning up abort controller
2025-08-29T13:40:44.808Z debug: [AgentController] Cleanup completed
2025-08-29T13:41:23.512Z debug: [AgentController] Request aborted on close
2025-08-29T13:41:23.512Z debug: [BaseClient] Loading history:
{
  conversationId: "afba1169-cb4b-4788-89a0-40762b2399e9",
  parentMessageId: "24841fb2-2f1b-441c-bfe0-6f25db0be49c",
}
2025-08-29T13:41:23.522Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 179631,
  maxContextTokens: 180000,
}
2025-08-29T13:41:23.522Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 179631,
  maxContextTokens: 180000,
}
2025-08-29T13:41:23.522Z debug: [BaseClient] tokenCountMap:
{
  17d0a959-ade2-4b92-90d5-55dec568de61: 7,
  24841fb2-2f1b-441c-bfe0-6f25db0be49c: 345,
  7e6a156d-9a60-441f-ad6c-25cc50b730ad: 14,
}
2025-08-29T13:41:23.522Z debug: [BaseClient]
{
  promptTokens: 369,
  remainingContextTokens: 179631,
  payloadSize: 3,
  maxContextTokens: 180000,
}
2025-08-29T13:41:23.522Z debug: [BaseClient] tokenCountMap
{
  17d0a959-ade2-4b92-90d5-55dec568de61: 7,
  24841fb2-2f1b-441c-bfe0-6f25db0be49c: 345,
  7e6a156d-9a60-441f-ad6c-25cc50b730ad: 14,
}
2025-08-29T13:41:23.522Z debug: [BaseClient] userMessage
{
  messageId: "7e6a156d-9a60-441f-ad6c-25cc50b730ad",
  parentMessageId: "24841fb2-2f1b-441c-bfe0-6f25db0be49c",
  conversationId: "afba1169-cb4b-4788-89a0-40762b2399e9",
  sender: "User",
  text: "/continue sara and darren jones anniversary trip",
  isCreatedByUser: true,
  tokenCount: 14,
}
2025-08-29T13:41:23.739Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T13:41:26.429Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":3}
2025-08-29T13:41:26.666Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":3,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T13:41:26.667Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T13:41:26.667Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T13:41:26.711Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T13:41:26.712Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"continue_trip","arguments":{"search_query":"Sara and Darren Jones anniv... [truncated]
2025-08-29T13:41:26.846Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":5,"result":{"content":[{"type":"text","text":"{\n  \"success\": false,\n  \"no_trips_foun... [truncated]
2025-08-29T13:41:26.846Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T13:41:26.846Z
2025-08-29T13:41:31.387Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T13:41:31.396Z debug: [AgentController] Request closed
2025-08-29T13:41:31.399Z debug: [AgentController] Performing cleanup
2025-08-29T13:41:31.399Z debug: [AgentController] Cleaning up abort controller
2025-08-29T13:41:31.400Z debug: [AgentController] Cleanup completed
2025-08-29T13:50:30.963Z debug: [AgentController] Request aborted on close
2025-08-29T13:50:30.963Z debug: [BaseClient] Loading history:
{
  conversationId: "afba1169-cb4b-4788-89a0-40762b2399e9",
  parentMessageId: "5647848a-425b-495a-970b-f583270ea6c4",
}
2025-08-29T13:50:30.966Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 179391,
  maxContextTokens: 180000,
}
2025-08-29T13:50:30.967Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 179391,
  maxContextTokens: 180000,
}
2025-08-29T13:50:30.967Z debug: [BaseClient] tokenCountMap:
{
  17d0a959-ade2-4b92-90d5-55dec568de61: 7,
  24841fb2-2f1b-441c-bfe0-6f25db0be49c: 345,
  7e6a156d-9a60-441f-ad6c-25cc50b730ad: 14,
  5647848a-425b-495a-970b-f583270ea6c4: 228,
  f077d15a-ae67-483d-988c-b88413b38be5: 12,
}
2025-08-29T13:50:30.967Z debug: [BaseClient]
{
  promptTokens: 609,
  remainingContextTokens: 179391,
  payloadSize: 5,
  maxContextTokens: 180000,
}
2025-08-29T13:50:30.967Z debug: [BaseClient] tokenCountMap
{
  17d0a959-ade2-4b92-90d5-55dec568de61: 7,
  24841fb2-2f1b-441c-bfe0-6f25db0be49c: 345,
  7e6a156d-9a60-441f-ad6c-25cc50b730ad: 14,
  5647848a-425b-495a-970b-f583270ea6c4: 228,
  f077d15a-ae67-483d-988c-b88413b38be5: 12,
}
2025-08-29T13:50:30.967Z debug: [BaseClient] userMessage
{
  messageId: "f077d15a-ae67-483d-988c-b88413b38be5",
  parentMessageId: "5647848a-425b-495a-970b-f583270ea6c4",
  conversationId: "afba1169-cb4b-4788-89a0-40762b2399e9",
  sender: "User",
  text: "Show me Sara and Darren Jones anniversary trip",
  isCreatedByUser: true,
  tokenCount: 12,
}
2025-08-29T13:50:31.208Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T13:50:34.472Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":6}
2025-08-29T13:50:34.711Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":6,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T13:50:34.712Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T13:50:34.712Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":7}
2025-08-29T13:50:34.791Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":7,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T13:50:34.792Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_anything","arguments":{"query":"Sara and Darren Jones anniversary t... [truncated]
2025-08-29T13:50:35.355Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":8,"result":{"content":[{"type":"text","text":"{\n  \"response\": \"Sara & Darren Jones 25... [truncated]
2025-08-29T13:50:35.356Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T13:50:35.356Z
2025-08-29T13:50:37.784Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_workflow_status","arguments":{"trip_identifier":"Sara & Darren Jone... [truncated]
2025-08-29T13:50:37.906Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":9,"result":{"content":[{"type":"text","text":"{\n  \"success\": true,\n  \"trip_id\": 26,... [truncated]
2025-08-29T13:50:37.906Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T13:50:37.906Z
2025-08-29T13:50:42.989Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T13:50:42.999Z debug: [AgentController] Request closed
2025-08-29T13:50:43.002Z debug: [AgentController] Performing cleanup
2025-08-29T13:50:43.002Z debug: [AgentController] Cleaning up abort controller
2025-08-29T13:50:43.002Z debug: [AgentController] Cleanup completed
2025-08-29T13:51:02.306Z debug: [AgentController] Request aborted on close
2025-08-29T13:51:02.306Z debug: [BaseClient] Loading history:
{
  conversationId: "afba1169-cb4b-4788-89a0-40762b2399e9",
  parentMessageId: "7137fb6e-b01f-49a8-9a54-f8abe70216c6",
}
2025-08-29T13:51:02.309Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 178562,
  maxContextTokens: 180000,
}
2025-08-29T13:51:02.309Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 178562,
  maxContextTokens: 180000,
}
2025-08-29T13:51:02.309Z debug: [BaseClient] tokenCountMap:
{
  17d0a959-ade2-4b92-90d5-55dec568de61: 7,
  24841fb2-2f1b-441c-bfe0-6f25db0be49c: 345,
  7e6a156d-9a60-441f-ad6c-25cc50b730ad: 14,
  5647848a-425b-495a-970b-f583270ea6c4: 228,
  f077d15a-ae67-483d-988c-b88413b38be5: 12,
  7137fb6e-b01f-49a8-9a54-f8abe70216c6: 815,
  06962d20-90b0-4876-aa39-7880c39a8317: 14,
}
2025-08-29T13:51:02.309Z debug: [BaseClient]
{
  promptTokens: 1438,
  remainingContextTokens: 178562,
  payloadSize: 7,
  maxContextTokens: 180000,
}
2025-08-29T13:51:02.310Z debug: [BaseClient] tokenCountMap
{
  17d0a959-ade2-4b92-90d5-55dec568de61: 7,
  24841fb2-2f1b-441c-bfe0-6f25db0be49c: 345,
  7e6a156d-9a60-441f-ad6c-25cc50b730ad: 14,
  5647848a-425b-495a-970b-f583270ea6c4: 228,
  f077d15a-ae67-483d-988c-b88413b38be5: 12,
  7137fb6e-b01f-49a8-9a54-f8abe70216c6: 815,
  06962d20-90b0-4876-aa39-7880c39a8317: 14,
}
2025-08-29T13:51:02.310Z debug: [BaseClient] userMessage
{
  messageId: "06962d20-90b0-4876-aa39-7880c39a8317",
  parentMessageId: "7137fb6e-b01f-49a8-9a54-f8abe70216c6",
  conversationId: "afba1169-cb4b-4788-89a0-40762b2399e9",
  sender: "User",
  text: "yes, show me a detailed itinerary of the trip",
  isCreatedByUser: true,
  tokenCount: 14,
}
2025-08-29T13:51:02.512Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T13:51:05.795Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_anything","arguments":{"query":"Sara & Darren Jones 25th Anniversar... [truncated]
2025-08-29T13:51:06.187Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":10,"result":{"content":[{"type":"text","text":"{\n  \"response\": \"Sara & Darren Jones 2... [truncated]
2025-08-29T13:51:06.187Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T13:51:06.187Z
2025-08-29T13:51:08.838Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_workflow_instructions","arguments":{"trip_identifier":"Sara & Darre... [truncated]
2025-08-29T13:51:08.948Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":11,"result":{"content":[{"type":"text","text":"{\n  \"success\": false,\n  \"error\": \"D... [truncated]
2025-08-29T13:51:08.948Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T13:51:08.948Z
2025-08-29T13:51:11.734Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_anything","arguments":{"query":"Detailed itinerary for Sara & Darre... [truncated]
2025-08-29T13:51:12.279Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":12,"result":{"content":[{"type":"text","text":"{\n  \"response\": \"No results found for ... [truncated]
2025-08-29T13:51:12.280Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T13:51:12.280Z
2025-08-29T13:51:16.778Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"bulk_trip_operations","arguments":{"trip_identifier":"Sara & Darren Jon... [truncated]
2025-08-29T13:51:17.004Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":13,"result":{"content":[{"type":"text","text":"{\n  \"success\": false,\n  \"error\": \"D... [truncated]
2025-08-29T13:51:17.004Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T13:51:17.004Z
2025-08-29T13:51:20.217Z debug: [FinalizationRegistry] Cleaning up client for user 68b1ababa6d361e541dc7c03
2025-08-29T13:51:20.217Z debug: [FinalizationRegistry] Cleaning up client for user 68b1ababa6d361e541dc7c03
2025-08-29T13:51:20.217Z debug: [FinalizationRegistry] Cleaning up client for user 68b1ababa6d361e541dc7c03
2025-08-29T13:51:20.217Z debug: [FinalizationRegistry] Cleaning up client for user 68b1ababa6d361e541dc7c03
2025-08-29T13:51:23.481Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T13:51:23.490Z debug: [AgentController] Request closed
2025-08-29T13:51:23.493Z debug: [AgentController] Performing cleanup
2025-08-29T13:51:23.493Z debug: [AgentController] Cleaning up abort controller
2025-08-29T13:51:23.493Z debug: [AgentController] Cleanup completed
2025-08-29T13:51:36.489Z debug: [FinalizationRegistry] Cleaning up client for user 68b1ababa6d361e541dc7c03
2025-08-29T14:01:10.812Z info: Mongo Connection options
2025-08-29T14:01:10.816Z info: {
  "bufferCommands": false,
  "autoIndex": false,
  "autoCreate": false
}
2025-08-29T14:01:11.059Z info: Connected to MongoDB
2025-08-29T14:01:11.065Z info: [indexSync] Starting index synchronization check...
2025-08-29T14:01:11.437Z debug: [MEILI_SYNC:meili-index-sync] Creating initial flow state
2025-08-29T14:01:11.482Z error: [indexSync] error fetch failed
2025-08-29T14:01:11.782Z info: [getAppConfig] App configuration not initialized. Initializing AppService...
2025-08-29T14:01:11.852Z info: Custom config file loaded:
2025-08-29T14:01:11.853Z info: {
  "version": "1.0.0",
  "cache": true,
  "endpoints": {
    "custom": [
      {
        "name": "Claude Haiku (Cost Effective)",
        "apiKey": "... [truncated]
2025-08-29T14:01:11.853Z debug: Custom config:
{
  version: "1.0.0",
  cache: true,
    // 3 custom(s)
    endpoints.custom: [{"name":"Claude Haiku (Cost Effective)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthr... [truncated],{"name":"Claude Sonnet (Premium)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthropic.c... [truncated],{"name":"GPT-4 (Fallback)","apiKey":"${OPENAI_API_KEY}","baseURL":"https://api.openai.com/v1","model... [truncated]],
    0.name: "Claude Haiku (Cost Effective)",
    0.apiKey: "${ANTHROPIC_API_KEY}",
    0.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-haiku-20241022"],
    default.0: "claude-3-5-haiku-20241022",
    0.modelDisplayLabel: "üí∞ Haiku - Economical ($0.25/1M tokens)",
    0.titleConvo: true,
    0.titleModel: "claude-3-5-haiku-20241022",
    1.name: "Claude Sonnet (Premium)",
    1.apiKey: "${ANTHROPIC_API_KEY}",
    1.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-sonnet-20241022"],
    default.0: "claude-3-5-sonnet-20241022",
    1.modelDisplayLabel: "‚≠ê Sonnet - Premium Planning ($3.00/1M tokens)",
    1.titleConvo: true,
    1.titleModel: "claude-3-5-sonnet-20241022",
    2.name: "GPT-4 (Fallback)",
    2.apiKey: "${OPENAI_API_KEY}",
    2.baseURL: "https://api.openai.com/v1",
    // 1 default(s)
    models.default: ["gpt-4-turbo-preview"],
    default.0: "gpt-4-turbo-preview",
    2.modelDisplayLabel: "üîÑ GPT-4 - Fallback ($10.00/1M tokens)",
    2.titleConvo: true,
    d1-database.command: "npx",
    // 3 arg(s)
    d1-database.args: ["-y","mcp-remote","https://d1-database-improved.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://d1-database-improved.somotravel.workers.dev/sse",
    d1-database.timeout: 30000,
    d1-database.env: [object Object],
    d1-database.description: "Access to client and trip database with comprehensive travel data",
    prompt-instructions.command: "npx",
    // 3 arg(s)
    prompt-instructions.args: ["-y","mcp-remote","https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse",
    prompt-instructions.timeout: 30000,
    prompt-instructions.env: [object Object],
    prompt-instructions.description: "Travel planning workflows, instructions, and structured processes",
    privacyPolicy.externalUrl: "https://travelops.ai/privacy",
    termsOfService.externalUrl: "https://travelops.ai/terms",
}
2025-08-29T14:01:11.875Z debug: Web search serperApiKey: Using environment variable SERPER_API_KEY (not set in environment, user provided value)
2025-08-29T14:01:11.875Z debug: Web search searxngInstanceUrl: Using environment variable SEARXNG_INSTANCE_URL (not set in environment, user provided value)
2025-08-29T14:01:11.876Z debug: Web search searxngApiKey: Using environment variable SEARXNG_API_KEY (not set in environment, user provided value)
2025-08-29T14:01:11.876Z debug: Web search firecrawlApiKey: Using environment variable FIRECRAWL_API_KEY (not set in environment, user provided value)
2025-08-29T14:01:11.876Z debug: Web search firecrawlApiUrl: Using environment variable FIRECRAWL_API_URL (not set in environment, user provided value)
2025-08-29T14:01:11.876Z debug: Web search jinaApiKey: Using environment variable JINA_API_KEY (not set in environment, user provided value)
2025-08-29T14:01:11.876Z debug: Web search cohereApiKey: Using environment variable COHERE_API_KEY (not set in environment, user provided value)
2025-08-29T14:01:11.876Z warn: Default value for CREDS_KEY is being used.
2025-08-29T14:01:11.876Z warn: Default value for CREDS_IV is being used.
2025-08-29T14:01:11.876Z warn: Default value for JWT_SECRET is being used.
2025-08-29T14:01:11.876Z warn: Default value for JWT_REFRESH_SECRET is being used.
2025-08-29T14:01:11.876Z info: Please replace any default secret values.
2025-08-29T14:01:11.877Z info: ‚Äã

    For your convenience, use this tool to generate your own secret values:
    https://www.librechat.ai/toolkit/creds_generator

    ‚Äã
2025-08-29T14:01:11.903Z warn: RAG API is either not running or not reachable at undefined, you may experience errors with file uploads.
2025-08-29T14:01:11.989Z info: Turnstile is DISABLED (no siteKey provided).
2025-08-29T14:01:11.989Z info: Outdated Config version: 1.0.0
Latest version: 1.2.8

      Check out the Config changelogs for the latest options and features added.

      https://... [truncated]
2025-08-29T14:01:12.028Z debug: Role 'USER': Preserving existing permissions for 'PROMPTS'
2025-08-29T14:01:12.038Z debug: Role 'USER': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T14:01:12.038Z debug: Role 'USER': Preserving existing permissions for 'MEMORIES'
2025-08-29T14:01:12.038Z debug: Role 'USER': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T14:01:12.038Z debug: Role 'USER': Preserving existing permissions for 'AGENTS'
2025-08-29T14:01:12.038Z debug: Role 'USER': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T14:01:12.038Z debug: Role 'USER': Preserving existing permissions for 'RUN_CODE'
2025-08-29T14:01:12.038Z debug: Role 'USER': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T14:01:12.038Z debug: Role 'USER': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T14:01:12.038Z debug: Role 'USER': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T14:01:12.038Z debug: Role 'USER': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T14:01:12.038Z debug: Role 'USER': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T14:01:12.055Z debug: Role 'ADMIN': Preserving existing permissions for 'PROMPTS'
2025-08-29T14:01:12.055Z debug: Role 'ADMIN': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T14:01:12.055Z debug: Role 'ADMIN': Preserving existing permissions for 'MEMORIES'
2025-08-29T14:01:12.055Z debug: Role 'ADMIN': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T14:01:12.056Z debug: Role 'ADMIN': Preserving existing permissions for 'AGENTS'
2025-08-29T14:01:12.056Z debug: Role 'ADMIN': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T14:01:12.056Z debug: Role 'ADMIN': Preserving existing permissions for 'RUN_CODE'
2025-08-29T14:01:12.056Z debug: Role 'ADMIN': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T14:01:12.056Z debug: Role 'ADMIN': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T14:01:12.056Z debug: Role 'ADMIN': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T14:01:12.056Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T14:01:12.056Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T14:01:12.101Z info: Server listening at http://localhost:3080
2025-08-29T14:01:12.235Z debug: [MCP][d1-database] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librech... [truncated]
2025-08-29T14:01:12.235Z debug: [MCP][prompt-instructions] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"... [truncated]
2025-08-29T14:01:14.772Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{}},"serverInfo":{"nam... [truncated]
2025-08-29T14:01:14.774Z debug: [MCP][d1-database] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T14:01:14.774Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T14:01:14.953Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T14:01:14.953Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T14:01:14.954Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T14:01:15.007Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:01:15.010Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T14:01:15.072Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:01:15.073Z info: [MCP][d1-database] -------------------------------------------------‚îê
2025-08-29T14:01:15.073Z info: [MCP][d1-database] URL: undefined
2025-08-29T14:01:15.073Z info: [MCP][d1-database] OAuth Required: false
2025-08-29T14:01:15.074Z info: [MCP][d1-database] Capabilities: {"tools":{}}
2025-08-29T14:01:15.074Z info: [MCP][d1-database] Tools: health_check, update_activitylog_clients, reset_activitylog_from_trips, explore_database, get_anything, remember_context, bu... [truncated]
2025-08-29T14:01:15.074Z info: [MCP][d1-database] Server Instructions: undefined
2025-08-29T14:01:15.084Z info: [MCP][d1-database] -------------------------------------------------‚îò
2025-08-29T14:01:15.765Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{"listChanged"... [truncated]
2025-08-29T14:01:15.766Z debug: [MCP][prompt-instructions] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T14:01:15.766Z debug: [MCP][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T14:01:15.937Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T14:01:15.938Z debug: [MCP][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T14:01:15.938Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T14:01:15.991Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T14:01:15.991Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T14:01:16.039Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T14:01:16.040Z info: [MCP][prompt-instructions] -------------------------------------------------‚îê
2025-08-29T14:01:16.040Z info: [MCP][prompt-instructions] URL: undefined
2025-08-29T14:01:16.040Z info: [MCP][prompt-instructions] OAuth Required: false
2025-08-29T14:01:16.040Z info: [MCP][prompt-instructions] Capabilities: {"tools":{"listChanged":false}}
2025-08-29T14:01:16.040Z info: [MCP][prompt-instructions] Tools: get_instruction, list_instructions, create_instruction, update_instruction, get_instructions_by_confidence, set_verb... [truncated]
2025-08-29T14:01:16.040Z info: [MCP][prompt-instructions] Server Instructions: undefined
2025-08-29T14:01:16.040Z info: [MCP][prompt-instructions] -------------------------------------------------‚îò
2025-08-29T14:01:16.043Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T14:01:16.091Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:01:16.097Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T14:01:16.174Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T14:01:16.187Z debug: Merged 33 app-level tools
2025-08-29T14:01:16.187Z info: MCP servers initialized successfully. Added 33 MCP tools.
2025-08-29T14:01:16.188Z debug: Checking if agent permissions migration is needed
2025-08-29T14:01:16.202Z debug: Collection already exists: aclentries
2025-08-29T14:01:16.284Z debug: Agent migration check completed
{
  totalToMigrate: 0,
  globalEditAccess: 0,
  globalViewAccess: 0,
  privateAgents: 0,
}
2025-08-29T14:01:16.289Z debug: Checking if prompt permissions migration is needed
2025-08-29T14:01:16.296Z debug: Collection already exists: aclentries
2025-08-29T14:01:16.314Z debug: Prompt migration check completed
{
  totalToMigrate: 0,
  globalViewAccess: 0,
  privateGroups: 0,
}
2025-08-29T14:11:38.310Z info: Mongo Connection options
2025-08-29T14:11:38.312Z info: {
  "bufferCommands": false,
  "autoIndex": false,
  "autoCreate": false
}
2025-08-29T14:11:38.344Z info: Connected to MongoDB
2025-08-29T14:11:38.345Z info: [indexSync] Starting index synchronization check...
2025-08-29T14:11:38.407Z info: [getAppConfig] App configuration not initialized. Initializing AppService...
2025-08-29T14:11:38.415Z info: Custom config file loaded:
2025-08-29T14:11:38.416Z info: {
  "version": "1.0.0",
  "cache": true,
  "endpoints": {
    "custom": [
      {
        "name": "Claude Haiku (Cost Effective)",
        "apiKey": "... [truncated]
2025-08-29T14:11:38.416Z debug: Custom config:
{
  version: "1.0.0",
  cache: true,
    // 3 custom(s)
    endpoints.custom: [{"name":"Claude Haiku (Cost Effective)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthr... [truncated],{"name":"Claude Sonnet (Premium)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthropic.c... [truncated],{"name":"GPT-4 (Fallback)","apiKey":"${OPENAI_API_KEY}","baseURL":"https://api.openai.com/v1","model... [truncated]],
    0.name: "Claude Haiku (Cost Effective)",
    0.apiKey: "${ANTHROPIC_API_KEY}",
    0.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-haiku-20241022"],
    default.0: "claude-3-5-haiku-20241022",
    0.modelDisplayLabel: "üí∞ Haiku - Economical ($0.25/1M tokens)",
    0.titleConvo: true,
    0.titleModel: "claude-3-5-haiku-20241022",
    1.name: "Claude Sonnet (Premium)",
    1.apiKey: "${ANTHROPIC_API_KEY}",
    1.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-sonnet-20241022"],
    default.0: "claude-3-5-sonnet-20241022",
    1.modelDisplayLabel: "‚≠ê Sonnet - Premium Planning ($3.00/1M tokens)",
    1.titleConvo: true,
    1.titleModel: "claude-3-5-sonnet-20241022",
    2.name: "GPT-4 (Fallback)",
    2.apiKey: "${OPENAI_API_KEY}",
    2.baseURL: "https://api.openai.com/v1",
    // 1 default(s)
    models.default: ["gpt-4-turbo-preview"],
    default.0: "gpt-4-turbo-preview",
    2.modelDisplayLabel: "üîÑ GPT-4 - Fallback ($10.00/1M tokens)",
    2.titleConvo: true,
    d1-database.command: "npx",
    // 3 arg(s)
    d1-database.args: ["-y","mcp-remote","https://d1-database-improved.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://d1-database-improved.somotravel.workers.dev/sse",
    d1-database.timeout: 30000,
    d1-database.env: [object Object],
    d1-database.description: "Access to client and trip database with comprehensive travel data",
    prompt-instructions.command: "npx",
    // 3 arg(s)
    prompt-instructions.args: ["-y","mcp-remote","https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse",
    prompt-instructions.timeout: 30000,
    prompt-instructions.env: [object Object],
    prompt-instructions.description: "Travel planning workflows, instructions, and structured processes",
    privacyPolicy.externalUrl: "https://travelops.ai/privacy",
    termsOfService.externalUrl: "https://travelops.ai/terms",
}
2025-08-29T14:11:38.418Z debug: Web search serperApiKey: Using environment variable SERPER_API_KEY (not set in environment, user provided value)
2025-08-29T14:11:38.418Z debug: Web search searxngInstanceUrl: Using environment variable SEARXNG_INSTANCE_URL (not set in environment, user provided value)
2025-08-29T14:11:38.418Z debug: Web search searxngApiKey: Using environment variable SEARXNG_API_KEY (not set in environment, user provided value)
2025-08-29T14:11:38.418Z debug: Web search firecrawlApiKey: Using environment variable FIRECRAWL_API_KEY (not set in environment, user provided value)
2025-08-29T14:11:38.418Z debug: Web search firecrawlApiUrl: Using environment variable FIRECRAWL_API_URL (not set in environment, user provided value)
2025-08-29T14:11:38.418Z debug: Web search jinaApiKey: Using environment variable JINA_API_KEY (not set in environment, user provided value)
2025-08-29T14:11:38.418Z debug: Web search cohereApiKey: Using environment variable COHERE_API_KEY (not set in environment, user provided value)
2025-08-29T14:11:38.418Z warn: Default value for CREDS_KEY is being used.
2025-08-29T14:11:38.418Z warn: Default value for CREDS_IV is being used.
2025-08-29T14:11:38.419Z warn: Default value for JWT_SECRET is being used.
2025-08-29T14:11:38.419Z warn: Default value for JWT_REFRESH_SECRET is being used.
2025-08-29T14:11:38.419Z info: Please replace any default secret values.
2025-08-29T14:11:38.419Z info: ‚Äã

    For your convenience, use this tool to generate your own secret values:
    https://www.librechat.ai/toolkit/creds_generator

    ‚Äã
2025-08-29T14:11:38.419Z warn: RAG API is either not running or not reachable at undefined, you may experience errors with file uploads.
2025-08-29T14:11:38.428Z info: Turnstile is DISABLED (no siteKey provided).
2025-08-29T14:11:38.429Z info: Outdated Config version: 1.0.0
Latest version: 1.2.8

      Check out the Config changelogs for the latest options and features added.

      https://... [truncated]
2025-08-29T14:11:38.433Z debug: Role 'USER': Preserving existing permissions for 'PROMPTS'
2025-08-29T14:11:38.433Z debug: Role 'USER': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T14:11:38.433Z debug: Role 'USER': Preserving existing permissions for 'MEMORIES'
2025-08-29T14:11:38.433Z debug: Role 'USER': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T14:11:38.433Z debug: Role 'USER': Preserving existing permissions for 'AGENTS'
2025-08-29T14:11:38.433Z debug: Role 'USER': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T14:11:38.434Z debug: Role 'USER': Preserving existing permissions for 'RUN_CODE'
2025-08-29T14:11:38.434Z debug: Role 'USER': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T14:11:38.434Z debug: Role 'USER': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T14:11:38.434Z debug: Role 'USER': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T14:11:38.434Z debug: Role 'USER': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T14:11:38.434Z debug: Role 'USER': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T14:11:38.436Z debug: Role 'ADMIN': Preserving existing permissions for 'PROMPTS'
2025-08-29T14:11:38.436Z debug: Role 'ADMIN': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T14:11:38.436Z debug: Role 'ADMIN': Preserving existing permissions for 'MEMORIES'
2025-08-29T14:11:38.436Z debug: Role 'ADMIN': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T14:11:38.436Z debug: Role 'ADMIN': Preserving existing permissions for 'AGENTS'
2025-08-29T14:11:38.436Z debug: Role 'ADMIN': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T14:11:38.436Z debug: Role 'ADMIN': Preserving existing permissions for 'RUN_CODE'
2025-08-29T14:11:38.436Z debug: Role 'ADMIN': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T14:11:38.436Z debug: Role 'ADMIN': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T14:11:38.436Z debug: Role 'ADMIN': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T14:11:38.436Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T14:11:38.436Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T14:11:38.447Z info: Server listening at http://localhost:3080
2025-08-29T14:11:38.484Z debug: [MCP][d1-database] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librech... [truncated]
2025-08-29T14:11:38.484Z debug: [MCP][prompt-instructions] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"... [truncated]
2025-08-29T14:11:38.597Z debug: [MEILI_SYNC:meili-index-sync] Creating initial flow state
2025-08-29T14:11:38.602Z error: [indexSync] error fetch failed
2025-08-29T14:11:39.593Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{"listChanged"... [truncated]
2025-08-29T14:11:39.594Z debug: [MCP][prompt-instructions] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T14:11:39.595Z debug: [MCP][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T14:11:39.819Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{}},"serverInfo":{"nam... [truncated]
2025-08-29T14:11:39.819Z debug: [MCP][d1-database] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T14:11:39.819Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T14:11:39.936Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T14:11:39.936Z debug: [MCP][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T14:11:39.936Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T14:11:40.011Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T14:11:40.012Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T14:11:40.034Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T14:11:40.034Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T14:11:40.034Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T14:11:40.086Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T14:11:40.087Z info: [MCP][prompt-instructions] -------------------------------------------------‚îê
2025-08-29T14:11:40.087Z info: [MCP][prompt-instructions] URL: undefined
2025-08-29T14:11:40.087Z info: [MCP][prompt-instructions] OAuth Required: false
2025-08-29T14:11:40.088Z info: [MCP][prompt-instructions] Capabilities: {"tools":{"listChanged":false}}
2025-08-29T14:11:40.088Z info: [MCP][prompt-instructions] Tools: get_instruction, list_instructions, create_instruction, update_instruction, get_instructions_by_confidence, set_verb... [truncated]
2025-08-29T14:11:40.088Z info: [MCP][prompt-instructions] Server Instructions: undefined
2025-08-29T14:11:40.088Z info: [MCP][prompt-instructions] -------------------------------------------------‚îò
2025-08-29T14:11:40.160Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:11:40.161Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T14:11:40.285Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:11:40.286Z info: [MCP][d1-database] -------------------------------------------------‚îê
2025-08-29T14:11:40.286Z info: [MCP][d1-database] URL: undefined
2025-08-29T14:11:40.286Z info: [MCP][d1-database] OAuth Required: false
2025-08-29T14:11:40.286Z info: [MCP][d1-database] Capabilities: {"tools":{}}
2025-08-29T14:11:40.286Z info: [MCP][d1-database] Tools: health_check, update_activitylog_clients, reset_activitylog_from_trips, explore_database, get_anything, remember_context, bu... [truncated]
2025-08-29T14:11:40.286Z info: [MCP][d1-database] Server Instructions: undefined
2025-08-29T14:11:40.287Z info: [MCP][d1-database] -------------------------------------------------‚îò
2025-08-29T14:11:40.288Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T14:11:40.365Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T14:11:40.366Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T14:11:40.492Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:11:40.496Z debug: Merged 33 app-level tools
2025-08-29T14:11:40.498Z info: MCP servers initialized successfully. Added 33 MCP tools.
2025-08-29T14:11:40.499Z debug: Checking if agent permissions migration is needed
2025-08-29T14:11:40.503Z debug: Collection already exists: aclentries
2025-08-29T14:11:40.525Z debug: Agent migration check completed
{
  totalToMigrate: 0,
  globalEditAccess: 0,
  globalViewAccess: 0,
  privateAgents: 0,
}
2025-08-29T14:11:40.525Z debug: Checking if prompt permissions migration is needed
2025-08-29T14:11:40.527Z debug: Collection already exists: aclentries
2025-08-29T14:11:40.535Z debug: Prompt migration check completed
{
  totalToMigrate: 0,
  globalViewAccess: 0,
  privateGroups: 0,
}
2025-08-29T14:11:49.789Z info: Mongo Connection options
2025-08-29T14:11:49.792Z info: {
  "bufferCommands": false,
  "autoIndex": false,
  "autoCreate": false
}
2025-08-29T14:11:49.838Z info: Connected to MongoDB
2025-08-29T14:11:49.838Z info: [indexSync] Starting index synchronization check...
2025-08-29T14:11:49.922Z info: [getAppConfig] App configuration not initialized. Initializing AppService...
2025-08-29T14:11:49.934Z info: Custom config file loaded:
2025-08-29T14:11:49.935Z info: {
  "version": "1.0.0",
  "cache": true,
  "endpoints": {
    "custom": [
      {
        "name": "Claude Haiku (Cost Effective)",
        "apiKey": "... [truncated]
2025-08-29T14:11:49.935Z debug: Custom config:
{
  version: "1.0.0",
  cache: true,
    // 3 custom(s)
    endpoints.custom: [{"name":"Claude Haiku (Cost Effective)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthr... [truncated],{"name":"Claude Sonnet (Premium)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthropic.c... [truncated],{"name":"GPT-4 (Fallback)","apiKey":"${OPENAI_API_KEY}","baseURL":"https://api.openai.com/v1","model... [truncated]],
    0.name: "Claude Haiku (Cost Effective)",
    0.apiKey: "${ANTHROPIC_API_KEY}",
    0.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-haiku-20241022"],
    default.0: "claude-3-5-haiku-20241022",
    0.modelDisplayLabel: "üí∞ Haiku - Economical ($0.25/1M tokens)",
    0.titleConvo: true,
    0.titleModel: "claude-3-5-haiku-20241022",
    1.name: "Claude Sonnet (Premium)",
    1.apiKey: "${ANTHROPIC_API_KEY}",
    1.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-sonnet-20241022"],
    default.0: "claude-3-5-sonnet-20241022",
    1.modelDisplayLabel: "‚≠ê Sonnet - Premium Planning ($3.00/1M tokens)",
    1.titleConvo: true,
    1.titleModel: "claude-3-5-sonnet-20241022",
    2.name: "GPT-4 (Fallback)",
    2.apiKey: "${OPENAI_API_KEY}",
    2.baseURL: "https://api.openai.com/v1",
    // 1 default(s)
    models.default: ["gpt-4-turbo-preview"],
    default.0: "gpt-4-turbo-preview",
    2.modelDisplayLabel: "üîÑ GPT-4 - Fallback ($10.00/1M tokens)",
    2.titleConvo: true,
    d1-database.command: "npx",
    // 3 arg(s)
    d1-database.args: ["-y","mcp-remote","https://d1-database-improved.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://d1-database-improved.somotravel.workers.dev/sse",
    d1-database.timeout: 30000,
    d1-database.env: [object Object],
    d1-database.description: "Access to client and trip database with comprehensive travel data",
    prompt-instructions.command: "npx",
    // 3 arg(s)
    prompt-instructions.args: ["-y","mcp-remote","https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse",
    prompt-instructions.timeout: 30000,
    prompt-instructions.env: [object Object],
    prompt-instructions.description: "Travel planning workflows, instructions, and structured processes",
    privacyPolicy.externalUrl: "https://travelops.ai/privacy",
    termsOfService.externalUrl: "https://travelops.ai/terms",
}
2025-08-29T14:11:49.938Z debug: Web search serperApiKey: Using environment variable SERPER_API_KEY (not set in environment, user provided value)
2025-08-29T14:11:49.938Z debug: Web search searxngInstanceUrl: Using environment variable SEARXNG_INSTANCE_URL (not set in environment, user provided value)
2025-08-29T14:11:49.938Z debug: Web search searxngApiKey: Using environment variable SEARXNG_API_KEY (not set in environment, user provided value)
2025-08-29T14:11:49.938Z debug: Web search firecrawlApiKey: Using environment variable FIRECRAWL_API_KEY (not set in environment, user provided value)
2025-08-29T14:11:49.938Z debug: Web search firecrawlApiUrl: Using environment variable FIRECRAWL_API_URL (not set in environment, user provided value)
2025-08-29T14:11:49.938Z debug: Web search jinaApiKey: Using environment variable JINA_API_KEY (not set in environment, user provided value)
2025-08-29T14:11:49.938Z debug: Web search cohereApiKey: Using environment variable COHERE_API_KEY (not set in environment, user provided value)
2025-08-29T14:11:49.938Z warn: Default value for CREDS_KEY is being used.
2025-08-29T14:11:49.939Z warn: Default value for CREDS_IV is being used.
2025-08-29T14:11:49.939Z warn: Default value for JWT_SECRET is being used.
2025-08-29T14:11:49.939Z warn: Default value for JWT_REFRESH_SECRET is being used.
2025-08-29T14:11:49.939Z info: Please replace any default secret values.
2025-08-29T14:11:49.939Z info: ‚Äã

    For your convenience, use this tool to generate your own secret values:
    https://www.librechat.ai/toolkit/creds_generator

    ‚Äã
2025-08-29T14:11:49.940Z warn: RAG API is either not running or not reachable at undefined, you may experience errors with file uploads.
2025-08-29T14:11:49.956Z info: Turnstile is DISABLED (no siteKey provided).
2025-08-29T14:11:49.957Z info: Outdated Config version: 1.0.0
Latest version: 1.2.8

      Check out the Config changelogs for the latest options and features added.

      https://... [truncated]
2025-08-29T14:11:49.962Z debug: Role 'USER': Preserving existing permissions for 'PROMPTS'
2025-08-29T14:11:49.962Z debug: Role 'USER': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T14:11:49.962Z debug: Role 'USER': Preserving existing permissions for 'MEMORIES'
2025-08-29T14:11:49.962Z debug: Role 'USER': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T14:11:49.962Z debug: Role 'USER': Preserving existing permissions for 'AGENTS'
2025-08-29T14:11:49.962Z debug: Role 'USER': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T14:11:49.962Z debug: Role 'USER': Preserving existing permissions for 'RUN_CODE'
2025-08-29T14:11:49.962Z debug: Role 'USER': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T14:11:49.963Z debug: Role 'USER': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T14:11:49.963Z debug: Role 'USER': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T14:11:49.963Z debug: Role 'USER': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T14:11:49.963Z debug: Role 'USER': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T14:11:49.965Z debug: Role 'ADMIN': Preserving existing permissions for 'PROMPTS'
2025-08-29T14:11:49.966Z debug: Role 'ADMIN': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T14:11:49.966Z debug: Role 'ADMIN': Preserving existing permissions for 'MEMORIES'
2025-08-29T14:11:49.966Z debug: Role 'ADMIN': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T14:11:49.966Z debug: Role 'ADMIN': Preserving existing permissions for 'AGENTS'
2025-08-29T14:11:49.966Z debug: Role 'ADMIN': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T14:11:49.966Z debug: Role 'ADMIN': Preserving existing permissions for 'RUN_CODE'
2025-08-29T14:11:49.966Z debug: Role 'ADMIN': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T14:11:49.966Z debug: Role 'ADMIN': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T14:11:49.966Z debug: Role 'ADMIN': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T14:11:49.966Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T14:11:49.966Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T14:11:49.979Z info: Server listening at http://localhost:3080
2025-08-29T14:11:50.032Z debug: [MCP][d1-database] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librech... [truncated]
2025-08-29T14:11:50.032Z debug: [MCP][prompt-instructions] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"... [truncated]
2025-08-29T14:11:50.092Z debug: [MEILI_SYNC:meili-index-sync] Creating initial flow state
2025-08-29T14:11:50.096Z error: [indexSync] error fetch failed
2025-08-29T14:11:50.967Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{}},"serverInfo":{"nam... [truncated]
2025-08-29T14:11:50.968Z debug: [MCP][d1-database] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T14:11:50.969Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T14:11:50.982Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{"listChanged"... [truncated]
2025-08-29T14:11:50.982Z debug: [MCP][prompt-instructions] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T14:11:50.983Z debug: [MCP][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T14:11:51.015Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T14:11:51.017Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T14:11:51.017Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T14:11:51.059Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:11:51.060Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T14:11:51.117Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:11:51.118Z info: [MCP][d1-database] -------------------------------------------------‚îê
2025-08-29T14:11:51.118Z info: [MCP][d1-database] URL: undefined
2025-08-29T14:11:51.118Z info: [MCP][d1-database] OAuth Required: false
2025-08-29T14:11:51.118Z info: [MCP][d1-database] Capabilities: {"tools":{}}
2025-08-29T14:11:51.119Z info: [MCP][d1-database] Tools: health_check, update_activitylog_clients, reset_activitylog_from_trips, explore_database, get_anything, remember_context, bu... [truncated]
2025-08-29T14:11:51.119Z info: [MCP][d1-database] Server Instructions: undefined
2025-08-29T14:11:51.119Z info: [MCP][d1-database] -------------------------------------------------‚îò
2025-08-29T14:11:51.160Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T14:11:51.160Z debug: [MCP][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T14:11:51.161Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T14:11:51.202Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T14:11:51.203Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T14:11:51.268Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T14:11:51.268Z info: [MCP][prompt-instructions] -------------------------------------------------‚îê
2025-08-29T14:11:51.269Z info: [MCP][prompt-instructions] URL: undefined
2025-08-29T14:11:51.269Z info: [MCP][prompt-instructions] OAuth Required: false
2025-08-29T14:11:51.269Z info: [MCP][prompt-instructions] Capabilities: {"tools":{"listChanged":false}}
2025-08-29T14:11:51.269Z info: [MCP][prompt-instructions] Tools: get_instruction, list_instructions, create_instruction, update_instruction, get_instructions_by_confidence, set_verb... [truncated]
2025-08-29T14:11:51.269Z info: [MCP][prompt-instructions] Server Instructions: undefined
2025-08-29T14:11:51.269Z info: [MCP][prompt-instructions] -------------------------------------------------‚îò
2025-08-29T14:11:51.271Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T14:11:51.313Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:11:51.314Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T14:11:51.356Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T14:11:51.360Z debug: Merged 33 app-level tools
2025-08-29T14:11:51.360Z info: MCP servers initialized successfully. Added 33 MCP tools.
2025-08-29T14:11:51.361Z debug: Checking if agent permissions migration is needed
2025-08-29T14:11:51.363Z debug: Collection already exists: aclentries
2025-08-29T14:11:51.379Z debug: Agent migration check completed
{
  totalToMigrate: 0,
  globalEditAccess: 0,
  globalViewAccess: 0,
  privateAgents: 0,
}
2025-08-29T14:11:51.380Z debug: Checking if prompt permissions migration is needed
2025-08-29T14:11:51.382Z debug: Collection already exists: aclentries
2025-08-29T14:11:51.392Z debug: Prompt migration check completed
{
  totalToMigrate: 0,
  globalViewAccess: 0,
  privateGroups: 0,
}
2025-08-29T14:12:10.718Z info: [Login] [Login successful] [Username: dneilroberts@gmail.com] [Request-IP: 127.0.0.1]
2025-08-29T14:12:11.252Z debug: Merged 33 user-level tools
2025-08-29T14:12:11.542Z debug: [MCP][d1-database] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librech... [truncated]
2025-08-29T14:12:11.543Z debug: [MCP][prompt-instructions] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"... [truncated]
2025-08-29T14:12:12.447Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{"listChanged"... [truncated]
2025-08-29T14:12:12.447Z debug: [MCP][prompt-instructions] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T14:12:12.448Z debug: [MCP][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T14:12:12.489Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T14:12:12.490Z debug: [MCP][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T14:12:12.490Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T14:12:12.533Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T14:12:12.588Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{}},"serverInfo":{"nam... [truncated]
2025-08-29T14:12:12.589Z debug: [MCP][d1-database] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T14:12:12.589Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T14:12:12.721Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T14:12:12.722Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T14:12:12.722Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T14:12:12.792Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:12:59.491Z debug: [AgentController] Request aborted on close
2025-08-29T14:12:59.493Z debug: [BaseClient] Loading history:
{
  conversationId: "99b94427-c178-4ebc-b1c0-6c2d8e858224",
  parentMessageId: "00000000-0000-0000-0000-000000000000",
}
2025-08-29T14:12:59.719Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 179990,
  maxContextTokens: 180000,
}
2025-08-29T14:12:59.719Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 179990,
  maxContextTokens: 180000,
}
2025-08-29T14:12:59.719Z debug: [BaseClient] tokenCountMap:
{
  b5f8cf70-93e7-455c-a488-c5702ce0b28e: 7,
}
2025-08-29T14:12:59.719Z debug: [BaseClient]
{
  promptTokens: 10,
  remainingContextTokens: 179990,
  payloadSize: 1,
  maxContextTokens: 180000,
}
2025-08-29T14:12:59.720Z debug: [BaseClient] tokenCountMap
{
  b5f8cf70-93e7-455c-a488-c5702ce0b28e: 7,
}
2025-08-29T14:12:59.720Z debug: [BaseClient] userMessage
{
  messageId: "b5f8cf70-93e7-455c-a488-c5702ce0b28e",
  parentMessageId: "00000000-0000-0000-0000-000000000000",
  conversationId: "99b94427-c178-4ebc-b1c0-6c2d8e858224",
  sender: "User",
  text: "travel_agent_start",
  isCreatedByUser: true,
  tokenCount: 7,
}
2025-08-29T14:13:00.026Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T14:13:02.283Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/call","params":{"name":"travel_agent_start","arguments":{}},"jsonrpc":"2.0","id":3}
2025-08-29T14:13:02.877Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":3,"result":{"content":[{"type":"text","text":"‚úÖ **Claude Travel Agent System Read... [truncated]
2025-08-29T14:13:02.877Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T14:13:02.877Z
2025-08-29T14:13:06.621Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T14:13:06.644Z debug: [AgentController] Request closed
2025-08-29T14:13:07.557Z debug: [saveConvo] api/server/services/Endpoints/agents/title.js
2025-08-29T14:13:07.570Z debug: [AgentController] Title generation started
2025-08-29T14:13:07.570Z debug: [AgentController] Title generation completed
2025-08-29T14:13:07.571Z debug: [AgentController] Performing cleanup
2025-08-29T14:13:07.571Z debug: [AgentController] Cleaning up abort controller
2025-08-29T14:13:07.571Z debug: [AgentController] Cleanup completed
2025-08-29T14:15:02.246Z debug: [AgentController] Request aborted on close
2025-08-29T14:15:02.246Z debug: [BaseClient] Loading history:
{
  conversationId: "99b94427-c178-4ebc-b1c0-6c2d8e858224",
  parentMessageId: "794cd710-88d6-429e-b6e0-2154ad280b64",
}
2025-08-29T14:15:02.249Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 179676,
  maxContextTokens: 180000,
}
2025-08-29T14:15:02.250Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 179676,
  maxContextTokens: 180000,
}
2025-08-29T14:15:02.250Z debug: [BaseClient] tokenCountMap:
{
  b5f8cf70-93e7-455c-a488-c5702ce0b28e: 7,
  794cd710-88d6-429e-b6e0-2154ad280b64: 304,
  a197459e-9856-4577-a591-f68e60b22d5c: 10,
}
2025-08-29T14:15:02.250Z debug: [BaseClient]
{
  promptTokens: 324,
  remainingContextTokens: 179676,
  payloadSize: 3,
  maxContextTokens: 180000,
}
2025-08-29T14:15:02.250Z debug: [BaseClient] tokenCountMap
{
  b5f8cf70-93e7-455c-a488-c5702ce0b28e: 7,
  794cd710-88d6-429e-b6e0-2154ad280b64: 304,
  a197459e-9856-4577-a591-f68e60b22d5c: 10,
}
2025-08-29T14:15:02.250Z debug: [BaseClient] userMessage
{
  messageId: "a197459e-9856-4577-a591-f68e60b22d5c",
  parentMessageId: "794cd710-88d6-429e-b6e0-2154ad280b64",
  conversationId: "99b94427-c178-4ebc-b1c0-6c2d8e858224",
  sender: "User",
  text: "find Sara and Darren Jones trip",
  isCreatedByUser: true,
  tokenCount: 10,
}
2025-08-29T14:15:02.630Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T14:15:06.973Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":3}
2025-08-29T14:15:07.194Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":3,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T14:15:07.195Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T14:15:07.195Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T14:15:07.269Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:15:07.270Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_anything","arguments":{"query":"Sara and Darren Jones trip","includ... [truncated]
2025-08-29T14:15:07.853Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":5,"result":{"content":[{"type":"text","text":"{\n  \"response\": \"Sara & Darren Jones 25... [truncated]
2025-08-29T14:15:07.853Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T14:15:07.853Z
2025-08-29T14:15:10.794Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_workflow_status","arguments":{"trip_identifier":"Sara & Darren Jone... [truncated]
2025-08-29T14:15:10.943Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":6,"result":{"content":[{"type":"text","text":"{\n  \"success\": true,\n  \"trip_id\": 26,... [truncated]
2025-08-29T14:15:10.943Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T14:15:10.943Z
2025-08-29T14:15:13.306Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_workflow_instructions","arguments":{"trip_identifier":"Sara & Darre... [truncated]
2025-08-29T14:15:13.477Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":7,"result":{"content":[{"type":"text","text":"{\n  \"success\": false,\n  \"error\": \"D1... [truncated]
2025-08-29T14:15:13.478Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T14:15:13.478Z
2025-08-29T14:15:19.136Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T14:15:19.144Z debug: [AgentController] Request closed
2025-08-29T14:15:19.149Z debug: [AgentController] Performing cleanup
2025-08-29T14:15:19.149Z debug: [AgentController] Cleaning up abort controller
2025-08-29T14:15:19.149Z debug: [AgentController] Cleanup completed
2025-08-29T14:26:21.030Z info: Mongo Connection options
2025-08-29T14:26:21.032Z info: {
  "bufferCommands": false,
  "autoIndex": false,
  "autoCreate": false
}
2025-08-29T14:26:21.062Z info: Connected to MongoDB
2025-08-29T14:26:21.063Z info: [indexSync] Starting index synchronization check...
2025-08-29T14:26:21.116Z info: [getAppConfig] App configuration not initialized. Initializing AppService...
2025-08-29T14:26:21.123Z info: Custom config file loaded:
2025-08-29T14:26:21.123Z info: {
  "version": "1.0.0",
  "cache": true,
  "endpoints": {
    "custom": [
      {
        "name": "Claude Haiku (Cost Effective)",
        "apiKey": "... [truncated]
2025-08-29T14:26:21.124Z debug: Custom config:
{
  version: "1.0.0",
  cache: true,
    // 3 custom(s)
    endpoints.custom: [{"name":"Claude Haiku (Cost Effective)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthr... [truncated],{"name":"Claude Sonnet (Premium)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthropic.c... [truncated],{"name":"GPT-4 (Fallback)","apiKey":"${OPENAI_API_KEY}","baseURL":"https://api.openai.com/v1","model... [truncated]],
    0.name: "Claude Haiku (Cost Effective)",
    0.apiKey: "${ANTHROPIC_API_KEY}",
    0.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-haiku-20241022"],
    default.0: "claude-3-5-haiku-20241022",
    0.modelDisplayLabel: "üí∞ Haiku - Economical ($0.25/1M tokens)",
    0.titleConvo: true,
    0.titleModel: "claude-3-5-haiku-20241022",
    1.name: "Claude Sonnet (Premium)",
    1.apiKey: "${ANTHROPIC_API_KEY}",
    1.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-sonnet-20241022"],
    default.0: "claude-3-5-sonnet-20241022",
    1.modelDisplayLabel: "‚≠ê Sonnet - Premium Planning ($3.00/1M tokens)",
    1.titleConvo: true,
    1.titleModel: "claude-3-5-sonnet-20241022",
    2.name: "GPT-4 (Fallback)",
    2.apiKey: "${OPENAI_API_KEY}",
    2.baseURL: "https://api.openai.com/v1",
    // 1 default(s)
    models.default: ["gpt-4-turbo-preview"],
    default.0: "gpt-4-turbo-preview",
    2.modelDisplayLabel: "üîÑ GPT-4 - Fallback ($10.00/1M tokens)",
    2.titleConvo: true,
    d1-database.command: "npx",
    // 3 arg(s)
    d1-database.args: ["-y","mcp-remote","https://d1-database-improved.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://d1-database-improved.somotravel.workers.dev/sse",
    d1-database.timeout: 30000,
    d1-database.env: [object Object],
    d1-database.description: "Access to client and trip database with comprehensive travel data",
    d1-database.serverInstructions: "Tool selection guidance:\n- Use this server for data lookups and persistence:\n  ‚Ä¢ get_anything: broad... [truncated]",
    prompt-instructions.command: "npx",
    // 3 arg(s)
    prompt-instructions.args: ["-y","mcp-remote","https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse",
    prompt-instructions.timeout: 30000,
    prompt-instructions.env: [object Object],
    prompt-instructions.description: "Travel planning workflows, instructions, and structured processes",
    prompt-instructions.serverInstructions: "Tool selection guidance:\n- Use this server to manage workflow state and conversation flow.\n  ‚Ä¢ trave... [truncated]",
    privacyPolicy.externalUrl: "https://travelops.ai/privacy",
    termsOfService.externalUrl: "https://travelops.ai/terms",
}
2025-08-29T14:26:21.126Z debug: Web search serperApiKey: Using environment variable SERPER_API_KEY (not set in environment, user provided value)
2025-08-29T14:26:21.126Z debug: Web search searxngInstanceUrl: Using environment variable SEARXNG_INSTANCE_URL (not set in environment, user provided value)
2025-08-29T14:26:21.126Z debug: Web search searxngApiKey: Using environment variable SEARXNG_API_KEY (not set in environment, user provided value)
2025-08-29T14:26:21.126Z debug: Web search firecrawlApiKey: Using environment variable FIRECRAWL_API_KEY (not set in environment, user provided value)
2025-08-29T14:26:21.126Z debug: Web search firecrawlApiUrl: Using environment variable FIRECRAWL_API_URL (not set in environment, user provided value)
2025-08-29T14:26:21.126Z debug: Web search jinaApiKey: Using environment variable JINA_API_KEY (not set in environment, user provided value)
2025-08-29T14:26:21.126Z debug: Web search cohereApiKey: Using environment variable COHERE_API_KEY (not set in environment, user provided value)
2025-08-29T14:26:21.126Z warn: Default value for CREDS_KEY is being used.
2025-08-29T14:26:21.126Z warn: Default value for CREDS_IV is being used.
2025-08-29T14:26:21.126Z warn: Default value for JWT_SECRET is being used.
2025-08-29T14:26:21.126Z warn: Default value for JWT_REFRESH_SECRET is being used.
2025-08-29T14:26:21.127Z info: Please replace any default secret values.
2025-08-29T14:26:21.127Z info: ‚Äã

    For your convenience, use this tool to generate your own secret values:
    https://www.librechat.ai/toolkit/creds_generator

    ‚Äã
2025-08-29T14:26:21.127Z warn: RAG API is either not running or not reachable at undefined, you may experience errors with file uploads.
2025-08-29T14:26:21.135Z info: Turnstile is DISABLED (no siteKey provided).
2025-08-29T14:26:21.136Z info: Outdated Config version: 1.0.0
Latest version: 1.2.8

      Check out the Config changelogs for the latest options and features added.

      https://... [truncated]
2025-08-29T14:26:21.140Z debug: Role 'USER': Preserving existing permissions for 'PROMPTS'
2025-08-29T14:26:21.140Z debug: Role 'USER': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T14:26:21.140Z debug: Role 'USER': Preserving existing permissions for 'MEMORIES'
2025-08-29T14:26:21.140Z debug: Role 'USER': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T14:26:21.141Z debug: Role 'USER': Preserving existing permissions for 'AGENTS'
2025-08-29T14:26:21.141Z debug: Role 'USER': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T14:26:21.141Z debug: Role 'USER': Preserving existing permissions for 'RUN_CODE'
2025-08-29T14:26:21.141Z debug: Role 'USER': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T14:26:21.141Z debug: Role 'USER': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T14:26:21.141Z debug: Role 'USER': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T14:26:21.141Z debug: Role 'USER': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T14:26:21.141Z debug: Role 'USER': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T14:26:21.143Z debug: Role 'ADMIN': Preserving existing permissions for 'PROMPTS'
2025-08-29T14:26:21.143Z debug: Role 'ADMIN': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T14:26:21.143Z debug: Role 'ADMIN': Preserving existing permissions for 'MEMORIES'
2025-08-29T14:26:21.143Z debug: Role 'ADMIN': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T14:26:21.144Z debug: Role 'ADMIN': Preserving existing permissions for 'AGENTS'
2025-08-29T14:26:21.144Z debug: Role 'ADMIN': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T14:26:21.144Z debug: Role 'ADMIN': Preserving existing permissions for 'RUN_CODE'
2025-08-29T14:26:21.144Z debug: Role 'ADMIN': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T14:26:21.144Z debug: Role 'ADMIN': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T14:26:21.144Z debug: Role 'ADMIN': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T14:26:21.144Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T14:26:21.144Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T14:26:21.154Z info: Server listening at http://localhost:3080
2025-08-29T14:26:21.188Z debug: [MCP][d1-database] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librech... [truncated]
2025-08-29T14:26:21.188Z debug: [MCP][prompt-instructions] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"... [truncated]
2025-08-29T14:26:21.315Z debug: [MEILI_SYNC:meili-index-sync] Creating initial flow state
2025-08-29T14:26:21.318Z error: [indexSync] error fetch failed
2025-08-29T14:26:22.267Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{"listChanged"... [truncated]
2025-08-29T14:26:22.267Z debug: [MCP][prompt-instructions] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T14:26:22.268Z debug: [MCP][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T14:26:22.390Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T14:26:22.391Z debug: [MCP][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T14:26:22.391Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T14:26:22.433Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T14:26:22.434Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T14:26:22.473Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T14:26:22.474Z info: [MCP][prompt-instructions] -------------------------------------------------‚îê
2025-08-29T14:26:22.474Z info: [MCP][prompt-instructions] URL: undefined
2025-08-29T14:26:22.475Z info: [MCP][prompt-instructions] OAuth Required: false
2025-08-29T14:26:22.475Z info: [MCP][prompt-instructions] Capabilities: {"tools":{"listChanged":false}}
2025-08-29T14:26:22.475Z info: [MCP][prompt-instructions] Tools: get_instruction, list_instructions, create_instruction, update_instruction, get_instructions_by_confidence, set_verb... [truncated]
2025-08-29T14:26:22.475Z info: [MCP][prompt-instructions] Server Instructions: Tool selection guidance:
- Use this server to manage workflow state and conversation flow.
  ‚Ä¢ travel_... [truncated]
2025-08-29T14:26:22.475Z info: [MCP][prompt-instructions] -------------------------------------------------‚îò
2025-08-29T14:26:22.508Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{}},"serverInfo":{"nam... [truncated]
2025-08-29T14:26:22.509Z debug: [MCP][d1-database] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T14:26:22.510Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T14:26:22.631Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T14:26:22.631Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T14:26:22.632Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T14:26:22.677Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:26:22.678Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T14:26:22.720Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:26:22.721Z info: [MCP][d1-database] -------------------------------------------------‚îê
2025-08-29T14:26:22.721Z info: [MCP][d1-database] URL: undefined
2025-08-29T14:26:22.721Z info: [MCP][d1-database] OAuth Required: false
2025-08-29T14:26:22.721Z info: [MCP][d1-database] Capabilities: {"tools":{}}
2025-08-29T14:26:22.721Z info: [MCP][d1-database] Tools: health_check, update_activitylog_clients, reset_activitylog_from_trips, explore_database, get_anything, remember_context, bu... [truncated]
2025-08-29T14:26:22.722Z info: [MCP][d1-database] Server Instructions: Tool selection guidance:
- Use this server for data lookups and persistence:
  ‚Ä¢ get_anything: broad search fo... [truncated]
2025-08-29T14:26:22.722Z info: [MCP][d1-database] -------------------------------------------------‚îò
2025-08-29T14:26:22.724Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T14:26:22.764Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T14:26:22.765Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T14:26:22.807Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:26:22.811Z debug: Merged 33 app-level tools
2025-08-29T14:26:22.812Z info: MCP servers initialized successfully. Added 33 MCP tools.
2025-08-29T14:26:22.813Z debug: Checking if agent permissions migration is needed
2025-08-29T14:26:22.818Z debug: Collection already exists: aclentries
2025-08-29T14:26:22.836Z debug: Agent migration check completed
{
  totalToMigrate: 0,
  globalEditAccess: 0,
  globalViewAccess: 0,
  privateAgents: 0,
}
2025-08-29T14:26:22.836Z debug: Checking if prompt permissions migration is needed
2025-08-29T14:26:22.838Z debug: Collection already exists: aclentries
2025-08-29T14:26:22.845Z debug: Prompt migration check completed
{
  totalToMigrate: 0,
  globalViewAccess: 0,
  privateGroups: 0,
}
2025-08-29T14:28:48.535Z info: Cleaning up FlowStateManager intervals...
2025-08-29T14:28:54.156Z info: Mongo Connection options
2025-08-29T14:28:54.158Z info: {
  "bufferCommands": false,
  "autoIndex": false,
  "autoCreate": false
}
2025-08-29T14:28:54.192Z info: Connected to MongoDB
2025-08-29T14:28:54.192Z info: [indexSync] Starting index synchronization check...
2025-08-29T14:28:54.248Z info: [getAppConfig] App configuration not initialized. Initializing AppService...
2025-08-29T14:28:54.256Z info: Custom config file loaded:
2025-08-29T14:28:54.256Z info: {
  "version": "1.0.0",
  "cache": true,
  "endpoints": {
    "custom": [
      {
        "name": "Claude Haiku (Cost Effective)",
        "apiKey": "... [truncated]
2025-08-29T14:28:54.257Z debug: Custom config:
{
  version: "1.0.0",
  cache: true,
    // 3 custom(s)
    endpoints.custom: [{"name":"Claude Haiku (Cost Effective)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthr... [truncated],{"name":"Claude Sonnet (Premium)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthropic.c... [truncated],{"name":"GPT-4 (Fallback)","apiKey":"${OPENAI_API_KEY}","baseURL":"https://api.openai.com/v1","model... [truncated]],
    0.name: "Claude Haiku (Cost Effective)",
    0.apiKey: "${ANTHROPIC_API_KEY}",
    0.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-haiku-20241022"],
    default.0: "claude-3-5-haiku-20241022",
    0.modelDisplayLabel: "üí∞ Haiku - Economical ($0.25/1M tokens)",
    0.titleConvo: true,
    0.titleModel: "claude-3-5-haiku-20241022",
    1.name: "Claude Sonnet (Premium)",
    1.apiKey: "${ANTHROPIC_API_KEY}",
    1.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-sonnet-20241022"],
    default.0: "claude-3-5-sonnet-20241022",
    1.modelDisplayLabel: "‚≠ê Sonnet - Premium Planning ($3.00/1M tokens)",
    1.titleConvo: true,
    1.titleModel: "claude-3-5-sonnet-20241022",
    2.name: "GPT-4 (Fallback)",
    2.apiKey: "${OPENAI_API_KEY}",
    2.baseURL: "https://api.openai.com/v1",
    // 1 default(s)
    models.default: ["gpt-4-turbo-preview"],
    default.0: "gpt-4-turbo-preview",
    2.modelDisplayLabel: "üîÑ GPT-4 - Fallback ($10.00/1M tokens)",
    2.titleConvo: true,
    d1-database.command: "npx",
    // 3 arg(s)
    d1-database.args: ["-y","mcp-remote","https://d1-database-improved.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://d1-database-improved.somotravel.workers.dev/sse",
    d1-database.timeout: 30000,
    d1-database.env: [object Object],
    d1-database.description: "Access to client and trip database with comprehensive travel data",
    d1-database.serverInstructions: "Tool selection guidance:\n- Use this server for data lookups and persistence:\n  ‚Ä¢ get_anything: broad... [truncated]",
    prompt-instructions.command: "npx",
    // 3 arg(s)
    prompt-instructions.args: ["-y","mcp-remote","https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse",
    prompt-instructions.timeout: 30000,
    prompt-instructions.env: [object Object],
    prompt-instructions.description: "Travel planning workflows, instructions, and structured processes",
    prompt-instructions.serverInstructions: "Tool selection guidance:\n- Use this server to manage workflow state and conversation flow.\n  ‚Ä¢ trave... [truncated]",
    privacyPolicy.externalUrl: "https://travelops.ai/privacy",
    termsOfService.externalUrl: "https://travelops.ai/terms",
}
2025-08-29T14:28:54.259Z debug: Web search serperApiKey: Using environment variable SERPER_API_KEY (not set in environment, user provided value)
2025-08-29T14:28:54.259Z debug: Web search searxngInstanceUrl: Using environment variable SEARXNG_INSTANCE_URL (not set in environment, user provided value)
2025-08-29T14:28:54.259Z debug: Web search searxngApiKey: Using environment variable SEARXNG_API_KEY (not set in environment, user provided value)
2025-08-29T14:28:54.259Z debug: Web search firecrawlApiKey: Using environment variable FIRECRAWL_API_KEY (not set in environment, user provided value)
2025-08-29T14:28:54.259Z debug: Web search firecrawlApiUrl: Using environment variable FIRECRAWL_API_URL (not set in environment, user provided value)
2025-08-29T14:28:54.259Z debug: Web search jinaApiKey: Using environment variable JINA_API_KEY (not set in environment, user provided value)
2025-08-29T14:28:54.259Z debug: Web search cohereApiKey: Using environment variable COHERE_API_KEY (not set in environment, user provided value)
2025-08-29T14:28:54.260Z warn: Default value for CREDS_KEY is being used.
2025-08-29T14:28:54.260Z warn: Default value for CREDS_IV is being used.
2025-08-29T14:28:54.260Z warn: Default value for JWT_SECRET is being used.
2025-08-29T14:28:54.260Z warn: Default value for JWT_REFRESH_SECRET is being used.
2025-08-29T14:28:54.260Z info: Please replace any default secret values.
2025-08-29T14:28:54.260Z info: ‚Äã

    For your convenience, use this tool to generate your own secret values:
    https://www.librechat.ai/toolkit/creds_generator

    ‚Äã
2025-08-29T14:28:54.261Z warn: RAG API is either not running or not reachable at undefined, you may experience errors with file uploads.
2025-08-29T14:28:54.269Z info: Turnstile is DISABLED (no siteKey provided).
2025-08-29T14:28:54.270Z info: Outdated Config version: 1.0.0
Latest version: 1.2.8

      Check out the Config changelogs for the latest options and features added.

      https://... [truncated]
2025-08-29T14:28:54.274Z debug: Role 'USER': Preserving existing permissions for 'PROMPTS'
2025-08-29T14:28:54.274Z debug: Role 'USER': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T14:28:54.274Z debug: Role 'USER': Preserving existing permissions for 'MEMORIES'
2025-08-29T14:28:54.274Z debug: Role 'USER': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T14:28:54.274Z debug: Role 'USER': Preserving existing permissions for 'AGENTS'
2025-08-29T14:28:54.274Z debug: Role 'USER': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T14:28:54.274Z debug: Role 'USER': Preserving existing permissions for 'RUN_CODE'
2025-08-29T14:28:54.275Z debug: Role 'USER': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T14:28:54.275Z debug: Role 'USER': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T14:28:54.275Z debug: Role 'USER': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T14:28:54.275Z debug: Role 'USER': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T14:28:54.275Z debug: Role 'USER': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T14:28:54.278Z debug: Role 'ADMIN': Preserving existing permissions for 'PROMPTS'
2025-08-29T14:28:54.278Z debug: Role 'ADMIN': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T14:28:54.278Z debug: Role 'ADMIN': Preserving existing permissions for 'MEMORIES'
2025-08-29T14:28:54.278Z debug: Role 'ADMIN': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T14:28:54.278Z debug: Role 'ADMIN': Preserving existing permissions for 'AGENTS'
2025-08-29T14:28:54.278Z debug: Role 'ADMIN': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T14:28:54.278Z debug: Role 'ADMIN': Preserving existing permissions for 'RUN_CODE'
2025-08-29T14:28:54.278Z debug: Role 'ADMIN': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T14:28:54.278Z debug: Role 'ADMIN': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T14:28:54.278Z debug: Role 'ADMIN': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T14:28:54.278Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T14:28:54.278Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T14:28:54.289Z info: Server listening at http://localhost:3080
2025-08-29T14:28:54.325Z debug: [MCP][d1-database] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librech... [truncated]
2025-08-29T14:28:54.325Z debug: [MCP][prompt-instructions] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"... [truncated]
2025-08-29T14:28:54.445Z debug: [MEILI_SYNC:meili-index-sync] Creating initial flow state
2025-08-29T14:28:54.448Z error: [indexSync] error fetch failed
2025-08-29T14:28:55.036Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{"listChanged"... [truncated]
2025-08-29T14:28:55.037Z debug: [MCP][prompt-instructions] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T14:28:55.037Z debug: [MCP][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T14:28:55.048Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{}},"serverInfo":{"nam... [truncated]
2025-08-29T14:28:55.049Z debug: [MCP][d1-database] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T14:28:55.050Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T14:28:55.152Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T14:28:55.153Z debug: [MCP][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T14:28:55.153Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T14:28:55.181Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T14:28:55.181Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T14:28:55.181Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T14:28:55.190Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T14:28:55.191Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T14:28:55.228Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:28:55.229Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T14:28:55.230Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T14:28:55.230Z info: [MCP][prompt-instructions] -------------------------------------------------‚îê
2025-08-29T14:28:55.231Z info: [MCP][prompt-instructions] URL: undefined
2025-08-29T14:28:55.231Z info: [MCP][prompt-instructions] OAuth Required: false
2025-08-29T14:28:55.231Z info: [MCP][prompt-instructions] Capabilities: {"tools":{"listChanged":false}}
2025-08-29T14:28:55.231Z info: [MCP][prompt-instructions] Tools: get_instruction, list_instructions, create_instruction, update_instruction, get_instructions_by_confidence, set_verb... [truncated]
2025-08-29T14:28:55.231Z info: [MCP][prompt-instructions] Server Instructions: Tool selection guidance:
- Use this server to manage workflow state and conversation flow.
  ‚Ä¢ travel_... [truncated]
2025-08-29T14:28:55.231Z info: [MCP][prompt-instructions] -------------------------------------------------‚îò
2025-08-29T14:28:55.269Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:28:55.270Z info: [MCP][d1-database] -------------------------------------------------‚îê
2025-08-29T14:28:55.270Z info: [MCP][d1-database] URL: undefined
2025-08-29T14:28:55.270Z info: [MCP][d1-database] OAuth Required: false
2025-08-29T14:28:55.270Z info: [MCP][d1-database] Capabilities: {"tools":{}}
2025-08-29T14:28:55.271Z info: [MCP][d1-database] Tools: health_check, update_activitylog_clients, reset_activitylog_from_trips, explore_database, get_anything, remember_context, bu... [truncated]
2025-08-29T14:28:55.271Z info: [MCP][d1-database] Server Instructions: Tool selection guidance:
- Use this server for data lookups and persistence:
  ‚Ä¢ get_anything: broad search fo... [truncated]
2025-08-29T14:28:55.271Z info: [MCP][d1-database] -------------------------------------------------‚îò
2025-08-29T14:28:55.273Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T14:28:55.310Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T14:28:55.311Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T14:28:55.351Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:28:55.354Z debug: Merged 33 app-level tools
2025-08-29T14:28:55.355Z info: MCP servers initialized successfully. Added 33 MCP tools.
2025-08-29T14:28:55.355Z debug: Checking if agent permissions migration is needed
2025-08-29T14:28:55.357Z debug: Collection already exists: aclentries
2025-08-29T14:28:55.373Z debug: Agent migration check completed
{
  totalToMigrate: 0,
  globalEditAccess: 0,
  globalViewAccess: 0,
  privateAgents: 0,
}
2025-08-29T14:28:55.373Z debug: Checking if prompt permissions migration is needed
2025-08-29T14:28:55.375Z debug: Collection already exists: aclentries
2025-08-29T14:28:55.383Z debug: Prompt migration check completed
{
  totalToMigrate: 0,
  globalViewAccess: 0,
  privateGroups: 0,
}
2025-08-29T14:31:20.753Z debug: Merged 33 user-level tools
2025-08-29T14:31:21.318Z debug: [MCP][d1-database] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librech... [truncated]
2025-08-29T14:31:21.318Z debug: [MCP][prompt-instructions] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"... [truncated]
2025-08-29T14:31:22.273Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{}},"serverInfo":{"nam... [truncated]
2025-08-29T14:31:22.273Z debug: [MCP][d1-database] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T14:31:22.273Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T14:31:22.563Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T14:31:22.564Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T14:31:22.564Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T14:31:22.618Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:31:22.665Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{"listChanged"... [truncated]
2025-08-29T14:31:22.665Z debug: [MCP][prompt-instructions] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T14:31:22.665Z debug: [MCP][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T14:31:22.786Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T14:31:22.786Z debug: [MCP][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T14:31:22.786Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T14:31:22.824Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T14:31:35.544Z debug: [AgentController] Request aborted on close
2025-08-29T14:31:35.545Z debug: [BaseClient] Loading history:
{
  conversationId: "99b94427-c178-4ebc-b1c0-6c2d8e858224",
  parentMessageId: "794cd710-88d6-429e-b6e0-2154ad280b64",
}
2025-08-29T14:31:35.763Z debug: [AgentClient] Injected MCP instructions for servers:
["\"d1-database\"","\"prompt-instructions\""]
2025-08-29T14:31:35.764Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 179675,
  maxContextTokens: 180000,
}
2025-08-29T14:31:35.764Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 179675,
  maxContextTokens: 180000,
}
2025-08-29T14:31:35.764Z debug: [BaseClient] tokenCountMap:
{
  b5f8cf70-93e7-455c-a488-c5702ce0b28e: 7,
  794cd710-88d6-429e-b6e0-2154ad280b64: 304,
  4fc03470-b6d9-42d2-949c-8cf35040d8f5: 11,
}
2025-08-29T14:31:35.765Z debug: [BaseClient]
{
  promptTokens: 325,
  remainingContextTokens: 179675,
  payloadSize: 3,
  maxContextTokens: 180000,
}
2025-08-29T14:31:35.765Z debug: [BaseClient] tokenCountMap
{
  b5f8cf70-93e7-455c-a488-c5702ce0b28e: 7,
  794cd710-88d6-429e-b6e0-2154ad280b64: 304,
  4fc03470-b6d9-42d2-949c-8cf35040d8f5: 11,
}
2025-08-29T14:31:35.765Z debug: [BaseClient] userMessage
{
  messageId: "4fc03470-b6d9-42d2-949c-8cf35040d8f5",
  parentMessageId: "794cd710-88d6-429e-b6e0-2154ad280b64",
  conversationId: "99b94427-c178-4ebc-b1c0-6c2d8e858224",
  sender: "User",
  text: "find Sara and Darren Jones trip.",
  isCreatedByUser: true,
  tokenCount: 11,
}
2025-08-29T14:31:36.111Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T14:31:39.572Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_anything","arguments":{"query":"Sara and Darren Jones trip","includ... [truncated]
2025-08-29T14:31:40.150Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":3,"result":{"content":[{"type":"text","text":"{\n  \"response\": \"Sara & Darren Jones 25... [truncated]
2025-08-29T14:31:40.150Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T14:31:40.150Z
2025-08-29T14:31:42.814Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"continue_trip","arguments":{"search_query":"Sara and Darren Jones 25th ... [truncated]
2025-08-29T14:31:42.946Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":4,"result":{"content":[{"type":"text","text":"{\n  \"success\": false,\n  \"error\": \"D1... [truncated]
2025-08-29T14:31:42.947Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T14:31:42.946Z
2025-08-29T14:31:45.587Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"continue_trip","arguments":{"search_query":"Sara Darren Jones Anniversa... [truncated]
2025-08-29T14:31:45.710Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":5,"result":{"content":[{"type":"text","text":"{\n  \"success\": false,\n  \"no_trips_foun... [truncated]
2025-08-29T14:31:45.710Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T14:31:45.710Z
2025-08-29T14:31:49.913Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_anything","arguments":{"query":"Sara & Darren Jones 25th Anniversar... [truncated]
2025-08-29T14:31:50.304Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":6,"result":{"content":[{"type":"text","text":"{\n  \"response\": \"Sara & Darren Jones 25... [truncated]
2025-08-29T14:31:50.304Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T14:31:50.304Z
2025-08-29T14:31:53.876Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_workflow_status","arguments":{"trip_identifier":"Sara & Darren Jone... [truncated]
2025-08-29T14:31:53.995Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":7,"result":{"content":[{"type":"text","text":"{\n  \"success\": true,\n  \"trip_id\": 26,... [truncated]
2025-08-29T14:31:53.995Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T14:31:53.995Z
2025-08-29T14:31:58.674Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T14:31:58.683Z debug: [AgentController] Request closed
2025-08-29T14:31:58.687Z debug: [AgentController] Performing cleanup
2025-08-29T14:31:58.688Z debug: [AgentController] Cleaning up abort controller
2025-08-29T14:31:58.688Z debug: [AgentController] Cleanup completed
2025-08-29T14:32:50.953Z debug: [AgentController] Request aborted on close
2025-08-29T14:32:50.953Z debug: [BaseClient] Loading history:
{
  conversationId: "99b94427-c178-4ebc-b1c0-6c2d8e858224",
  parentMessageId: "8ed0ce6e-8efb-4aef-8a1e-a33dab9036c4",
}
2025-08-29T14:32:50.957Z debug: [AgentClient] Injected MCP instructions for servers:
["\"d1-database\"","\"prompt-instructions\""]
2025-08-29T14:32:50.957Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 178347,
  maxContextTokens: 180000,
}
2025-08-29T14:32:50.957Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 178347,
  maxContextTokens: 180000,
}
2025-08-29T14:32:50.957Z debug: [BaseClient] tokenCountMap:
{
  b5f8cf70-93e7-455c-a488-c5702ce0b28e: 7,
  794cd710-88d6-429e-b6e0-2154ad280b64: 304,
  4fc03470-b6d9-42d2-949c-8cf35040d8f5: 11,
  8ed0ce6e-8efb-4aef-8a1e-a33dab9036c4: 1321,
  7ae0d3f5-6dcb-444e-896f-54c198967b3a: 7,
}
2025-08-29T14:32:50.958Z debug: [BaseClient]
{
  promptTokens: 1653,
  remainingContextTokens: 178347,
  payloadSize: 5,
  maxContextTokens: 180000,
}
2025-08-29T14:32:50.958Z debug: [BaseClient] tokenCountMap
{
  b5f8cf70-93e7-455c-a488-c5702ce0b28e: 7,
  794cd710-88d6-429e-b6e0-2154ad280b64: 304,
  4fc03470-b6d9-42d2-949c-8cf35040d8f5: 11,
  8ed0ce6e-8efb-4aef-8a1e-a33dab9036c4: 1321,
  7ae0d3f5-6dcb-444e-896f-54c198967b3a: 7,
}
2025-08-29T14:32:50.958Z debug: [BaseClient] userMessage
{
  messageId: "7ae0d3f5-6dcb-444e-896f-54c198967b3a",
  parentMessageId: "8ed0ce6e-8efb-4aef-8a1e-a33dab9036c4",
  conversationId: "99b94427-c178-4ebc-b1c0-6c2d8e858224",
  sender: "User",
  text: "show full details",
  isCreatedByUser: true,
  tokenCount: 7,
}
2025-08-29T14:32:51.321Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T14:32:54.051Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":8}
2025-08-29T14:32:54.168Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":8,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T14:32:54.169Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T14:32:54.169Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":9}
2025-08-29T14:32:54.212Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":9,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:32:54.214Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_anything","arguments":{"query":"Sara & Darren Jones 25th Anniversar... [truncated]
2025-08-29T14:32:54.455Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":10,"result":{"content":[{"type":"text","text":"{\n  \"response\": \"Sara & Darren Jones 2... [truncated]
2025-08-29T14:32:54.456Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T14:32:54.456Z
2025-08-29T14:32:57.342Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_workflow_instructions","arguments":{"trip_identifier":"Sara & Darre... [truncated]
2025-08-29T14:32:57.438Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":11,"result":{"content":[{"type":"text","text":"{\n  \"success\": false,\n  \"error\": \"D... [truncated]
2025-08-29T14:32:57.439Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T14:32:57.439Z
2025-08-29T14:33:00.077Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_workflow_status","arguments":{"trip_identifier":"Sara & Darren Jone... [truncated]
2025-08-29T14:33:00.219Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":12,"result":{"content":[{"type":"text","text":"{\n  \"success\": true,\n  \"trip_id\": 26... [truncated]
2025-08-29T14:33:00.220Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T14:33:00.219Z
2025-08-29T14:33:02.961Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_anything","arguments":{"query":"Client details for Sara and Darren ... [truncated]
2025-08-29T14:33:03.474Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":13,"result":{"content":[{"type":"text","text":"{\n  \"response\": \"Found 1 results for \... [truncated]
2025-08-29T14:33:03.474Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T14:33:03.474Z
2025-08-29T14:33:11.903Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T14:33:11.911Z debug: [AgentController] Request closed
2025-08-29T14:33:11.915Z debug: [AgentController] Performing cleanup
2025-08-29T14:33:11.915Z debug: [AgentController] Cleaning up abort controller
2025-08-29T14:33:11.916Z debug: [AgentController] Cleanup completed
2025-08-29T14:33:48.953Z debug: [AgentController] Request aborted on close
2025-08-29T14:33:48.953Z debug: [BaseClient] Loading history:
{
  conversationId: "99b94427-c178-4ebc-b1c0-6c2d8e858224",
  parentMessageId: "1264ce31-ec92-45e7-8f91-f04ad6a404f6",
}
2025-08-29T14:33:48.957Z debug: [AgentClient] Injected MCP instructions for servers:
["\"d1-database\"","\"prompt-instructions\""]
2025-08-29T14:33:48.957Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 177093,
  maxContextTokens: 180000,
}
2025-08-29T14:33:48.957Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 177093,
  maxContextTokens: 180000,
}
2025-08-29T14:33:48.958Z debug: [BaseClient] tokenCountMap:
{
  b5f8cf70-93e7-455c-a488-c5702ce0b28e: 7,
  794cd710-88d6-429e-b6e0-2154ad280b64: 304,
  4fc03470-b6d9-42d2-949c-8cf35040d8f5: 11,
  8ed0ce6e-8efb-4aef-8a1e-a33dab9036c4: 1321,
  7ae0d3f5-6dcb-444e-896f-54c198967b3a: 7,
  1264ce31-ec92-45e7-8f91-f04ad6a404f6: 1242,
  bf5b3c5d-4a93-4c48-91b2-8eac878d3a9a: 12,
}
2025-08-29T14:33:48.958Z debug: [BaseClient]
{
  promptTokens: 2907,
  remainingContextTokens: 177093,
  payloadSize: 7,
  maxContextTokens: 180000,
}
2025-08-29T14:33:48.958Z debug: [BaseClient] tokenCountMap
{
  b5f8cf70-93e7-455c-a488-c5702ce0b28e: 7,
  794cd710-88d6-429e-b6e0-2154ad280b64: 304,
  4fc03470-b6d9-42d2-949c-8cf35040d8f5: 11,
  8ed0ce6e-8efb-4aef-8a1e-a33dab9036c4: 1321,
  7ae0d3f5-6dcb-444e-896f-54c198967b3a: 7,
  1264ce31-ec92-45e7-8f91-f04ad6a404f6: 1242,
  bf5b3c5d-4a93-4c48-91b2-8eac878d3a9a: 12,
}
2025-08-29T14:33:48.958Z debug: [BaseClient] userMessage
{
  messageId: "bf5b3c5d-4a93-4c48-91b2-8eac878d3a9a",
  parentMessageId: "1264ce31-ec92-45e7-8f91-f04ad6a404f6",
  conversationId: "99b94427-c178-4ebc-b1c0-6c2d8e858224",
  sender: "User",
  text: "/debug detailed report of errors encountered retrieving details",
  isCreatedByUser: true,
  tokenCount: 12,
}
2025-08-29T14:33:49.159Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T14:33:52.755Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"analyze_recent_errors","arguments":{"hours":24,"limit":10}},"jsonrpc":"... [truncated]
2025-08-29T14:33:52.953Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":14,"result":{"content":[{"type":"text","text":"{\n  \"success\": true,\n  \"total_errors\... [truncated]
2025-08-29T14:33:52.953Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T14:33:52.953Z
2025-08-29T14:33:56.937Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":15}
2025-08-29T14:33:56.974Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":15,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T14:33:56.974Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T14:33:56.975Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":16}
2025-08-29T14:33:57.013Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":16,"result":{"tools":[{"name":"health_check","description":"Check database health and sta... [truncated]
2025-08-29T14:33:57.014Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"resolve_error_pattern","arguments":{"error_pattern":"D1_ERROR: LIKE or ... [truncated]
2025-08-29T14:33:57.163Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":17,"result":{"content":[{"type":"text","text":"{\n  \"success\": false,\n  \"error\": \"D... [truncated]
2025-08-29T14:33:57.163Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T14:33:57.163Z
2025-08-29T14:33:59.598Z debug: [FinalizationRegistry] Cleaning up client for user 68b1ababa6d361e541dc7c03
2025-08-29T14:33:59.598Z debug: [FinalizationRegistry] Cleaning up client for user 68b1ababa6d361e541dc7c03
2025-08-29T14:34:07.409Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_anything","arguments":{"query":"trip_id 26","include_everything":tr... [truncated]
2025-08-29T14:34:07.594Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":18,"result":{"content":[{"type":"text","text":"{\n  \"response\": \"TRIP ID 26: Sara & Da... [truncated]
2025-08-29T14:34:07.594Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T14:34:07.594Z
2025-08-29T14:34:18.408Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T14:34:18.416Z debug: [AgentController] Request closed
2025-08-29T14:34:18.420Z debug: [AgentController] Performing cleanup
2025-08-29T14:34:18.420Z debug: [AgentController] Cleaning up abort controller
2025-08-29T14:34:18.420Z debug: [AgentController] Cleanup completed
2025-08-29T14:37:58.191Z info: Mongo Connection options
2025-08-29T14:37:58.193Z info: {
  "bufferCommands": false,
  "autoIndex": false,
  "autoCreate": false
}
2025-08-29T14:37:58.231Z info: Connected to MongoDB
2025-08-29T14:37:58.231Z info: [indexSync] Starting index synchronization check...
2025-08-29T14:37:58.289Z info: [getAppConfig] App configuration not initialized. Initializing AppService...
2025-08-29T14:37:58.298Z info: Custom config file loaded:
2025-08-29T14:37:58.298Z info: {
  "version": "1.0.0",
  "cache": true,
  "endpoints": {
    "custom": [
      {
        "name": "Claude Haiku (Cost Effective)",
        "apiKey": "... [truncated]
2025-08-29T14:37:58.299Z debug: Custom config:
{
  version: "1.0.0",
  cache: true,
    // 3 custom(s)
    endpoints.custom: [{"name":"Claude Haiku (Cost Effective)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthr... [truncated],{"name":"Claude Sonnet (Premium)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthropic.c... [truncated],{"name":"GPT-4 (Fallback)","apiKey":"${OPENAI_API_KEY}","baseURL":"https://api.openai.com/v1","model... [truncated]],
    0.name: "Claude Haiku (Cost Effective)",
    0.apiKey: "${ANTHROPIC_API_KEY}",
    0.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-haiku-20241022"],
    default.0: "claude-3-5-haiku-20241022",
    0.modelDisplayLabel: "üí∞ Haiku - Economical ($0.25/1M tokens)",
    0.titleConvo: true,
    0.titleModel: "claude-3-5-haiku-20241022",
    1.name: "Claude Sonnet (Premium)",
    1.apiKey: "${ANTHROPIC_API_KEY}",
    1.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-sonnet-20241022"],
    default.0: "claude-3-5-sonnet-20241022",
    1.modelDisplayLabel: "‚≠ê Sonnet - Premium Planning ($3.00/1M tokens)",
    1.titleConvo: true,
    1.titleModel: "claude-3-5-sonnet-20241022",
    2.name: "GPT-4 (Fallback)",
    2.apiKey: "${OPENAI_API_KEY}",
    2.baseURL: "https://api.openai.com/v1",
    // 1 default(s)
    models.default: ["gpt-4-turbo-preview"],
    default.0: "gpt-4-turbo-preview",
    2.modelDisplayLabel: "üîÑ GPT-4 - Fallback ($10.00/1M tokens)",
    2.titleConvo: true,
    d1-database.command: "npx",
    // 3 arg(s)
    d1-database.args: ["-y","mcp-remote","https://d1-database-improved.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://d1-database-improved.somotravel.workers.dev/sse",
    d1-database.timeout: 30000,
    d1-database.env: [object Object],
    d1-database.description: "Access to client and trip database with comprehensive travel data",
    d1-database.serverInstructions: "Tool selection guidance:\n- Use this server for data lookups and persistence:\n  ‚Ä¢ get_anything: broad... [truncated]",
    prompt-instructions.command: "npx",
    // 3 arg(s)
    prompt-instructions.args: ["-y","mcp-remote","https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse",
    prompt-instructions.timeout: 30000,
    prompt-instructions.env: [object Object],
    prompt-instructions.description: "Travel planning workflows, instructions, and structured processes",
    prompt-instructions.serverInstructions: "Tool selection guidance:\n- Use this server to manage workflow state and conversation flow.\n  ‚Ä¢ trave... [truncated]",
    privacyPolicy.externalUrl: "https://travelops.ai/privacy",
    termsOfService.externalUrl: "https://travelops.ai/terms",
}
2025-08-29T14:37:58.301Z debug: Web search serperApiKey: Using environment variable SERPER_API_KEY (not set in environment, user provided value)
2025-08-29T14:37:58.301Z debug: Web search searxngInstanceUrl: Using environment variable SEARXNG_INSTANCE_URL (not set in environment, user provided value)
2025-08-29T14:37:58.301Z debug: Web search searxngApiKey: Using environment variable SEARXNG_API_KEY (not set in environment, user provided value)
2025-08-29T14:37:58.301Z debug: Web search firecrawlApiKey: Using environment variable FIRECRAWL_API_KEY (not set in environment, user provided value)
2025-08-29T14:37:58.301Z debug: Web search firecrawlApiUrl: Using environment variable FIRECRAWL_API_URL (not set in environment, user provided value)
2025-08-29T14:37:58.301Z debug: Web search jinaApiKey: Using environment variable JINA_API_KEY (not set in environment, user provided value)
2025-08-29T14:37:58.301Z debug: Web search cohereApiKey: Using environment variable COHERE_API_KEY (not set in environment, user provided value)
2025-08-29T14:37:58.301Z warn: Default value for CREDS_KEY is being used.
2025-08-29T14:37:58.301Z warn: Default value for CREDS_IV is being used.
2025-08-29T14:37:58.302Z warn: Default value for JWT_SECRET is being used.
2025-08-29T14:37:58.302Z warn: Default value for JWT_REFRESH_SECRET is being used.
2025-08-29T14:37:58.302Z info: Please replace any default secret values.
2025-08-29T14:37:58.302Z info: ‚Äã

    For your convenience, use this tool to generate your own secret values:
    https://www.librechat.ai/toolkit/creds_generator

    ‚Äã
2025-08-29T14:37:58.302Z warn: RAG API is either not running or not reachable at undefined, you may experience errors with file uploads.
2025-08-29T14:37:58.312Z info: Turnstile is DISABLED (no siteKey provided).
2025-08-29T14:37:58.313Z info: Outdated Config version: 1.0.0
Latest version: 1.2.8

      Check out the Config changelogs for the latest options and features added.

      https://... [truncated]
2025-08-29T14:37:58.319Z debug: Role 'USER': Preserving existing permissions for 'PROMPTS'
2025-08-29T14:37:58.319Z debug: Role 'USER': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T14:37:58.319Z debug: Role 'USER': Preserving existing permissions for 'MEMORIES'
2025-08-29T14:37:58.319Z debug: Role 'USER': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T14:37:58.319Z debug: Role 'USER': Preserving existing permissions for 'AGENTS'
2025-08-29T14:37:58.319Z debug: Role 'USER': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T14:37:58.319Z debug: Role 'USER': Preserving existing permissions for 'RUN_CODE'
2025-08-29T14:37:58.319Z debug: Role 'USER': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T14:37:58.319Z debug: Role 'USER': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T14:37:58.320Z debug: Role 'USER': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T14:37:58.320Z debug: Role 'USER': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T14:37:58.320Z debug: Role 'USER': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T14:37:58.322Z debug: Role 'ADMIN': Preserving existing permissions for 'PROMPTS'
2025-08-29T14:37:58.322Z debug: Role 'ADMIN': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T14:37:58.322Z debug: Role 'ADMIN': Preserving existing permissions for 'MEMORIES'
2025-08-29T14:37:58.322Z debug: Role 'ADMIN': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T14:37:58.322Z debug: Role 'ADMIN': Preserving existing permissions for 'AGENTS'
2025-08-29T14:37:58.322Z debug: Role 'ADMIN': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T14:37:58.322Z debug: Role 'ADMIN': Preserving existing permissions for 'RUN_CODE'
2025-08-29T14:37:58.322Z debug: Role 'ADMIN': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T14:37:58.322Z debug: Role 'ADMIN': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T14:37:58.323Z debug: Role 'ADMIN': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T14:37:58.323Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T14:37:58.323Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T14:37:58.335Z info: Server listening at http://localhost:3080
2025-08-29T14:37:58.373Z debug: [MCP][d1-database] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librech... [truncated]
2025-08-29T14:37:58.373Z debug: [MCP][prompt-instructions] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"... [truncated]
2025-08-29T14:37:58.484Z debug: [MEILI_SYNC:meili-index-sync] Creating initial flow state
2025-08-29T14:37:58.487Z error: [indexSync] error fetch failed
2025-08-29T14:37:59.183Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{}},"serverInfo":{"nam... [truncated]
2025-08-29T14:37:59.183Z debug: [MCP][d1-database] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T14:37:59.184Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T14:37:59.219Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{"listChanged"... [truncated]
2025-08-29T14:37:59.220Z debug: [MCP][prompt-instructions] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T14:37:59.220Z debug: [MCP][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T14:37:59.306Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T14:37:59.307Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T14:37:59.307Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T14:37:59.350Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T14:37:59.350Z debug: [MCP][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T14:37:59.351Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T14:37:59.352Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:37:59.353Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T14:37:59.393Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T14:37:59.394Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T14:37:59.397Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:37:59.398Z info: [MCP][d1-database] -------------------------------------------------‚îê
2025-08-29T14:37:59.398Z info: [MCP][d1-database] URL: undefined
2025-08-29T14:37:59.399Z info: [MCP][d1-database] OAuth Required: false
2025-08-29T14:37:59.399Z info: [MCP][d1-database] Capabilities: {"tools":{}}
2025-08-29T14:37:59.399Z info: [MCP][d1-database] Tools: health_check, update_activitylog_clients, reset_activitylog_from_trips, explore_database, get_anything, remember_context, bu... [truncated]
2025-08-29T14:37:59.399Z info: [MCP][d1-database] Server Instructions: Tool selection guidance:
- Use this server for data lookups and persistence:
  ‚Ä¢ get_anything: broad search fo... [truncated]
2025-08-29T14:37:59.399Z info: [MCP][d1-database] -------------------------------------------------‚îò
2025-08-29T14:37:59.435Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T14:37:59.436Z info: [MCP][prompt-instructions] -------------------------------------------------‚îê
2025-08-29T14:37:59.436Z info: [MCP][prompt-instructions] URL: undefined
2025-08-29T14:37:59.436Z info: [MCP][prompt-instructions] OAuth Required: false
2025-08-29T14:37:59.437Z info: [MCP][prompt-instructions] Capabilities: {"tools":{"listChanged":false}}
2025-08-29T14:37:59.437Z info: [MCP][prompt-instructions] Tools: get_instruction, list_instructions, create_instruction, update_instruction, get_instructions_by_confidence, set_verb... [truncated]
2025-08-29T14:37:59.437Z info: [MCP][prompt-instructions] Server Instructions: Tool selection guidance:
- Use this server to manage workflow state and conversation flow.
  ‚Ä¢ travel_... [truncated]
2025-08-29T14:37:59.437Z info: [MCP][prompt-instructions] -------------------------------------------------‚îò
2025-08-29T14:37:59.439Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T14:37:59.482Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:37:59.483Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T14:37:59.533Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T14:37:59.537Z debug: Merged 33 app-level tools
2025-08-29T14:37:59.537Z info: MCP servers initialized successfully. Added 33 MCP tools.
2025-08-29T14:37:59.538Z debug: Checking if agent permissions migration is needed
2025-08-29T14:37:59.543Z debug: Collection already exists: aclentries
2025-08-29T14:37:59.564Z debug: Agent migration check completed
{
  totalToMigrate: 0,
  globalEditAccess: 0,
  globalViewAccess: 0,
  privateAgents: 0,
}
2025-08-29T14:37:59.565Z debug: Checking if prompt permissions migration is needed
2025-08-29T14:37:59.567Z debug: Collection already exists: aclentries
2025-08-29T14:37:59.579Z debug: Prompt migration check completed
{
  totalToMigrate: 0,
  globalViewAccess: 0,
  privateGroups: 0,
}
2025-08-29T14:42:47.748Z info: Mongo Connection options
2025-08-29T14:42:47.750Z info: {
  "bufferCommands": false,
  "autoIndex": false,
  "autoCreate": false
}
2025-08-29T14:42:47.788Z info: Connected to MongoDB
2025-08-29T14:42:47.789Z info: [indexSync] Starting index synchronization check...
2025-08-29T14:42:47.856Z info: [getAppConfig] App configuration not initialized. Initializing AppService...
2025-08-29T14:42:47.866Z info: Custom config file loaded:
2025-08-29T14:42:47.867Z info: {
  "version": "1.0.0",
  "cache": true,
  "endpoints": {
    "custom": [
      {
        "name": "Claude Haiku (Cost Effective)",
        "apiKey": "... [truncated]
2025-08-29T14:42:47.867Z debug: Custom config:
{
  version: "1.0.0",
  cache: true,
    // 3 custom(s)
    endpoints.custom: [{"name":"Claude Haiku (Cost Effective)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthr... [truncated],{"name":"Claude Sonnet (Premium)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthropic.c... [truncated],{"name":"GPT-4 (Fallback)","apiKey":"${OPENAI_API_KEY}","baseURL":"https://api.openai.com/v1","model... [truncated]],
    0.name: "Claude Haiku (Cost Effective)",
    0.apiKey: "${ANTHROPIC_API_KEY}",
    0.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-haiku-20241022"],
    default.0: "claude-3-5-haiku-20241022",
    0.modelDisplayLabel: "üí∞ Haiku - Economical ($0.25/1M tokens)",
    0.titleConvo: true,
    0.titleModel: "claude-3-5-haiku-20241022",
    1.name: "Claude Sonnet (Premium)",
    1.apiKey: "${ANTHROPIC_API_KEY}",
    1.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-sonnet-20241022"],
    default.0: "claude-3-5-sonnet-20241022",
    1.modelDisplayLabel: "‚≠ê Sonnet - Premium Planning ($3.00/1M tokens)",
    1.titleConvo: true,
    1.titleModel: "claude-3-5-sonnet-20241022",
    2.name: "GPT-4 (Fallback)",
    2.apiKey: "${OPENAI_API_KEY}",
    2.baseURL: "https://api.openai.com/v1",
    // 1 default(s)
    models.default: ["gpt-4-turbo-preview"],
    default.0: "gpt-4-turbo-preview",
    2.modelDisplayLabel: "üîÑ GPT-4 - Fallback ($10.00/1M tokens)",
    2.titleConvo: true,
    d1-database.command: "npx",
    // 3 arg(s)
    d1-database.args: ["-y","mcp-remote","https://d1-database-improved.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://d1-database-improved.somotravel.workers.dev/sse",
    d1-database.timeout: 30000,
    d1-database.env: [object Object],
    d1-database.description: "Access to client and trip database with comprehensive travel data",
    d1-database.serverInstructions: "Tool selection guidance:\n- Use this server for data lookups and persistence:\n  ‚Ä¢ get_anything: broad... [truncated]",
    prompt-instructions.command: "npx",
    // 3 arg(s)
    prompt-instructions.args: ["-y","mcp-remote","https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse",
    prompt-instructions.timeout: 30000,
    prompt-instructions.env: [object Object],
    prompt-instructions.description: "Travel planning workflows, instructions, and structured processes",
    prompt-instructions.serverInstructions: "Tool selection guidance:\n- Use this server to manage workflow state and conversation flow.\n  ‚Ä¢ trave... [truncated]",
    privacyPolicy.externalUrl: "https://travelops.ai/privacy",
    termsOfService.externalUrl: "https://travelops.ai/terms",
}
2025-08-29T14:42:47.870Z debug: Web search serperApiKey: Using environment variable SERPER_API_KEY (not set in environment, user provided value)
2025-08-29T14:42:47.870Z debug: Web search searxngInstanceUrl: Using environment variable SEARXNG_INSTANCE_URL (not set in environment, user provided value)
2025-08-29T14:42:47.870Z debug: Web search searxngApiKey: Using environment variable SEARXNG_API_KEY (not set in environment, user provided value)
2025-08-29T14:42:47.870Z debug: Web search firecrawlApiKey: Using environment variable FIRECRAWL_API_KEY (not set in environment, user provided value)
2025-08-29T14:42:47.870Z debug: Web search firecrawlApiUrl: Using environment variable FIRECRAWL_API_URL (not set in environment, user provided value)
2025-08-29T14:42:47.870Z debug: Web search jinaApiKey: Using environment variable JINA_API_KEY (not set in environment, user provided value)
2025-08-29T14:42:47.870Z debug: Web search cohereApiKey: Using environment variable COHERE_API_KEY (not set in environment, user provided value)
2025-08-29T14:42:47.871Z warn: Default value for CREDS_KEY is being used.
2025-08-29T14:42:47.871Z warn: Default value for CREDS_IV is being used.
2025-08-29T14:42:47.871Z warn: Default value for JWT_SECRET is being used.
2025-08-29T14:42:47.871Z warn: Default value for JWT_REFRESH_SECRET is being used.
2025-08-29T14:42:47.871Z info: Please replace any default secret values.
2025-08-29T14:42:47.871Z info: ‚Äã

    For your convenience, use this tool to generate your own secret values:
    https://www.librechat.ai/toolkit/creds_generator

    ‚Äã
2025-08-29T14:42:47.872Z warn: RAG API is either not running or not reachable at undefined, you may experience errors with file uploads.
2025-08-29T14:42:47.885Z info: Turnstile is DISABLED (no siteKey provided).
2025-08-29T14:42:47.886Z info: Outdated Config version: 1.0.0
Latest version: 1.2.8

      Check out the Config changelogs for the latest options and features added.

      https://... [truncated]
2025-08-29T14:42:53.529Z info: Mongo Connection options
2025-08-29T14:42:53.531Z info: {
  "bufferCommands": false,
  "autoIndex": false,
  "autoCreate": false
}
2025-08-29T14:42:53.567Z info: Connected to MongoDB
2025-08-29T14:42:53.568Z info: [indexSync] Starting index synchronization check...
2025-08-29T14:42:53.628Z info: [getAppConfig] App configuration not initialized. Initializing AppService...
2025-08-29T14:42:53.636Z info: Custom config file loaded:
2025-08-29T14:42:53.636Z info: {
  "version": "1.0.0",
  "cache": true,
  "endpoints": {
    "custom": [
      {
        "name": "Claude Haiku (Cost Effective)",
        "apiKey": "... [truncated]
2025-08-29T14:42:53.637Z debug: Custom config:
{
  version: "1.0.0",
  cache: true,
    // 3 custom(s)
    endpoints.custom: [{"name":"Claude Haiku (Cost Effective)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthr... [truncated],{"name":"Claude Sonnet (Premium)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthropic.c... [truncated],{"name":"GPT-4 (Fallback)","apiKey":"${OPENAI_API_KEY}","baseURL":"https://api.openai.com/v1","model... [truncated]],
    0.name: "Claude Haiku (Cost Effective)",
    0.apiKey: "${ANTHROPIC_API_KEY}",
    0.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-haiku-20241022"],
    default.0: "claude-3-5-haiku-20241022",
    0.modelDisplayLabel: "üí∞ Haiku - Economical ($0.25/1M tokens)",
    0.titleConvo: true,
    0.titleModel: "claude-3-5-haiku-20241022",
    1.name: "Claude Sonnet (Premium)",
    1.apiKey: "${ANTHROPIC_API_KEY}",
    1.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-sonnet-20241022"],
    default.0: "claude-3-5-sonnet-20241022",
    1.modelDisplayLabel: "‚≠ê Sonnet - Premium Planning ($3.00/1M tokens)",
    1.titleConvo: true,
    1.titleModel: "claude-3-5-sonnet-20241022",
    2.name: "GPT-4 (Fallback)",
    2.apiKey: "${OPENAI_API_KEY}",
    2.baseURL: "https://api.openai.com/v1",
    // 1 default(s)
    models.default: ["gpt-4-turbo-preview"],
    default.0: "gpt-4-turbo-preview",
    2.modelDisplayLabel: "üîÑ GPT-4 - Fallback ($10.00/1M tokens)",
    2.titleConvo: true,
    d1-database.command: "npx",
    // 3 arg(s)
    d1-database.args: ["-y","mcp-remote","https://d1-database-improved.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://d1-database-improved.somotravel.workers.dev/sse",
    d1-database.timeout: 30000,
    d1-database.env: [object Object],
    d1-database.description: "Access to client and trip database with comprehensive travel data",
    d1-database.serverInstructions: "Tool selection guidance:\n- Use this server for data lookups and persistence:\n  ‚Ä¢ get_anything: broad... [truncated]",
    prompt-instructions.command: "npx",
    // 3 arg(s)
    prompt-instructions.args: ["-y","mcp-remote","https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse",
    prompt-instructions.timeout: 30000,
    prompt-instructions.env: [object Object],
    prompt-instructions.description: "Travel planning workflows, instructions, and structured processes",
    prompt-instructions.serverInstructions: "Tool selection guidance:\n- Use this server to manage workflow state and conversation flow.\n  ‚Ä¢ trave... [truncated]",
    privacyPolicy.externalUrl: "https://travelops.ai/privacy",
    termsOfService.externalUrl: "https://travelops.ai/terms",
}
2025-08-29T14:42:53.639Z debug: Web search serperApiKey: Using environment variable SERPER_API_KEY (not set in environment, user provided value)
2025-08-29T14:42:53.640Z debug: Web search searxngInstanceUrl: Using environment variable SEARXNG_INSTANCE_URL (not set in environment, user provided value)
2025-08-29T14:42:53.640Z debug: Web search searxngApiKey: Using environment variable SEARXNG_API_KEY (not set in environment, user provided value)
2025-08-29T14:42:53.640Z debug: Web search firecrawlApiKey: Using environment variable FIRECRAWL_API_KEY (not set in environment, user provided value)
2025-08-29T14:42:53.640Z debug: Web search firecrawlApiUrl: Using environment variable FIRECRAWL_API_URL (not set in environment, user provided value)
2025-08-29T14:42:53.640Z debug: Web search jinaApiKey: Using environment variable JINA_API_KEY (not set in environment, user provided value)
2025-08-29T14:42:53.640Z debug: Web search cohereApiKey: Using environment variable COHERE_API_KEY (not set in environment, user provided value)
2025-08-29T14:42:53.641Z warn: Default value for CREDS_KEY is being used.
2025-08-29T14:42:53.641Z warn: Default value for CREDS_IV is being used.
2025-08-29T14:42:53.641Z warn: Default value for JWT_SECRET is being used.
2025-08-29T14:42:53.641Z warn: Default value for JWT_REFRESH_SECRET is being used.
2025-08-29T14:42:53.641Z info: Please replace any default secret values.
2025-08-29T14:42:53.642Z info: ‚Äã

    For your convenience, use this tool to generate your own secret values:
    https://www.librechat.ai/toolkit/creds_generator

    ‚Äã
2025-08-29T14:42:53.642Z warn: RAG API is either not running or not reachable at undefined, you may experience errors with file uploads.
2025-08-29T14:42:53.653Z info: Turnstile is DISABLED (no siteKey provided).
2025-08-29T14:42:53.654Z info: Outdated Config version: 1.0.0
Latest version: 1.2.8

      Check out the Config changelogs for the latest options and features added.

      https://... [truncated]
2025-08-29T14:42:53.659Z debug: Role 'USER': Preserving existing permissions for 'PROMPTS'
2025-08-29T14:42:53.659Z debug: Role 'USER': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T14:42:53.659Z debug: Role 'USER': Preserving existing permissions for 'MEMORIES'
2025-08-29T14:42:53.660Z debug: Role 'USER': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T14:42:53.660Z debug: Role 'USER': Preserving existing permissions for 'AGENTS'
2025-08-29T14:42:53.660Z debug: Role 'USER': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T14:42:53.660Z debug: Role 'USER': Preserving existing permissions for 'RUN_CODE'
2025-08-29T14:42:53.660Z debug: Role 'USER': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T14:42:53.660Z debug: Role 'USER': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T14:42:53.660Z debug: Role 'USER': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T14:42:53.660Z debug: Role 'USER': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T14:42:53.660Z debug: Role 'USER': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T14:42:53.662Z debug: Role 'ADMIN': Preserving existing permissions for 'PROMPTS'
2025-08-29T14:42:53.662Z debug: Role 'ADMIN': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T14:42:53.662Z debug: Role 'ADMIN': Preserving existing permissions for 'MEMORIES'
2025-08-29T14:42:53.662Z debug: Role 'ADMIN': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T14:42:53.662Z debug: Role 'ADMIN': Preserving existing permissions for 'AGENTS'
2025-08-29T14:42:53.662Z debug: Role 'ADMIN': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T14:42:53.662Z debug: Role 'ADMIN': Preserving existing permissions for 'RUN_CODE'
2025-08-29T14:42:53.663Z debug: Role 'ADMIN': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T14:42:53.663Z debug: Role 'ADMIN': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T14:42:53.663Z debug: Role 'ADMIN': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T14:42:53.663Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T14:42:53.663Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T14:42:53.674Z info: Server listening at http://localhost:3080
2025-08-29T14:42:53.713Z debug: [MCP][d1-database] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librech... [truncated]
2025-08-29T14:42:53.713Z debug: [MCP][prompt-instructions] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"... [truncated]
2025-08-29T14:42:53.821Z debug: [MEILI_SYNC:meili-index-sync] Creating initial flow state
2025-08-29T14:42:53.823Z error: [indexSync] error fetch failed
2025-08-29T14:42:54.471Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{"listChanged"... [truncated]
2025-08-29T14:42:54.475Z debug: [MCP][prompt-instructions] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T14:42:54.477Z debug: [MCP][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T14:42:54.478Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{}},"serverInfo":{"nam... [truncated]
2025-08-29T14:42:54.479Z debug: [MCP][d1-database] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T14:42:54.484Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T14:42:54.601Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T14:42:54.602Z debug: [MCP][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T14:42:54.602Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T14:42:54.611Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T14:42:54.612Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T14:42:54.612Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T14:42:54.643Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T14:42:54.645Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T14:42:54.651Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:42:54.652Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T14:42:54.686Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T14:42:54.686Z info: [MCP][prompt-instructions] -------------------------------------------------‚îê
2025-08-29T14:42:54.687Z info: [MCP][prompt-instructions] URL: undefined
2025-08-29T14:42:54.687Z info: [MCP][prompt-instructions] OAuth Required: false
2025-08-29T14:42:54.687Z info: [MCP][prompt-instructions] Capabilities: {"tools":{"listChanged":false}}
2025-08-29T14:42:54.687Z info: [MCP][prompt-instructions] Tools: get_instruction, list_instructions, create_instruction, update_instruction, get_instructions_by_confidence, set_verb... [truncated]
2025-08-29T14:42:54.687Z info: [MCP][prompt-instructions] Server Instructions: Tool selection guidance:
- Use this server to manage workflow state and conversation flow.
  ‚Ä¢ travel_... [truncated]
2025-08-29T14:42:54.687Z info: [MCP][prompt-instructions] -------------------------------------------------‚îò
2025-08-29T14:42:54.691Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:42:54.692Z info: [MCP][d1-database] -------------------------------------------------‚îê
2025-08-29T14:42:54.692Z info: [MCP][d1-database] URL: undefined
2025-08-29T14:42:54.692Z info: [MCP][d1-database] OAuth Required: false
2025-08-29T14:42:54.693Z info: [MCP][d1-database] Capabilities: {"tools":{}}
2025-08-29T14:42:54.693Z info: [MCP][d1-database] Tools: health_check, update_activitylog_clients, reset_activitylog_from_trips, explore_database, get_anything, remember_context, bu... [truncated]
2025-08-29T14:42:54.693Z info: [MCP][d1-database] Server Instructions: Tool selection guidance:
- Use this server for data lookups and persistence:
  ‚Ä¢ get_anything: broad search fo... [truncated]
2025-08-29T14:42:54.693Z info: [MCP][d1-database] -------------------------------------------------‚îò
2025-08-29T14:42:54.695Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T14:42:54.736Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T14:42:54.737Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T14:42:54.776Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:42:54.781Z debug: Merged 33 app-level tools
2025-08-29T14:42:54.782Z info: MCP servers initialized successfully. Added 33 MCP tools.
2025-08-29T14:42:54.782Z debug: Checking if agent permissions migration is needed
2025-08-29T14:42:54.786Z debug: Collection already exists: aclentries
2025-08-29T14:42:54.800Z debug: Agent migration check completed
{
  totalToMigrate: 0,
  globalEditAccess: 0,
  globalViewAccess: 0,
  privateAgents: 0,
}
2025-08-29T14:42:54.801Z debug: Checking if prompt permissions migration is needed
2025-08-29T14:42:54.803Z debug: Collection already exists: aclentries
2025-08-29T14:42:54.814Z debug: Prompt migration check completed
{
  totalToMigrate: 0,
  globalViewAccess: 0,
  privateGroups: 0,
}
2025-08-29T14:43:06.557Z debug: [AgentController] Request aborted on close
2025-08-29T14:43:06.558Z debug: [BaseClient] Loading history:
{
  conversationId: "99b94427-c178-4ebc-b1c0-6c2d8e858224",
  parentMessageId: "cb104d96-30a7-4485-b668-8ead6b7dedf3",
}
2025-08-29T14:43:06.787Z debug: [AgentClient] Injected MCP instructions for servers:
["\"d1-database\"","\"prompt-instructions\""]
2025-08-29T14:43:06.788Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 175615,
  maxContextTokens: 180000,
}
2025-08-29T14:43:06.788Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 175615,
  maxContextTokens: 180000,
}
2025-08-29T14:43:06.789Z debug: [BaseClient] tokenCountMap:
{
  b5f8cf70-93e7-455c-a488-c5702ce0b28e: 7,
  794cd710-88d6-429e-b6e0-2154ad280b64: 304,
  4fc03470-b6d9-42d2-949c-8cf35040d8f5: 11,
  8ed0ce6e-8efb-4aef-8a1e-a33dab9036c4: 1321,
  7ae0d3f5-6dcb-444e-896f-54c198967b3a: 7,
  1264ce31-ec92-45e7-8f91-f04ad6a404f6: 1242,
  bf5b3c5d-4a93-4c48-91b2-8eac878d3a9a: 12,
  cb104d96-30a7-4485-b668-8ead6b7dedf3: 1359,
  c66bc3ff-4cd6-4372-a528-24c7511b2106: 119,
}
2025-08-29T14:43:06.789Z debug: [BaseClient]
{
  promptTokens: 4385,
  remainingContextTokens: 175615,
  payloadSize: 9,
  maxContextTokens: 180000,
}
2025-08-29T14:43:06.789Z debug: [BaseClient] tokenCountMap
{
  b5f8cf70-93e7-455c-a488-c5702ce0b28e: 7,
  794cd710-88d6-429e-b6e0-2154ad280b64: 304,
  4fc03470-b6d9-42d2-949c-8cf35040d8f5: 11,
  8ed0ce6e-8efb-4aef-8a1e-a33dab9036c4: 1321,
  7ae0d3f5-6dcb-444e-896f-54c198967b3a: 7,
  1264ce31-ec92-45e7-8f91-f04ad6a404f6: 1242,
  bf5b3c5d-4a93-4c48-91b2-8eac878d3a9a: 12,
  cb104d96-30a7-4485-b668-8ead6b7dedf3: 1359,
  c66bc3ff-4cd6-4372-a528-24c7511b2106: 119,
}
2025-08-29T14:43:06.789Z debug: [BaseClient] userMessage
{
  messageId: "c66bc3ff-4cd6-4372-a528-24c7511b2106",
  parentMessageId: "cb104d96-30a7-4485-b668-8ead6b7dedf3",
  conversationId: "99b94427-c178-4ebc-b1c0-6c2d8e858224",
  sender: "User",
  text: "Call render_trip_status with:\n    { \"trip_name\": \"Sara & Darren Jones 25th Anniversary - Bristol & B... [truncated]",
  isCreatedByUser: true,
  tokenCount: 119,
}
2025-08-29T14:43:07.130Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T14:43:13.252Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T14:43:13.262Z debug: [AgentController] Request closed
2025-08-29T14:43:13.267Z debug: [AgentController] Performing cleanup
2025-08-29T14:43:13.267Z debug: [AgentController] Cleaning up abort controller
2025-08-29T14:43:13.268Z debug: [AgentController] Cleanup completed
2025-08-29T14:43:29.621Z debug: [AgentController] Request aborted on close
2025-08-29T14:43:29.622Z debug: [BaseClient] Loading history:
{
  conversationId: "b89a3deb-0ad7-4323-b28c-de891d935770",
  parentMessageId: "00000000-0000-0000-0000-000000000000",
}
2025-08-29T14:43:29.624Z debug: [AgentClient] Injected MCP instructions for servers:
["\"d1-database\"","\"prompt-instructions\""]
2025-08-29T14:43:29.624Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 179990,
  maxContextTokens: 180000,
}
2025-08-29T14:43:29.625Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 179990,
  maxContextTokens: 180000,
}
2025-08-29T14:43:29.625Z debug: [BaseClient] tokenCountMap:
{
  d29e59fc-efc2-46c3-9173-cd830eac869b: 7,
}
2025-08-29T14:43:29.625Z debug: [BaseClient]
{
  promptTokens: 10,
  remainingContextTokens: 179990,
  payloadSize: 1,
  maxContextTokens: 180000,
}
2025-08-29T14:43:29.625Z debug: [BaseClient] tokenCountMap
{
  d29e59fc-efc2-46c3-9173-cd830eac869b: 7,
}
2025-08-29T14:43:29.625Z debug: [BaseClient] userMessage
{
  messageId: "d29e59fc-efc2-46c3-9173-cd830eac869b",
  parentMessageId: "00000000-0000-0000-0000-000000000000",
  conversationId: "b89a3deb-0ad7-4323-b28c-de891d935770",
  sender: "User",
  text: "travel_agent_start",
  isCreatedByUser: true,
  tokenCount: 7,
}
2025-08-29T14:43:30.009Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T14:43:35.348Z info: Mongo Connection options
2025-08-29T14:43:35.349Z info: {
  "bufferCommands": false,
  "autoIndex": false,
  "autoCreate": false
}
2025-08-29T14:43:35.386Z info: Connected to MongoDB
2025-08-29T14:43:35.387Z info: [indexSync] Starting index synchronization check...
2025-08-29T14:43:35.445Z info: [getAppConfig] App configuration not initialized. Initializing AppService...
2025-08-29T14:43:35.453Z info: Custom config file loaded:
2025-08-29T14:43:35.454Z info: {
  "version": "1.0.0",
  "cache": true,
  "endpoints": {
    "custom": [
      {
        "name": "Claude Haiku (Cost Effective)",
        "apiKey": "... [truncated]
2025-08-29T14:43:35.454Z debug: Custom config:
{
  version: "1.0.0",
  cache: true,
    // 3 custom(s)
    endpoints.custom: [{"name":"Claude Haiku (Cost Effective)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthr... [truncated],{"name":"Claude Sonnet (Premium)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthropic.c... [truncated],{"name":"GPT-4 (Fallback)","apiKey":"${OPENAI_API_KEY}","baseURL":"https://api.openai.com/v1","model... [truncated]],
    0.name: "Claude Haiku (Cost Effective)",
    0.apiKey: "${ANTHROPIC_API_KEY}",
    0.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-haiku-20241022"],
    default.0: "claude-3-5-haiku-20241022",
    0.modelDisplayLabel: "üí∞ Haiku - Economical ($0.25/1M tokens)",
    0.titleConvo: true,
    0.titleModel: "claude-3-5-haiku-20241022",
    1.name: "Claude Sonnet (Premium)",
    1.apiKey: "${ANTHROPIC_API_KEY}",
    1.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-sonnet-20241022"],
    default.0: "claude-3-5-sonnet-20241022",
    1.modelDisplayLabel: "‚≠ê Sonnet - Premium Planning ($3.00/1M tokens)",
    1.titleConvo: true,
    1.titleModel: "claude-3-5-sonnet-20241022",
    2.name: "GPT-4 (Fallback)",
    2.apiKey: "${OPENAI_API_KEY}",
    2.baseURL: "https://api.openai.com/v1",
    // 1 default(s)
    models.default: ["gpt-4-turbo-preview"],
    default.0: "gpt-4-turbo-preview",
    2.modelDisplayLabel: "üîÑ GPT-4 - Fallback ($10.00/1M tokens)",
    2.titleConvo: true,
    d1-database.command: "npx",
    // 3 arg(s)
    d1-database.args: ["-y","mcp-remote","https://d1-database-improved.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://d1-database-improved.somotravel.workers.dev/sse",
    d1-database.timeout: 30000,
    d1-database.env: [object Object],
    d1-database.description: "Access to client and trip database with comprehensive travel data",
    d1-database.serverInstructions: "Tool selection guidance:\n- Use this server for data lookups and persistence:\n  ‚Ä¢ get_anything: broad... [truncated]",
    prompt-instructions.command: "npx",
    // 3 arg(s)
    prompt-instructions.args: ["-y","mcp-remote","https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse",
    prompt-instructions.timeout: 30000,
    prompt-instructions.env: [object Object],
    prompt-instructions.description: "Travel planning workflows, instructions, and structured processes",
    prompt-instructions.serverInstructions: "Tool selection guidance:\n- Use this server to manage workflow state and conversation flow.\n  ‚Ä¢ trave... [truncated]",
    privacyPolicy.externalUrl: "https://travelops.ai/privacy",
    termsOfService.externalUrl: "https://travelops.ai/terms",
}
2025-08-29T14:43:35.456Z debug: Web search serperApiKey: Using environment variable SERPER_API_KEY (not set in environment, user provided value)
2025-08-29T14:43:35.456Z debug: Web search searxngInstanceUrl: Using environment variable SEARXNG_INSTANCE_URL (not set in environment, user provided value)
2025-08-29T14:43:35.456Z debug: Web search searxngApiKey: Using environment variable SEARXNG_API_KEY (not set in environment, user provided value)
2025-08-29T14:43:35.456Z debug: Web search firecrawlApiKey: Using environment variable FIRECRAWL_API_KEY (not set in environment, user provided value)
2025-08-29T14:43:35.456Z debug: Web search firecrawlApiUrl: Using environment variable FIRECRAWL_API_URL (not set in environment, user provided value)
2025-08-29T14:43:35.456Z debug: Web search jinaApiKey: Using environment variable JINA_API_KEY (not set in environment, user provided value)
2025-08-29T14:43:35.456Z debug: Web search cohereApiKey: Using environment variable COHERE_API_KEY (not set in environment, user provided value)
2025-08-29T14:43:35.457Z warn: Default value for CREDS_KEY is being used.
2025-08-29T14:43:35.457Z warn: Default value for CREDS_IV is being used.
2025-08-29T14:43:35.457Z warn: Default value for JWT_SECRET is being used.
2025-08-29T14:43:35.457Z warn: Default value for JWT_REFRESH_SECRET is being used.
2025-08-29T14:43:35.457Z info: Please replace any default secret values.
2025-08-29T14:43:35.457Z info: ‚Äã

    For your convenience, use this tool to generate your own secret values:
    https://www.librechat.ai/toolkit/creds_generator

    ‚Äã
2025-08-29T14:43:35.458Z warn: RAG API is either not running or not reachable at undefined, you may experience errors with file uploads.
2025-08-29T14:43:35.467Z info: Turnstile is DISABLED (no siteKey provided).
2025-08-29T14:43:35.468Z info: Outdated Config version: 1.0.0
Latest version: 1.2.8

      Check out the Config changelogs for the latest options and features added.

      https://... [truncated]
2025-08-29T14:43:35.473Z debug: Role 'USER': Preserving existing permissions for 'PROMPTS'
2025-08-29T14:43:35.473Z debug: Role 'USER': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T14:43:35.473Z debug: Role 'USER': Preserving existing permissions for 'MEMORIES'
2025-08-29T14:43:35.473Z debug: Role 'USER': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T14:43:35.473Z debug: Role 'USER': Preserving existing permissions for 'AGENTS'
2025-08-29T14:43:35.473Z debug: Role 'USER': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T14:43:35.473Z debug: Role 'USER': Preserving existing permissions for 'RUN_CODE'
2025-08-29T14:43:35.473Z debug: Role 'USER': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T14:43:35.473Z debug: Role 'USER': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T14:43:35.474Z debug: Role 'USER': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T14:43:35.474Z debug: Role 'USER': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T14:43:35.474Z debug: Role 'USER': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T14:43:35.477Z debug: Role 'ADMIN': Preserving existing permissions for 'PROMPTS'
2025-08-29T14:43:35.477Z debug: Role 'ADMIN': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T14:43:35.477Z debug: Role 'ADMIN': Preserving existing permissions for 'MEMORIES'
2025-08-29T14:43:35.477Z debug: Role 'ADMIN': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T14:43:35.477Z debug: Role 'ADMIN': Preserving existing permissions for 'AGENTS'
2025-08-29T14:43:35.477Z debug: Role 'ADMIN': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T14:43:35.477Z debug: Role 'ADMIN': Preserving existing permissions for 'RUN_CODE'
2025-08-29T14:43:35.477Z debug: Role 'ADMIN': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T14:43:35.477Z debug: Role 'ADMIN': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T14:43:35.477Z debug: Role 'ADMIN': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T14:43:35.477Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T14:43:35.478Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T14:43:35.488Z info: Server listening at http://localhost:3080
2025-08-29T14:43:35.528Z debug: [MCP][d1-database] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librech... [truncated]
2025-08-29T14:43:35.529Z debug: [MCP][prompt-instructions] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"... [truncated]
2025-08-29T14:43:35.638Z debug: [MEILI_SYNC:meili-index-sync] Creating initial flow state
2025-08-29T14:43:35.641Z error: [indexSync] error fetch failed
2025-08-29T14:43:36.284Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{}},"serverInfo":{"nam... [truncated]
2025-08-29T14:43:36.285Z debug: [MCP][d1-database] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T14:43:36.285Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T14:43:36.418Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T14:43:36.418Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T14:43:36.419Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T14:43:36.458Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:43:36.460Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T14:43:36.495Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{"listChanged"... [truncated]
2025-08-29T14:43:36.495Z debug: [MCP][prompt-instructions] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T14:43:36.495Z debug: [MCP][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T14:43:36.498Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:43:36.499Z info: [MCP][d1-database] -------------------------------------------------‚îê
2025-08-29T14:43:36.499Z info: [MCP][d1-database] URL: undefined
2025-08-29T14:43:36.500Z info: [MCP][d1-database] OAuth Required: false
2025-08-29T14:43:36.500Z info: [MCP][d1-database] Capabilities: {"tools":{}}
2025-08-29T14:43:36.500Z info: [MCP][d1-database] Tools: health_check, update_activitylog_clients, reset_activitylog_from_trips, explore_database, get_anything, remember_context, bu... [truncated]
2025-08-29T14:43:36.500Z info: [MCP][d1-database] Server Instructions: Tool selection guidance:
- Use this server for data lookups and persistence:
  ‚Ä¢ get_anything: broad search fo... [truncated]
2025-08-29T14:43:36.500Z info: [MCP][d1-database] -------------------------------------------------‚îò
2025-08-29T14:43:36.632Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T14:43:36.633Z debug: [MCP][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T14:43:36.633Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T14:43:36.679Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T14:43:36.679Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T14:43:36.720Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T14:43:36.721Z info: [MCP][prompt-instructions] -------------------------------------------------‚îê
2025-08-29T14:43:36.721Z info: [MCP][prompt-instructions] URL: undefined
2025-08-29T14:43:36.721Z info: [MCP][prompt-instructions] OAuth Required: false
2025-08-29T14:43:36.721Z info: [MCP][prompt-instructions] Capabilities: {"tools":{"listChanged":false}}
2025-08-29T14:43:36.721Z info: [MCP][prompt-instructions] Tools: get_instruction, list_instructions, create_instruction, update_instruction, get_instructions_by_confidence, set_verb... [truncated]
2025-08-29T14:43:36.721Z info: [MCP][prompt-instructions] Server Instructions: Tool selection guidance:
- Use this server to manage workflow state and conversation flow.
  ‚Ä¢ travel_... [truncated]
2025-08-29T14:43:36.721Z info: [MCP][prompt-instructions] -------------------------------------------------‚îò
2025-08-29T14:43:36.723Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T14:43:36.761Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:43:36.763Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T14:43:36.805Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T14:43:36.808Z debug: Merged 33 app-level tools
2025-08-29T14:43:36.808Z info: MCP servers initialized successfully. Added 33 MCP tools.
2025-08-29T14:43:36.809Z debug: Checking if agent permissions migration is needed
2025-08-29T14:43:36.811Z debug: Collection already exists: aclentries
2025-08-29T14:43:36.825Z debug: Agent migration check completed
{
  totalToMigrate: 0,
  globalEditAccess: 0,
  globalViewAccess: 0,
  privateAgents: 0,
}
2025-08-29T14:43:36.825Z debug: Checking if prompt permissions migration is needed
2025-08-29T14:43:36.829Z debug: Collection already exists: aclentries
2025-08-29T14:43:36.837Z debug: Prompt migration check completed
{
  totalToMigrate: 0,
  globalViewAccess: 0,
  privateGroups: 0,
}
2025-08-29T14:45:16.418Z debug: Merged 33 user-level tools
2025-08-29T14:45:16.979Z debug: [MCP][d1-database] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librech... [truncated]
2025-08-29T14:45:16.982Z debug: [MCP][prompt-instructions] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"... [truncated]
2025-08-29T14:45:18.052Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{}},"serverInfo":{"nam... [truncated]
2025-08-29T14:45:18.052Z debug: [MCP][d1-database] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T14:45:18.053Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T14:45:18.072Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{"listChanged"... [truncated]
2025-08-29T14:45:18.073Z debug: [MCP][prompt-instructions] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T14:45:18.073Z debug: [MCP][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T14:45:18.194Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T14:45:18.199Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T14:45:18.200Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T14:45:18.200Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T14:45:18.201Z debug: [MCP][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T14:45:18.204Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T14:45:18.245Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:45:18.248Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T14:45:39.191Z debug: [AgentController] Request aborted on close
2025-08-29T14:45:39.192Z debug: [BaseClient] Loading history:
{
  conversationId: "8ca23afb-d70b-477a-b59e-407c667e1b81",
  parentMessageId: "00000000-0000-0000-0000-000000000000",
}
2025-08-29T14:45:39.408Z debug: [AgentClient] Injected MCP instructions for servers:
["\"d1-database\"","\"prompt-instructions\""]
2025-08-29T14:45:39.409Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 179990,
  maxContextTokens: 180000,
}
2025-08-29T14:45:39.409Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 179990,
  maxContextTokens: 180000,
}
2025-08-29T14:45:39.410Z debug: [BaseClient] tokenCountMap:
{
  393492bd-8111-4533-9d50-6382c8c0f983: 7,
}
2025-08-29T14:45:39.410Z debug: [BaseClient]
{
  promptTokens: 10,
  remainingContextTokens: 179990,
  payloadSize: 1,
  maxContextTokens: 180000,
}
2025-08-29T14:45:39.410Z debug: [BaseClient] tokenCountMap
{
  393492bd-8111-4533-9d50-6382c8c0f983: 7,
}
2025-08-29T14:45:39.410Z debug: [BaseClient] userMessage
{
  messageId: "393492bd-8111-4533-9d50-6382c8c0f983",
  parentMessageId: "00000000-0000-0000-0000-000000000000",
  conversationId: "8ca23afb-d70b-477a-b59e-407c667e1b81",
  sender: "User",
  text: "travel_agent_start",
  isCreatedByUser: true,
  tokenCount: 7,
}
2025-08-29T14:45:39.704Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T14:45:42.029Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/call","params":{"name":"travel_agent_start","arguments":{}},"jsonrpc":"2.0","id":3}
2025-08-29T14:45:42.968Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":3,"result":{"content":[{"type":"text","text":"‚úÖ **Claude Travel Agent System Read... [truncated]
2025-08-29T14:45:42.969Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T14:45:42.969Z
2025-08-29T14:45:45.677Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T14:45:45.685Z debug: [AgentController] Request closed
2025-08-29T14:45:46.601Z debug: [saveConvo] api/server/services/Endpoints/agents/title.js
2025-08-29T14:45:46.611Z debug: [AgentController] Title generation started
2025-08-29T14:45:46.611Z debug: [AgentController] Title generation completed
2025-08-29T14:45:46.611Z debug: [AgentController] Performing cleanup
2025-08-29T14:45:46.611Z debug: [AgentController] Cleaning up abort controller
2025-08-29T14:45:46.612Z debug: [AgentController] Cleanup completed
2025-08-29T14:46:47.212Z debug: [AgentController] Request aborted on close
2025-08-29T14:46:47.213Z debug: [BaseClient] Loading history:
{
  conversationId: "8ca23afb-d70b-477a-b59e-407c667e1b81",
  parentMessageId: "cdcb6b5d-283c-46b2-bc3a-c02d4973ea93",
}
2025-08-29T14:46:47.216Z debug: [AgentClient] Injected MCP instructions for servers:
["\"d1-database\"","\"prompt-instructions\""]
2025-08-29T14:46:47.216Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 179529,
  maxContextTokens: 180000,
}
2025-08-29T14:46:47.217Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 179529,
  maxContextTokens: 180000,
}
2025-08-29T14:46:47.217Z debug: [BaseClient] tokenCountMap:
{
  393492bd-8111-4533-9d50-6382c8c0f983: 7,
  cdcb6b5d-283c-46b2-bc3a-c02d4973ea93: 262,
  f812dba5-1e1c-4ec1-bf41-58e74c1e871b: 199,
}
2025-08-29T14:46:47.217Z debug: [BaseClient]
{
  promptTokens: 471,
  remainingContextTokens: 179529,
  payloadSize: 3,
  maxContextTokens: 180000,
}
2025-08-29T14:46:47.217Z debug: [BaseClient] tokenCountMap
{
  393492bd-8111-4533-9d50-6382c8c0f983: 7,
  cdcb6b5d-283c-46b2-bc3a-c02d4973ea93: 262,
  f812dba5-1e1c-4ec1-bf41-58e74c1e871b: 199,
}
2025-08-29T14:46:47.217Z debug: [BaseClient] userMessage
{
  messageId: "f812dba5-1e1c-4ec1-bf41-58e74c1e871b",
  parentMessageId: "cdcb6b5d-283c-46b2-bc3a-c02d4973ea93",
  conversationId: "8ca23afb-d70b-477a-b59e-407c667e1b81",
  sender: "User",
  text: "- Restart backend: restart LibreChat on 3080 to load changes.\n- In chat, call render_trip_status wit... [truncated]",
  isCreatedByUser: true,
  tokenCount: 199,
}
2025-08-29T14:46:47.581Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T14:46:52.661Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":3}
2025-08-29T14:46:52.788Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":3,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T14:46:52.789Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T14:46:52.789Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T14:46:52.835Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T14:46:52.837Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_workflow_status","arguments":{"trip_identifier":"Sara & Darren Jone... [truncated]
2025-08-29T14:46:52.983Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":5,"result":{"content":[{"type":"text","text":"{\n  \"success\": true,\n  \"trip_id\": 26,... [truncated]
2025-08-29T14:46:52.984Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T14:46:52.984Z
2025-08-29T14:46:59.403Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T14:46:59.411Z debug: [AgentController] Request closed
2025-08-29T14:46:59.415Z debug: [AgentController] Performing cleanup
2025-08-29T14:46:59.415Z debug: [AgentController] Cleaning up abort controller
2025-08-29T14:46:59.415Z debug: [AgentController] Cleanup completed
2025-08-29T15:09:55.541Z debug: [AgentController] Request aborted on close
2025-08-29T15:09:55.541Z debug: [BaseClient] Loading history:
{
  conversationId: "a1132841-7622-43f0-940d-625e4f1c5e2f",
  parentMessageId: "00000000-0000-0000-0000-000000000000",
}
2025-08-29T15:09:55.544Z debug: [AgentClient] Injected MCP instructions for servers:
["\"d1-database\"","\"prompt-instructions\""]
2025-08-29T15:09:55.544Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 179990,
  maxContextTokens: 180000,
}
2025-08-29T15:09:55.544Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 179990,
  maxContextTokens: 180000,
}
2025-08-29T15:09:55.545Z debug: [BaseClient] tokenCountMap:
{
  7dea1f15-6f78-400d-ac0f-6c2165d78ff4: 7,
}
2025-08-29T15:09:55.545Z debug: [BaseClient]
{
  promptTokens: 10,
  remainingContextTokens: 179990,
  payloadSize: 1,
  maxContextTokens: 180000,
}
2025-08-29T15:09:55.545Z debug: [BaseClient] tokenCountMap
{
  7dea1f15-6f78-400d-ac0f-6c2165d78ff4: 7,
}
2025-08-29T15:09:55.545Z debug: [BaseClient] userMessage
{
  messageId: "7dea1f15-6f78-400d-ac0f-6c2165d78ff4",
  parentMessageId: "00000000-0000-0000-0000-000000000000",
  conversationId: "a1132841-7622-43f0-940d-625e4f1c5e2f",
  sender: "User",
  text: "travel_agent_start",
  isCreatedByUser: true,
  tokenCount: 7,
}
2025-08-29T15:09:55.907Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T15:09:58.590Z debug: [MCP][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":4}
2025-08-29T15:09:58.779Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":4,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T15:09:58.780Z debug: [MCP][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T15:09:58.780Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":5}
2025-08-29T15:09:58.830Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":5,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T15:09:58.831Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/call","params":{"name":"travel_agent_start","arguments":{}},"jsonrpc":"2.0","id":6}
2025-08-29T15:09:59.326Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":6,"result":{"content":[{"type":"text","text":"‚úÖ **Claude Travel Agent System Read... [truncated]
2025-08-29T15:09:59.327Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T15:09:59.326Z
2025-08-29T15:10:03.982Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T15:10:03.991Z debug: [AgentController] Request closed
2025-08-29T15:10:04.910Z debug: [saveConvo] api/server/services/Endpoints/agents/title.js
2025-08-29T15:10:04.918Z debug: [AgentController] Title generation started
2025-08-29T15:10:04.919Z debug: [AgentController] Title generation completed
2025-08-29T15:10:04.919Z debug: [AgentController] Performing cleanup
2025-08-29T15:10:04.919Z debug: [AgentController] Cleaning up abort controller
2025-08-29T15:10:04.919Z debug: [AgentController] Cleanup completed
2025-08-29T15:10:21.009Z debug: [AgentController] Request aborted on close
2025-08-29T15:10:21.009Z debug: [BaseClient] Loading history:
{
  conversationId: "a1132841-7622-43f0-940d-625e4f1c5e2f",
  parentMessageId: "fa6eaa7d-1038-4597-9f4f-ccd8ff07e83c",
}
2025-08-29T15:10:21.011Z debug: [AgentClient] Injected MCP instructions for servers:
["\"d1-database\"","\"prompt-instructions\""]
2025-08-29T15:10:21.012Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 179639,
  maxContextTokens: 180000,
}
2025-08-29T15:10:21.012Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 179639,
  maxContextTokens: 180000,
}
2025-08-29T15:10:21.012Z debug: [BaseClient] tokenCountMap:
{
  7dea1f15-6f78-400d-ac0f-6c2165d78ff4: 7,
  fa6eaa7d-1038-4597-9f4f-ccd8ff07e83c: 340,
  fe902ea7-d799-4cfc-82cc-c47081ee712a: 11,
}
2025-08-29T15:10:21.012Z debug: [BaseClient]
{
  promptTokens: 361,
  remainingContextTokens: 179639,
  payloadSize: 3,
  maxContextTokens: 180000,
}
2025-08-29T15:10:21.012Z debug: [BaseClient] tokenCountMap
{
  7dea1f15-6f78-400d-ac0f-6c2165d78ff4: 7,
  fa6eaa7d-1038-4597-9f4f-ccd8ff07e83c: 340,
  fe902ea7-d799-4cfc-82cc-c47081ee712a: 11,
}
2025-08-29T15:10:21.012Z debug: [BaseClient] userMessage
{
  messageId: "fe902ea7-d799-4cfc-82cc-c47081ee712a",
  parentMessageId: "fa6eaa7d-1038-4597-9f4f-ccd8ff07e83c",
  conversationId: "a1132841-7622-43f0-940d-625e4f1c5e2f",
  sender: "User",
  text: "show me Sara and Darren Jones trip",
  isCreatedByUser: true,
  tokenCount: 11,
}
2025-08-29T15:10:21.203Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T15:10:21.260Z debug: [FinalizationRegistry] Cleaning up client for user 68b1ababa6d361e541dc7c03
2025-08-29T15:10:21.260Z debug: [FinalizationRegistry] Cleaning up client for user 68b1ababa6d361e541dc7c03
2025-08-29T15:10:21.260Z debug: [FinalizationRegistry] Cleaning up client for user 68b1ababa6d361e541dc7c03
2025-08-29T15:10:24.547Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":6}
2025-08-29T15:10:24.823Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":6,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T15:10:24.823Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T15:10:24.824Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":7}
2025-08-29T15:10:24.872Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":7,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T15:10:24.873Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_anything","arguments":{"query":"Sara and Darren Jones trip"}},"json... [truncated]
2025-08-29T15:10:25.149Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":8,"result":{"content":[{"type":"text","text":"{\n  \"response\": \"Sara & Darren Jones 25... [truncated]
2025-08-29T15:10:25.149Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T15:10:25.149Z
2025-08-29T15:10:27.995Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_workflow_status","arguments":{"trip_identifier":"Sara & Darren Jone... [truncated]
2025-08-29T15:10:28.117Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":9,"result":{"content":[{"type":"text","text":"{\n  \"success\": true,\n  \"trip_id\": 26,... [truncated]
2025-08-29T15:10:28.117Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T15:10:28.117Z
2025-08-29T15:10:30.984Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_workflow_instructions","arguments":{"trip_identifier":"Sara & Darre... [truncated]
2025-08-29T15:10:31.086Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":10,"result":{"content":[{"type":"text","text":"{\n  \"success\": false,\n  \"error\": \"D... [truncated]
2025-08-29T15:10:31.086Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T15:10:31.086Z
2025-08-29T15:10:36.268Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T15:10:36.275Z debug: [AgentController] Request closed
2025-08-29T15:10:36.278Z debug: [AgentController] Performing cleanup
2025-08-29T15:10:36.278Z debug: [AgentController] Cleaning up abort controller
2025-08-29T15:10:36.279Z debug: [AgentController] Cleanup completed
2025-08-29T15:10:44.218Z debug: [AgentController] Request aborted on close
2025-08-29T15:10:44.219Z debug: [BaseClient] Loading history:
{
  conversationId: "a1132841-7622-43f0-940d-625e4f1c5e2f",
  parentMessageId: "89a8d89a-77c4-4e91-9415-316c3dd23aef",
}
2025-08-29T15:10:44.222Z debug: [AgentClient] Injected MCP instructions for servers:
["\"d1-database\"","\"prompt-instructions\""]
2025-08-29T15:10:44.222Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 178732,
  maxContextTokens: 180000,
}
2025-08-29T15:10:44.222Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 178732,
  maxContextTokens: 180000,
}
2025-08-29T15:10:44.222Z debug: [BaseClient] tokenCountMap:
{
  7dea1f15-6f78-400d-ac0f-6c2165d78ff4: 7,
  fa6eaa7d-1038-4597-9f4f-ccd8ff07e83c: 340,
  fe902ea7-d799-4cfc-82cc-c47081ee712a: 11,
  89a8d89a-77c4-4e91-9415-316c3dd23aef: 900,
  a98d8a73-e132-4d8e-9543-685dae18b3a4: 7,
}
2025-08-29T15:10:44.223Z debug: [BaseClient]
{
  promptTokens: 1268,
  remainingContextTokens: 178732,
  payloadSize: 5,
  maxContextTokens: 180000,
}
2025-08-29T15:10:44.223Z debug: [BaseClient] tokenCountMap
{
  7dea1f15-6f78-400d-ac0f-6c2165d78ff4: 7,
  fa6eaa7d-1038-4597-9f4f-ccd8ff07e83c: 340,
  fe902ea7-d799-4cfc-82cc-c47081ee712a: 11,
  89a8d89a-77c4-4e91-9415-316c3dd23aef: 900,
  a98d8a73-e132-4d8e-9543-685dae18b3a4: 7,
}
2025-08-29T15:10:44.223Z debug: [BaseClient] userMessage
{
  messageId: "a98d8a73-e132-4d8e-9543-685dae18b3a4",
  parentMessageId: "89a8d89a-77c4-4e91-9415-316c3dd23aef",
  conversationId: "a1132841-7622-43f0-940d-625e4f1c5e2f",
  sender: "User",
  text: "accommodations",
  isCreatedByUser: true,
  tokenCount: 7,
}
2025-08-29T15:10:44.614Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T15:10:47.632Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_anything","arguments":{"query":"Sara and Darren Jones Bristol Bath ... [truncated]
2025-08-29T15:10:48.121Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":11,"result":{"content":[{"type":"text","text":"{\n  \"response\": \"Sara & Darren Jones 2... [truncated]
2025-08-29T15:10:48.122Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T15:10:48.122Z
2025-08-29T15:10:51.762Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"bulk_trip_operations","arguments":{"trip_identifier":"Sara & Darren Jon... [truncated]
2025-08-29T15:10:51.890Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":12,"result":{"content":[{"type":"text","text":"{\n  \"success\": false,\n  \"error\": \"D... [truncated]
2025-08-29T15:10:51.890Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T15:10:51.890Z
2025-08-29T15:10:55.548Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_anything","arguments":{"query":"Trip 26 accommodations lodging hote... [truncated]
2025-08-29T15:10:55.691Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":13,"result":{"content":[{"type":"text","text":"{\n  \"response\": \"TRIP ID 26: Sara & Da... [truncated]
2025-08-29T15:10:55.692Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T15:10:55.692Z
2025-08-29T15:11:02.676Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T15:11:02.684Z debug: [AgentController] Request closed
2025-08-29T15:11:02.687Z debug: [AgentController] Performing cleanup
2025-08-29T15:11:02.687Z debug: [AgentController] Cleaning up abort controller
2025-08-29T15:11:02.687Z debug: [AgentController] Cleanup completed
2025-08-29T15:12:44.625Z info: Cleaning up FlowStateManager intervals...
2025-08-29T15:12:52.543Z info: Mongo Connection options
2025-08-29T15:12:52.547Z info: {
  "bufferCommands": false,
  "autoIndex": false,
  "autoCreate": false
}
2025-08-29T15:12:52.604Z info: Connected to MongoDB
2025-08-29T15:12:52.605Z info: [indexSync] Starting index synchronization check...
2025-08-29T15:12:52.701Z info: [getAppConfig] App configuration not initialized. Initializing AppService...
2025-08-29T15:12:52.715Z info: Custom config file loaded:
2025-08-29T15:12:52.716Z info: {
  "version": "1.0.0",
  "cache": true,
  "endpoints": {
    "custom": [
      {
        "name": "Claude Haiku (Cost Effective)",
        "apiKey": "... [truncated]
2025-08-29T15:12:52.716Z debug: Custom config:
{
  version: "1.0.0",
  cache: true,
    // 3 custom(s)
    endpoints.custom: [{"name":"Claude Haiku (Cost Effective)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthr... [truncated],{"name":"Claude Sonnet (Premium)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthropic.c... [truncated],{"name":"GPT-4 (Fallback)","apiKey":"${OPENAI_API_KEY}","baseURL":"https://api.openai.com/v1","model... [truncated]],
    0.name: "Claude Haiku (Cost Effective)",
    0.apiKey: "${ANTHROPIC_API_KEY}",
    0.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-haiku-20241022"],
    default.0: "claude-3-5-haiku-20241022",
    0.modelDisplayLabel: "üí∞ Haiku - Economical ($0.25/1M tokens)",
    0.titleConvo: true,
    0.titleModel: "claude-3-5-haiku-20241022",
    1.name: "Claude Sonnet (Premium)",
    1.apiKey: "${ANTHROPIC_API_KEY}",
    1.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-sonnet-20241022"],
    default.0: "claude-3-5-sonnet-20241022",
    1.modelDisplayLabel: "‚≠ê Sonnet - Premium Planning ($3.00/1M tokens)",
    1.titleConvo: true,
    1.titleModel: "claude-3-5-sonnet-20241022",
    2.name: "GPT-4 (Fallback)",
    2.apiKey: "${OPENAI_API_KEY}",
    2.baseURL: "https://api.openai.com/v1",
    // 1 default(s)
    models.default: ["gpt-4-turbo-preview"],
    default.0: "gpt-4-turbo-preview",
    2.modelDisplayLabel: "üîÑ GPT-4 - Fallback ($10.00/1M tokens)",
    2.titleConvo: true,
    d1-database.command: "npx",
    // 3 arg(s)
    d1-database.args: ["-y","mcp-remote","https://d1-database-improved.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://d1-database-improved.somotravel.workers.dev/sse",
    d1-database.timeout: 30000,
    d1-database.env: [object Object],
    d1-database.description: "Access to client and trip database with comprehensive travel data",
    d1-database.serverInstructions: "Tool selection guidance:\n- Use this server for data lookups and persistence:\n  ‚Ä¢ get_anything: broad... [truncated]",
    prompt-instructions.command: "npx",
    // 3 arg(s)
    prompt-instructions.args: ["-y","mcp-remote","https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse",
    prompt-instructions.timeout: 30000,
    prompt-instructions.env: [object Object],
    prompt-instructions.description: "Travel planning workflows, instructions, and structured processes",
    prompt-instructions.serverInstructions: "Tool selection guidance:\n- Use this server to manage workflow state and conversation flow.\n  ‚Ä¢ trave... [truncated]",
    privacyPolicy.externalUrl: "https://travelops.ai/privacy",
    termsOfService.externalUrl: "https://travelops.ai/terms",
}
2025-08-29T15:12:52.722Z debug: Web search serperApiKey: Using environment variable SERPER_API_KEY (not set in environment, user provided value)
2025-08-29T15:12:52.723Z debug: Web search searxngInstanceUrl: Using environment variable SEARXNG_INSTANCE_URL (not set in environment, user provided value)
2025-08-29T15:12:52.723Z debug: Web search searxngApiKey: Using environment variable SEARXNG_API_KEY (not set in environment, user provided value)
2025-08-29T15:12:52.723Z debug: Web search firecrawlApiKey: Using environment variable FIRECRAWL_API_KEY (not set in environment, user provided value)
2025-08-29T15:12:52.723Z debug: Web search firecrawlApiUrl: Using environment variable FIRECRAWL_API_URL (not set in environment, user provided value)
2025-08-29T15:12:52.723Z debug: Web search jinaApiKey: Using environment variable JINA_API_KEY (not set in environment, user provided value)
2025-08-29T15:12:52.724Z debug: Web search cohereApiKey: Using environment variable COHERE_API_KEY (not set in environment, user provided value)
2025-08-29T15:12:52.724Z warn: Default value for CREDS_KEY is being used.
2025-08-29T15:12:52.724Z warn: Default value for CREDS_IV is being used.
2025-08-29T15:12:52.725Z warn: Default value for JWT_SECRET is being used.
2025-08-29T15:12:52.725Z warn: Default value for JWT_REFRESH_SECRET is being used.
2025-08-29T15:12:52.725Z info: Please replace any default secret values.
2025-08-29T15:12:52.725Z info: ‚Äã

    For your convenience, use this tool to generate your own secret values:
    https://www.librechat.ai/toolkit/creds_generator

    ‚Äã
2025-08-29T15:12:52.725Z warn: RAG API is either not running or not reachable at undefined, you may experience errors with file uploads.
2025-08-29T15:12:52.745Z info: Turnstile is DISABLED (no siteKey provided).
2025-08-29T15:12:52.746Z info: Outdated Config version: 1.0.0
Latest version: 1.2.8

      Check out the Config changelogs for the latest options and features added.

      https://... [truncated]
2025-08-29T15:12:52.751Z debug: Role 'USER': Preserving existing permissions for 'PROMPTS'
2025-08-29T15:12:52.752Z debug: Role 'USER': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T15:12:52.752Z debug: Role 'USER': Preserving existing permissions for 'MEMORIES'
2025-08-29T15:12:52.752Z debug: Role 'USER': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T15:12:52.752Z debug: Role 'USER': Preserving existing permissions for 'AGENTS'
2025-08-29T15:12:52.752Z debug: Role 'USER': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T15:12:52.752Z debug: Role 'USER': Preserving existing permissions for 'RUN_CODE'
2025-08-29T15:12:52.752Z debug: Role 'USER': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T15:12:52.752Z debug: Role 'USER': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T15:12:52.752Z debug: Role 'USER': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T15:12:52.752Z debug: Role 'USER': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T15:12:52.752Z debug: Role 'USER': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T15:12:52.756Z debug: Role 'ADMIN': Preserving existing permissions for 'PROMPTS'
2025-08-29T15:12:52.756Z debug: Role 'ADMIN': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T15:12:52.756Z debug: Role 'ADMIN': Preserving existing permissions for 'MEMORIES'
2025-08-29T15:12:52.756Z debug: Role 'ADMIN': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T15:12:52.756Z debug: Role 'ADMIN': Preserving existing permissions for 'AGENTS'
2025-08-29T15:12:52.756Z debug: Role 'ADMIN': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T15:12:52.756Z debug: Role 'ADMIN': Preserving existing permissions for 'RUN_CODE'
2025-08-29T15:12:52.756Z debug: Role 'ADMIN': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T15:12:52.756Z debug: Role 'ADMIN': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T15:12:52.756Z debug: Role 'ADMIN': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T15:12:52.756Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T15:12:52.756Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T15:12:52.768Z info: Server listening at http://localhost:3080
2025-08-29T15:12:52.812Z debug: [MCP][d1-database] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librech... [truncated]
2025-08-29T15:12:52.812Z debug: [MCP][prompt-instructions] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"... [truncated]
2025-08-29T15:12:52.859Z debug: [MEILI_SYNC:meili-index-sync] Creating initial flow state
2025-08-29T15:12:52.862Z error: [indexSync] error fetch failed
2025-08-29T15:12:53.879Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{"listChanged"... [truncated]
2025-08-29T15:12:53.881Z debug: [MCP][prompt-instructions] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T15:12:53.886Z debug: [MCP][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T15:12:53.950Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{}},"serverInfo":{"nam... [truncated]
2025-08-29T15:12:53.950Z debug: [MCP][d1-database] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T15:12:53.954Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T15:12:54.020Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T15:12:54.021Z debug: [MCP][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T15:12:54.021Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T15:12:54.083Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T15:12:54.084Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T15:12:54.134Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T15:12:54.135Z info: [MCP][prompt-instructions] -------------------------------------------------‚îê
2025-08-29T15:12:54.135Z info: [MCP][prompt-instructions] URL: undefined
2025-08-29T15:12:54.135Z info: [MCP][prompt-instructions] OAuth Required: false
2025-08-29T15:12:54.135Z info: [MCP][prompt-instructions] Capabilities: {"tools":{"listChanged":false}}
2025-08-29T15:12:54.135Z info: [MCP][prompt-instructions] Tools: get_instruction, list_instructions, create_instruction, update_instruction, get_instructions_by_confidence, set_verb... [truncated]
2025-08-29T15:12:54.136Z info: [MCP][prompt-instructions] Server Instructions: Tool selection guidance:
- Use this server to manage workflow state and conversation flow.
  ‚Ä¢ travel_... [truncated]
2025-08-29T15:12:54.136Z info: [MCP][prompt-instructions] -------------------------------------------------‚îò
2025-08-29T15:12:54.157Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T15:12:54.158Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T15:12:54.158Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T15:12:54.204Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T15:12:54.205Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T15:12:54.261Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T15:12:54.262Z info: [MCP][d1-database] -------------------------------------------------‚îê
2025-08-29T15:12:54.262Z info: [MCP][d1-database] URL: undefined
2025-08-29T15:12:54.262Z info: [MCP][d1-database] OAuth Required: false
2025-08-29T15:12:54.262Z info: [MCP][d1-database] Capabilities: {"tools":{}}
2025-08-29T15:12:54.263Z info: [MCP][d1-database] Tools: health_check, update_activitylog_clients, reset_activitylog_from_trips, explore_database, get_anything, remember_context, bu... [truncated]
2025-08-29T15:12:54.263Z info: [MCP][d1-database] Server Instructions: Tool selection guidance:
- Use this server for data lookups and persistence:
  ‚Ä¢ get_anything: broad search fo... [truncated]
2025-08-29T15:12:54.263Z info: [MCP][d1-database] -------------------------------------------------‚îò
2025-08-29T15:12:54.266Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T15:12:54.309Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T15:12:54.311Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T15:12:54.353Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T15:12:54.358Z debug: Merged 33 app-level tools
2025-08-29T15:12:54.358Z info: MCP servers initialized successfully. Added 33 MCP tools.
2025-08-29T15:12:54.359Z debug: Checking if agent permissions migration is needed
2025-08-29T15:12:54.363Z debug: Collection already exists: aclentries
2025-08-29T15:12:54.383Z debug: Agent migration check completed
{
  totalToMigrate: 0,
  globalEditAccess: 0,
  globalViewAccess: 0,
  privateAgents: 0,
}
2025-08-29T15:12:54.384Z debug: Checking if prompt permissions migration is needed
2025-08-29T15:12:54.386Z debug: Collection already exists: aclentries
2025-08-29T15:12:54.396Z debug: Prompt migration check completed
{
  totalToMigrate: 0,
  globalViewAccess: 0,
  privateGroups: 0,
}
2025-08-29T15:13:15.803Z debug: Merged 33 user-level tools
2025-08-29T15:13:16.248Z debug: [MCP][d1-database] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librech... [truncated]
2025-08-29T15:13:16.249Z debug: [MCP][prompt-instructions] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"... [truncated]
2025-08-29T15:13:17.075Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{"listChanged"... [truncated]
2025-08-29T15:13:17.077Z debug: [MCP][prompt-instructions] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T15:13:17.077Z debug: [MCP][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T15:13:17.094Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{}},"serverInfo":{"nam... [truncated]
2025-08-29T15:13:17.094Z debug: [MCP][d1-database] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T15:13:17.096Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T15:13:17.226Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T15:13:17.227Z debug: [MCP][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T15:13:17.227Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T15:13:17.247Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T15:13:17.247Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T15:13:17.247Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T15:13:17.272Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T15:13:17.291Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T15:13:38.659Z debug: [AgentController] Request aborted on close
2025-08-29T15:13:38.660Z debug: [BaseClient] Loading history:
{
  conversationId: "78bf277d-2eab-4fae-b61e-df5d3c50bedf",
  parentMessageId: "00000000-0000-0000-0000-000000000000",
}
2025-08-29T15:13:38.876Z debug: [AgentClient] Injected MCP instructions for servers:
["\"d1-database\"","\"prompt-instructions\""]
2025-08-29T15:13:38.877Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 179989,
  maxContextTokens: 180000,
}
2025-08-29T15:13:38.877Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 179989,
  maxContextTokens: 180000,
}
2025-08-29T15:13:38.877Z debug: [BaseClient] tokenCountMap:
{
  79fc7ca8-6531-4119-a1b4-54c51c4b0739: 8,
}
2025-08-29T15:13:38.877Z debug: [BaseClient]
{
  promptTokens: 11,
  remainingContextTokens: 179989,
  payloadSize: 1,
  maxContextTokens: 180000,
}
2025-08-29T15:13:38.878Z debug: [BaseClient] tokenCountMap
{
  79fc7ca8-6531-4119-a1b4-54c51c4b0739: 8,
}
2025-08-29T15:13:38.878Z debug: [BaseClient] userMessage
{
  messageId: "79fc7ca8-6531-4119-a1b4-54c51c4b0739",
  parentMessageId: "00000000-0000-0000-0000-000000000000",
  conversationId: "78bf277d-2eab-4fae-b61e-df5d3c50bedf",
  sender: "User",
  text: "start_travel_agent",
  isCreatedByUser: true,
  tokenCount: 8,
}
2025-08-29T15:13:39.201Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T15:13:42.337Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/call","params":{"name":"travel_agent_start","arguments":{}},"jsonrpc":"2.0","id":3}
2025-08-29T15:13:42.908Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":3,"result":{"content":[{"type":"text","text":"‚úÖ **Claude Travel Agent System Read... [truncated]
2025-08-29T15:13:42.909Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T15:13:42.909Z
2025-08-29T15:13:46.115Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T15:13:46.122Z debug: [AgentController] Request closed
2025-08-29T15:13:46.921Z debug: [saveConvo] api/server/services/Endpoints/agents/title.js
2025-08-29T15:13:46.930Z debug: [AgentController] Title generation started
2025-08-29T15:13:46.931Z debug: [AgentController] Title generation completed
2025-08-29T15:13:46.931Z debug: [AgentController] Performing cleanup
2025-08-29T15:13:46.931Z debug: [AgentController] Cleaning up abort controller
2025-08-29T15:13:46.931Z debug: [AgentController] Cleanup completed
2025-08-29T15:16:29.533Z debug: [AgentController] Request aborted on close
2025-08-29T15:16:29.533Z debug: [BaseClient] Loading history:
{
  conversationId: "78bf277d-2eab-4fae-b61e-df5d3c50bedf",
  parentMessageId: "588326fd-b0e0-4944-bbc7-53adf4077c88",
}
2025-08-29T15:16:29.536Z debug: [AgentClient] Injected MCP instructions for servers:
["\"d1-database\"","\"prompt-instructions\""]
2025-08-29T15:16:29.537Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 179691,
  maxContextTokens: 180000,
}
2025-08-29T15:16:29.537Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 179691,
  maxContextTokens: 180000,
}
2025-08-29T15:16:29.537Z debug: [BaseClient] tokenCountMap:
{
  79fc7ca8-6531-4119-a1b4-54c51c4b0739: 8,
  588326fd-b0e0-4944-bbc7-53adf4077c88: 283,
  568063f6-0d14-45eb-83d9-4d5c68363b0e: 15,
}
2025-08-29T15:16:29.537Z debug: [BaseClient]
{
  promptTokens: 309,
  remainingContextTokens: 179691,
  payloadSize: 3,
  maxContextTokens: 180000,
}
2025-08-29T15:16:29.538Z debug: [BaseClient] tokenCountMap
{
  79fc7ca8-6531-4119-a1b4-54c51c4b0739: 8,
  588326fd-b0e0-4944-bbc7-53adf4077c88: 283,
  568063f6-0d14-45eb-83d9-4d5c68363b0e: 15,
}
2025-08-29T15:16:29.538Z debug: [BaseClient] userMessage
{
  messageId: "568063f6-0d14-45eb-83d9-4d5c68363b0e",
  parentMessageId: "588326fd-b0e0-4944-bbc7-53adf4077c88",
  conversationId: "78bf277d-2eab-4fae-b61e-df5d3c50bedf",
  sender: "User",
  text: "show sara and darren jones 2025 trip",
  isCreatedByUser: true,
  tokenCount: 15,
}
2025-08-29T15:16:29.896Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T15:16:33.395Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":3}
2025-08-29T15:16:33.631Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":3,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T15:16:33.631Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T15:16:33.632Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T15:16:33.690Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T15:16:33.691Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_anything","arguments":{"query":"Sara and Darren Jones 2025 trip","i... [truncated]
2025-08-29T15:16:34.223Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":5,"result":{"content":[{"type":"text","text":"{\n  \"response\": \"Sara & Darren Jones 25... [truncated]
2025-08-29T15:16:34.223Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T15:16:34.223Z
2025-08-29T15:16:37.071Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_workflow_status","arguments":{"trip_identifier":"Sara & Darren Jone... [truncated]
2025-08-29T15:16:37.175Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":6,"result":{"content":[{"type":"text","text":"{\n  \"success\": true,\n  \"trip_id\": 26,... [truncated]
2025-08-29T15:16:37.175Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T15:16:37.175Z
2025-08-29T15:16:39.670Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_workflow_instructions","arguments":{"trip_identifier":"Sara & Darre... [truncated]
2025-08-29T15:16:39.772Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":7,"result":{"content":[{"type":"text","text":"{\n  \"success\": false,\n  \"error\": \"D1... [truncated]
2025-08-29T15:16:39.772Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T15:16:39.772Z
2025-08-29T15:16:45.710Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T15:16:45.717Z debug: [AgentController] Request closed
2025-08-29T15:16:45.721Z debug: [AgentController] Performing cleanup
2025-08-29T15:16:45.721Z debug: [AgentController] Cleaning up abort controller
2025-08-29T15:16:45.722Z debug: [AgentController] Cleanup completed
2025-08-29T15:22:58.068Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":8}
2025-08-29T15:22:58.068Z debug: [MCP][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":4}
2025-08-29T15:22:58.306Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":8,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T15:22:58.307Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T15:22:58.307Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":9}
2025-08-29T15:22:58.351Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":9,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T15:22:58.514Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":4,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T15:22:58.514Z debug: [MCP][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T15:22:58.515Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":5}
2025-08-29T15:22:58.558Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":5,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T15:30:27.640Z error: [getUserPluginAuthValue] No plugin auth FIRECRAWL_API_URL found for user 68b1ababa6d361e541dc7c03
2025-08-29T15:30:27.724Z debug: [AgentController] Request aborted on close
2025-08-29T15:30:27.724Z debug: [BaseClient] Loading history:
{
  conversationId: "78bf277d-2eab-4fae-b61e-df5d3c50bedf",
  parentMessageId: "b4d3e636-55b5-427d-b206-11f599cca584",
}
2025-08-29T15:30:27.727Z debug: [AgentClient] Injected MCP instructions for servers:
["\"d1-database\"","\"prompt-instructions\""]
2025-08-29T15:30:27.727Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 178740,
  maxContextTokens: 180000,
}
2025-08-29T15:30:27.727Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 178740,
  maxContextTokens: 180000,
}
2025-08-29T15:30:27.727Z debug: [BaseClient] tokenCountMap:
{
  79fc7ca8-6531-4119-a1b4-54c51c4b0739: 8,
  588326fd-b0e0-4944-bbc7-53adf4077c88: 283,
  568063f6-0d14-45eb-83d9-4d5c68363b0e: 15,
  b4d3e636-55b5-427d-b206-11f599cca584: 935,
  138f0d31-70b6-4ff9-9393-a78fc3ab3815: 16,
}
2025-08-29T15:30:27.728Z debug: [BaseClient]
{
  promptTokens: 1260,
  remainingContextTokens: 178740,
  payloadSize: 5,
  maxContextTokens: 180000,
}
2025-08-29T15:30:27.728Z debug: [BaseClient] tokenCountMap
{
  79fc7ca8-6531-4119-a1b4-54c51c4b0739: 8,
  588326fd-b0e0-4944-bbc7-53adf4077c88: 283,
  568063f6-0d14-45eb-83d9-4d5c68363b0e: 15,
  b4d3e636-55b5-427d-b206-11f599cca584: 935,
  138f0d31-70b6-4ff9-9393-a78fc3ab3815: 16,
}
2025-08-29T15:30:27.728Z debug: [BaseClient] userMessage
{
  messageId: "138f0d31-70b6-4ff9-9393-a78fc3ab3815",
  parentMessageId: "b4d3e636-55b5-427d-b206-11f599cca584",
  conversationId: "78bf277d-2eab-4fae-b61e-df5d3c50bedf",
  sender: "User",
  text: "search the web to find train options from London to Birmingham.",
  isCreatedByUser: true,
  tokenCount: 16,
}
2025-08-29T15:30:27.931Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T15:30:30.911Z debug: [FinalizationRegistry] Cleaning up client for user 68b1ababa6d361e541dc7c03
2025-08-29T15:30:30.911Z debug: [FinalizationRegistry] Cleaning up client for user 68b1ababa6d361e541dc7c03
2025-08-29T15:30:32.469Z info: [onSearchResults] user: 68b1ababa6d361e541dc7c03 | thread_id: 78bf277d-2eab-4fae-b61e-df5d3c50bedf | run_id: 49423686-e0f6-45e0-b6c4-c8f688c7381a
2025-08-29T15:30:32.471Z debug: Scraping 5 links with Firecrawl
2025-08-29T15:30:36.294Z debug: Reranking 77 chunks with Jina
2025-08-29T15:30:36.826Z debug: Jina API Model: jina-reranker-v2-base-multilingual
2025-08-29T15:30:36.826Z debug: Jina API Usage:
{
  total_tokens: 2575,
}
2025-08-29T15:30:39.982Z error: Error scraping https://www.nationalrail.co.uk/journey-planner/: Firecrawl API request failed: timeout of 7500ms exceeded
2025-08-29T15:30:39.982Z error: Error scraping https://www.nationalrail.co.uk/journey-planner/:
2025-08-29T15:30:39.983Z error: Error scraping https://www.traintickets.com/train-times/london-all-stations-to-birmingham-stations/: Firecrawl API request failed: timeout of 7500ms e... [truncated]
2025-08-29T15:30:39.983Z error: Error scraping https://www.traintickets.com/train-times/london-all-stations-to-birmingham-stations/:
2025-08-29T15:30:39.984Z error: Error scraping https://www.thetrainline.com/en-us/train-companies/national-rail/national-rail-map: Firecrawl API request failed: timeout of 7500ms exc... [truncated]
2025-08-29T15:30:39.984Z error: Error scraping https://www.thetrainline.com/en-us/train-companies/national-rail/national-rail-map:
2025-08-29T15:30:39.985Z error: Error scraping https://www.westmidlandsrailway.co.uk/train-times/london-euston-to-birmingham-new-street: Firecrawl API request failed: timeout of 7500... [truncated]
2025-08-29T15:30:39.985Z error: Error scraping https://www.westmidlandsrailway.co.uk/train-times/london-euston-to-birmingham-new-street:
2025-08-29T15:30:47.843Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T15:30:47.852Z debug: [AgentController] Request closed
2025-08-29T15:30:47.856Z debug: [AgentController] Performing cleanup
2025-08-29T15:30:47.856Z debug: [AgentController] Cleaning up abort controller
2025-08-29T15:30:47.857Z debug: [AgentController] Cleanup completed
2025-08-29T15:31:18.678Z error: [getUserPluginAuthValue] No plugin auth FIRECRAWL_API_URL found for user 68b1ababa6d361e541dc7c03
2025-08-29T15:31:18.780Z debug: [AgentController] Request aborted on close
2025-08-29T15:31:18.781Z debug: [BaseClient] Loading history:
{
  conversationId: "78bf277d-2eab-4fae-b61e-df5d3c50bedf",
  parentMessageId: "49423686-e0f6-45e0-b6c4-c8f688c7381a",
}
2025-08-29T15:31:18.784Z debug: [AgentClient] Injected MCP instructions for servers:
["\"d1-database\"","\"prompt-instructions\""]
2025-08-29T15:31:18.784Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 176743,
  maxContextTokens: 180000,
}
2025-08-29T15:31:18.785Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 176743,
  maxContextTokens: 180000,
}
2025-08-29T15:31:18.785Z debug: [BaseClient] tokenCountMap:
{
  79fc7ca8-6531-4119-a1b4-54c51c4b0739: 8,
  588326fd-b0e0-4944-bbc7-53adf4077c88: 283,
  568063f6-0d14-45eb-83d9-4d5c68363b0e: 15,
  b4d3e636-55b5-427d-b206-11f599cca584: 935,
  138f0d31-70b6-4ff9-9393-a78fc3ab3815: 16,
  49423686-e0f6-45e0-b6c4-c8f688c7381a: 1982,
  ed339cab-96da-4f73-b933-061b33ef1a6a: 15,
}
2025-08-29T15:31:18.785Z debug: [BaseClient]
{
  promptTokens: 3257,
  remainingContextTokens: 176743,
  payloadSize: 7,
  maxContextTokens: 180000,
}
2025-08-29T15:31:18.785Z debug: [BaseClient] tokenCountMap
{
  79fc7ca8-6531-4119-a1b4-54c51c4b0739: 8,
  588326fd-b0e0-4944-bbc7-53adf4077c88: 283,
  568063f6-0d14-45eb-83d9-4d5c68363b0e: 15,
  b4d3e636-55b5-427d-b206-11f599cca584: 935,
  138f0d31-70b6-4ff9-9393-a78fc3ab3815: 16,
  49423686-e0f6-45e0-b6c4-c8f688c7381a: 1982,
  ed339cab-96da-4f73-b933-061b33ef1a6a: 15,
}
2025-08-29T15:31:18.785Z debug: [BaseClient] userMessage
{
  messageId: "ed339cab-96da-4f73-b933-061b33ef1a6a",
  parentMessageId: "49423686-e0f6-45e0-b6c4-c8f688c7381a",
  conversationId: "78bf277d-2eab-4fae-b61e-df5d3c50bedf",
  sender: "User",
  text: "Is Chiltern Railways the same as CrossCountry?",
  isCreatedByUser: true,
  tokenCount: 15,
}
2025-08-29T15:31:19.164Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T15:31:23.794Z info: [onSearchResults] user: 68b1ababa6d361e541dc7c03 | thread_id: 78bf277d-2eab-4fae-b61e-df5d3c50bedf | run_id: 85450762-cad8-4729-8c81-de33caddfcf5
2025-08-29T15:31:23.795Z debug: Scraping 5 links with Firecrawl
2025-08-29T15:31:23.934Z error: Error scraping https://www.reddit.com/r/uktrains/comments/1361o7z/crosscountry_voyager_and_chiltern_railways_dvt/: Firecrawl API request failed: Reque... [truncated]
2025-08-29T15:31:23.934Z error: Error scraping https://www.reddit.com/r/uktrains/comments/1361o7z/crosscountry_voyager_and_chiltern_railways_dvt/:
2025-08-29T15:31:26.839Z debug: Reranking 1451 chunks with Jina
2025-08-29T15:31:27.698Z debug: Reranking 266 chunks with Jina
2025-08-29T15:31:27.753Z debug: [FinalizationRegistry] Cleaning up client for user 68b1ababa6d361e541dc7c03
2025-08-29T15:31:29.509Z debug: Jina API Model: jina-reranker-v2-base-multilingual
2025-08-29T15:31:29.509Z debug: Jina API Usage:
{
  total_tokens: 71610,
}
2025-08-29T15:31:29.629Z debug: Jina API Model: jina-reranker-v2-base-multilingual
2025-08-29T15:31:29.629Z debug: Jina API Usage:
{
  total_tokens: 10974,
}
2025-08-29T15:31:30.691Z debug: Reranking 994 chunks with Jina
2025-08-29T15:31:31.308Z error: Error scraping https://www.chilternrailways.co.uk/which-other-transport-companies-do-we-interchange-and-where: Firecrawl API request failed: timeout o... [truncated]
2025-08-29T15:31:31.308Z error: Error scraping https://www.chilternrailways.co.uk/which-other-transport-companies-do-we-interchange-and-where:
2025-08-29T15:31:32.404Z debug: Jina API Model: jina-reranker-v2-base-multilingual
2025-08-29T15:31:32.404Z debug: Jina API Usage:
{
  total_tokens: 51538,
}
2025-08-29T15:31:39.909Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T15:31:39.918Z debug: [AgentController] Request closed
2025-08-29T15:31:39.922Z debug: [AgentController] Performing cleanup
2025-08-29T15:31:39.922Z debug: [AgentController] Cleaning up abort controller
2025-08-29T15:31:39.922Z debug: [AgentController] Cleanup completed
2025-08-29T15:32:08.309Z error: [getUserPluginAuthValue] No plugin auth FIRECRAWL_API_URL found for user 68b1ababa6d361e541dc7c03
2025-08-29T15:32:08.427Z debug: [AgentController] Request aborted on close
2025-08-29T15:32:08.428Z debug: [BaseClient] Loading history:
{
  conversationId: "78bf277d-2eab-4fae-b61e-df5d3c50bedf",
  parentMessageId: "85450762-cad8-4729-8c81-de33caddfcf5",
}
2025-08-29T15:32:08.431Z debug: [AgentClient] Injected MCP instructions for servers:
["\"d1-database\"","\"prompt-instructions\""]
2025-08-29T15:32:08.432Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 172138,
  maxContextTokens: 180000,
}
2025-08-29T15:32:08.432Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 172138,
  maxContextTokens: 180000,
}
2025-08-29T15:32:08.432Z debug: [BaseClient] tokenCountMap:
{
  79fc7ca8-6531-4119-a1b4-54c51c4b0739: 8,
  588326fd-b0e0-4944-bbc7-53adf4077c88: 283,
  568063f6-0d14-45eb-83d9-4d5c68363b0e: 15,
  b4d3e636-55b5-427d-b206-11f599cca584: 935,
  138f0d31-70b6-4ff9-9393-a78fc3ab3815: 16,
  49423686-e0f6-45e0-b6c4-c8f688c7381a: 1982,
  ed339cab-96da-4f73-b933-061b33ef1a6a: 15,
  85450762-cad8-4729-8c81-de33caddfcf5: 4589,
  9989f416-cbdb-4f0d-bb92-94bf1d49e0a6: 16,
}
2025-08-29T15:32:08.432Z debug: [BaseClient]
{
  promptTokens: 7862,
  remainingContextTokens: 172138,
  payloadSize: 9,
  maxContextTokens: 180000,
}
2025-08-29T15:32:08.432Z debug: [BaseClient] tokenCountMap
{
  79fc7ca8-6531-4119-a1b4-54c51c4b0739: 8,
  588326fd-b0e0-4944-bbc7-53adf4077c88: 283,
  568063f6-0d14-45eb-83d9-4d5c68363b0e: 15,
  b4d3e636-55b5-427d-b206-11f599cca584: 935,
  138f0d31-70b6-4ff9-9393-a78fc3ab3815: 16,
  49423686-e0f6-45e0-b6c4-c8f688c7381a: 1982,
  ed339cab-96da-4f73-b933-061b33ef1a6a: 15,
  85450762-cad8-4729-8c81-de33caddfcf5: 4589,
  9989f416-cbdb-4f0d-bb92-94bf1d49e0a6: 16,
}
2025-08-29T15:32:08.433Z debug: [BaseClient] userMessage
{
  messageId: "9989f416-cbdb-4f0d-bb92-94bf1d49e0a6",
  parentMessageId: "85450762-cad8-4729-8c81-de33caddfcf5",
  conversationId: "78bf277d-2eab-4fae-b61e-df5d3c50bedf",
  sender: "User",
  text: "Is it possible to take cross-country from London to Birmingham?",
  isCreatedByUser: true,
  tokenCount: 16,
}
2025-08-29T15:32:08.811Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T15:32:14.281Z info: [onSearchResults] user: 68b1ababa6d361e541dc7c03 | thread_id: 78bf277d-2eab-4fae-b61e-df5d3c50bedf | run_id: be09b2af-8416-478c-9025-c6d1eac717e8
2025-08-29T15:32:14.282Z debug: Scraping 5 links with Firecrawl
2025-08-29T15:32:17.167Z debug: Reranking 3 chunks with Jina
2025-08-29T15:32:17.756Z debug: Jina API Model: jina-reranker-v2-base-multilingual
2025-08-29T15:32:17.756Z debug: Jina API Usage:
{
  total_tokens: 152,
}
2025-08-29T15:32:21.792Z error: Error scraping https://www.crosscountrytrains.co.uk/routes-destinations/route-map: Firecrawl API request failed: timeout of 7500ms exceeded
2025-08-29T15:32:21.793Z error: Error scraping https://www.crosscountrytrains.co.uk/routes-destinations/route-map:
2025-08-29T15:32:21.793Z error: Error scraping https://www.crosscountrytrains.co.uk/routes-destinations/destinations/birmingham: Firecrawl API request failed: timeout of 7500ms excee... [truncated]
2025-08-29T15:32:21.793Z error: Error scraping https://www.crosscountrytrains.co.uk/routes-destinations/destinations/birmingham:
2025-08-29T15:32:21.794Z error: Error scraping https://en.wikipedia.org/wiki/Cross_Country_Route: Firecrawl API request failed: timeout of 7500ms exceeded
2025-08-29T15:32:21.794Z error: Error scraping https://en.wikipedia.org/wiki/Cross_Country_Route:
2025-08-29T15:32:21.794Z error: Error scraping https://www.crosscountrytrains.co.uk/travel-information/train-timetables: Firecrawl API request failed: timeout of 7500ms exceeded
2025-08-29T15:32:21.794Z error: Error scraping https://www.crosscountrytrains.co.uk/travel-information/train-timetables:
2025-08-29T15:32:27.337Z info: [onSearchResults] user: 68b1ababa6d361e541dc7c03 | thread_id: 78bf277d-2eab-4fae-b61e-df5d3c50bedf | run_id: be09b2af-8416-478c-9025-c6d1eac717e8
2025-08-29T15:32:27.338Z debug: Scraping 5 links with Firecrawl
2025-08-29T15:32:27.352Z debug: Scraping 5 links with Firecrawl
2025-08-29T15:32:27.530Z error: Error scraping https://www.reddit.com/r/uktravel/comments/1fl8wy1/cross_country_trains/: Firecrawl API request failed: Request failed with status code... [truncated]
2025-08-29T15:32:27.531Z error: Error scraping https://www.reddit.com/r/uktravel/comments/1fl8wy1/cross_country_trains/:
2025-08-29T15:32:29.526Z debug: Reranking 1599 chunks with Jina
2025-08-29T15:32:31.969Z error: Error scraping https://www.crosscountrytrains.co.uk/routes-destinations/destinations/birmingham: Firecrawl API request failed: Request failed with sta... [truncated]
2025-08-29T15:32:31.969Z error: Error scraping https://www.crosscountrytrains.co.uk/routes-destinations/destinations/birmingham:
2025-08-29T15:32:32.009Z error: Error scraping https://www.tripadvisor.com/ShowTopic-g186338-i17-k14911498-Train_Question_London_to_Birmingham-London_England.html: Firecrawl API requ... [truncated]
2025-08-29T15:32:32.010Z error: Error scraping https://www.tripadvisor.com/ShowTopic-g186338-i17-k14911498-Train_Question_London_to_Birmingham-London_England.html:
2025-08-29T15:32:32.048Z error: Error scraping https://www.independent.co.uk/travel/news-and-advice/august-2025-bank-holiday-travel-traffic-trains-airports-ferries-simon-calder-b2810... [truncated]
2025-08-29T15:32:32.048Z error: Error scraping https://www.independent.co.uk/travel/news-and-advice/august-2025-bank-holiday-travel-traffic-trains-airports-ferries-simon-calder-b2810... [truncated]
2025-08-29T15:32:32.579Z debug: Jina API Model: jina-reranker-v2-base-multilingual
2025-08-29T15:32:32.579Z debug: Jina API Usage:
{
  total_tokens: 85719,
}
2025-08-29T15:32:34.862Z error: Error scraping https://www.crosscountrytrains.co.uk/routes-destinations/route-map: Firecrawl API request failed: timeout of 7500ms exceeded
2025-08-29T15:32:34.863Z error: Error scraping https://www.crosscountrytrains.co.uk/routes-destinations/route-map:
2025-08-29T15:32:34.863Z error: Error scraping https://www.bbc.com/news/articles/c5y04nyjz29o: Firecrawl API request failed: timeout of 7500ms exceeded
2025-08-29T15:32:34.863Z error: Error scraping https://www.bbc.com/news/articles/c5y04nyjz29o:
2025-08-29T15:32:34.864Z error: Error scraping https://www.theguardian.com/business/2025/aug/20/crosscountry-passengers-face-strike-disruption-on-bank-holiday-weekend: Firecrawl API ... [truncated]
2025-08-29T15:32:34.864Z error: Error scraping https://www.theguardian.com/business/2025/aug/20/crosscountry-passengers-face-strike-disruption-on-bank-holiday-weekend:
2025-08-29T15:32:34.865Z error: Error scraping https://www.bbc.com/news/articles/c1kzrxwjnryo: Firecrawl API request failed: timeout of 7500ms exceeded
2025-08-29T15:32:34.865Z error: Error scraping https://www.bbc.com/news/articles/c1kzrxwjnryo:
2025-08-29T15:32:34.866Z error: Error scraping https://www.telegraph.co.uk/travel/destinations/europe/united-kingdom/tours/seven-uk-cross-country-rail-routes-revitalise-tourism/: Fir... [truncated]
2025-08-29T15:32:34.866Z error: Error scraping https://www.telegraph.co.uk/travel/destinations/europe/united-kingdom/tours/seven-uk-cross-country-rail-routes-revitalise-tourism/:
2025-08-29T15:32:42.537Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T15:32:42.545Z debug: [AgentController] Request closed
2025-08-29T15:32:42.549Z debug: [AgentController] Performing cleanup
2025-08-29T15:32:42.549Z debug: [AgentController] Cleaning up abort controller
2025-08-29T15:32:42.550Z debug: [AgentController] Cleanup completed
2025-08-29T15:42:42.537Z error: [getUserPluginAuthValue] No plugin auth FIRECRAWL_API_URL found for user 68b1ababa6d361e541dc7c03
2025-08-29T15:42:42.623Z debug: [AgentController] Request aborted on close
2025-08-29T15:42:42.623Z debug: [BaseClient] Loading history:
{
  conversationId: "78bf277d-2eab-4fae-b61e-df5d3c50bedf",
  parentMessageId: "be09b2af-8416-478c-9025-c6d1eac717e8",
}
2025-08-29T15:42:42.627Z debug: [AgentClient] Injected MCP instructions for servers:
["\"d1-database\"","\"prompt-instructions\""]
2025-08-29T15:42:42.627Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 168126,
  maxContextTokens: 180000,
}
2025-08-29T15:42:42.627Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 168126,
  maxContextTokens: 180000,
}
2025-08-29T15:42:42.627Z debug: [BaseClient] tokenCountMap:
{
  79fc7ca8-6531-4119-a1b4-54c51c4b0739: 8,
  588326fd-b0e0-4944-bbc7-53adf4077c88: 283,
  568063f6-0d14-45eb-83d9-4d5c68363b0e: 15,
  b4d3e636-55b5-427d-b206-11f599cca584: 935,
  138f0d31-70b6-4ff9-9393-a78fc3ab3815: 16,
  49423686-e0f6-45e0-b6c4-c8f688c7381a: 1982,
  ed339cab-96da-4f73-b933-061b33ef1a6a: 15,
  85450762-cad8-4729-8c81-de33caddfcf5: 4589,
  9989f416-cbdb-4f0d-bb92-94bf1d49e0a6: 16,
  be09b2af-8416-478c-9025-c6d1eac717e8: 3999,
  f31b3809-c372-40ef-bac4-f80c6e51044c: 13,
}
2025-08-29T15:42:42.627Z debug: [BaseClient]
{
  promptTokens: 11874,
  remainingContextTokens: 168126,
  payloadSize: 11,
  maxContextTokens: 180000,
}
2025-08-29T15:42:42.628Z debug: [BaseClient] tokenCountMap
{
  79fc7ca8-6531-4119-a1b4-54c51c4b0739: 8,
  588326fd-b0e0-4944-bbc7-53adf4077c88: 283,
  568063f6-0d14-45eb-83d9-4d5c68363b0e: 15,
  b4d3e636-55b5-427d-b206-11f599cca584: 935,
  138f0d31-70b6-4ff9-9393-a78fc3ab3815: 16,
  49423686-e0f6-45e0-b6c4-c8f688c7381a: 1982,
  ed339cab-96da-4f73-b933-061b33ef1a6a: 15,
  85450762-cad8-4729-8c81-de33caddfcf5: 4589,
  9989f416-cbdb-4f0d-bb92-94bf1d49e0a6: 16,
  be09b2af-8416-478c-9025-c6d1eac717e8: 3999,
  f31b3809-c372-40ef-bac4-f80c6e51044c: 13,
}
2025-08-29T15:42:42.628Z debug: [BaseClient] userMessage
{
  messageId: "f31b3809-c372-40ef-bac4-f80c6e51044c",
  parentMessageId: "be09b2af-8416-478c-9025-c6d1eac717e8",
  conversationId: "78bf277d-2eab-4fae-b61e-df5d3c50bedf",
  sender: "User",
  text: "how far is it from London to Reading?",
  isCreatedByUser: true,
  tokenCount: 13,
}
2025-08-29T15:42:42.996Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T15:42:48.415Z info: [onSearchResults] user: 68b1ababa6d361e541dc7c03 | thread_id: 78bf277d-2eab-4fae-b61e-df5d3c50bedf | run_id: 4061524e-e2ec-42ff-a8a6-307a2737b6ac
2025-08-29T15:42:48.415Z debug: Scraping 5 links with Firecrawl
2025-08-29T15:42:51.745Z debug: Reranking 101 chunks with Jina
2025-08-29T15:42:52.568Z debug: Jina API Model: jina-reranker-v2-base-multilingual
2025-08-29T15:42:52.568Z debug: Jina API Usage:
{
  total_tokens: 4129,
}
2025-08-29T15:42:55.075Z debug: Reranking 253 chunks with Jina
2025-08-29T15:42:55.113Z debug: [FinalizationRegistry] Cleaning up client for user 68b1ababa6d361e541dc7c03
2025-08-29T15:42:55.114Z debug: [FinalizationRegistry] Cleaning up client for user 68b1ababa6d361e541dc7c03
2025-08-29T15:42:55.747Z debug: Jina API Model: jina-reranker-v2-base-multilingual
2025-08-29T15:42:55.747Z debug: Jina API Usage:
{
  total_tokens: 10569,
}
2025-08-29T15:42:55.927Z error: Error scraping https://www.gwr.com/stations-and-destinations/popular-routes/london-to-reading: Firecrawl API request failed: timeout of 7500ms exceede... [truncated]
2025-08-29T15:42:55.927Z error: Error scraping https://www.gwr.com/stations-and-destinations/popular-routes/london-to-reading:
2025-08-29T15:42:55.927Z error: Error scraping https://www.thetrainline.com/train-times/london-euston-to-reading: Firecrawl API request failed: timeout of 7500ms exceeded
2025-08-29T15:42:55.928Z error: Error scraping https://www.thetrainline.com/train-times/london-euston-to-reading:
2025-08-29T15:42:56.010Z debug: Reranking 309 chunks with Jina
2025-08-29T15:42:56.656Z debug: Jina API Model: jina-reranker-v2-base-multilingual
2025-08-29T15:42:56.656Z debug: Jina API Usage:
{
  total_tokens: 10668,
}
2025-08-29T15:43:04.905Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T15:43:04.914Z debug: [AgentController] Request closed
2025-08-29T15:43:04.919Z debug: [AgentController] Performing cleanup
2025-08-29T15:43:04.919Z debug: [AgentController] Cleaning up abort controller
2025-08-29T15:43:04.919Z debug: [AgentController] Cleanup completed
2025-08-29T15:57:09.241Z debug: [AgentController] Request aborted on close
2025-08-29T15:57:09.241Z debug: [BaseClient] Loading history:
{
  conversationId: "78bf277d-2eab-4fae-b61e-df5d3c50bedf",
  parentMessageId: "4061524e-e2ec-42ff-a8a6-307a2737b6ac",
}
2025-08-29T15:57:09.245Z debug: [AgentClient] Injected MCP instructions for servers:
["\"d1-database\"","\"prompt-instructions\""]
2025-08-29T15:57:09.245Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 163726,
  maxContextTokens: 180000,
}
2025-08-29T15:57:09.245Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 163726,
  maxContextTokens: 180000,
}
2025-08-29T15:57:09.245Z debug: [BaseClient] tokenCountMap:
{
  79fc7ca8-6531-4119-a1b4-54c51c4b0739: 8,
  588326fd-b0e0-4944-bbc7-53adf4077c88: 283,
  568063f6-0d14-45eb-83d9-4d5c68363b0e: 15,
  b4d3e636-55b5-427d-b206-11f599cca584: 935,
  138f0d31-70b6-4ff9-9393-a78fc3ab3815: 16,
  49423686-e0f6-45e0-b6c4-c8f688c7381a: 1982,
  ed339cab-96da-4f73-b933-061b33ef1a6a: 15,
  85450762-cad8-4729-8c81-de33caddfcf5: 4589,
  9989f416-cbdb-4f0d-bb92-94bf1d49e0a6: 16,
  be09b2af-8416-478c-9025-c6d1eac717e8: 3999,
  f31b3809-c372-40ef-bac4-f80c6e51044c: 13,
  4061524e-e2ec-42ff-a8a6-307a2737b6ac: 4387,
  b307cd42-7061-4e6f-9349-222ebbde1dfb: 13,
}
2025-08-29T15:57:09.245Z debug: [BaseClient]
{
  promptTokens: 16274,
  remainingContextTokens: 163726,
  payloadSize: 13,
  maxContextTokens: 180000,
}
2025-08-29T15:57:09.246Z debug: [BaseClient] tokenCountMap
{
  79fc7ca8-6531-4119-a1b4-54c51c4b0739: 8,
  588326fd-b0e0-4944-bbc7-53adf4077c88: 283,
  568063f6-0d14-45eb-83d9-4d5c68363b0e: 15,
  b4d3e636-55b5-427d-b206-11f599cca584: 935,
  138f0d31-70b6-4ff9-9393-a78fc3ab3815: 16,
  49423686-e0f6-45e0-b6c4-c8f688c7381a: 1982,
  ed339cab-96da-4f73-b933-061b33ef1a6a: 15,
  85450762-cad8-4729-8c81-de33caddfcf5: 4589,
  9989f416-cbdb-4f0d-bb92-94bf1d49e0a6: 16,
  be09b2af-8416-478c-9025-c6d1eac717e8: 3999,
  f31b3809-c372-40ef-bac4-f80c6e51044c: 13,
  4061524e-e2ec-42ff-a8a6-307a2737b6ac: 4387,
  b307cd42-7061-4e6f-9349-222ebbde1dfb: 13,
}
2025-08-29T15:57:09.246Z debug: [BaseClient] userMessage
{
  messageId: "b307cd42-7061-4e6f-9349-222ebbde1dfb",
  parentMessageId: "4061524e-e2ec-42ff-a8a6-307a2737b6ac",
  conversationId: "78bf277d-2eab-4fae-b61e-df5d3c50bedf",
  sender: "User",
  text: "how far is it from London to Reading?",
  isCreatedByUser: true,
  tokenCount: 13,
}
2025-08-29T15:57:09.627Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T15:57:16.619Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T15:57:16.629Z debug: [AgentController] Request closed
2025-08-29T15:57:16.636Z debug: [AgentController] Performing cleanup
2025-08-29T15:57:16.636Z debug: [AgentController] Cleaning up abort controller
2025-08-29T15:57:16.637Z debug: [AgentController] Cleanup completed
2025-08-29T15:57:33.207Z debug: [AgentController] Request aborted on close
2025-08-29T15:57:33.207Z debug: [BaseClient] Loading history:
{
  conversationId: "78bf277d-2eab-4fae-b61e-df5d3c50bedf",
  parentMessageId: "3c4f3269-91a4-49f4-90c3-4c0ce6872296",
}
2025-08-29T15:57:33.211Z debug: [AgentClient] Injected MCP instructions for servers:
["\"d1-database\"","\"prompt-instructions\""]
2025-08-29T15:57:33.211Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 163633,
  maxContextTokens: 180000,
}
2025-08-29T15:57:33.211Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 163633,
  maxContextTokens: 180000,
}
2025-08-29T15:57:33.211Z debug: [BaseClient] tokenCountMap:
{
  79fc7ca8-6531-4119-a1b4-54c51c4b0739: 8,
  588326fd-b0e0-4944-bbc7-53adf4077c88: 283,
  568063f6-0d14-45eb-83d9-4d5c68363b0e: 15,
  b4d3e636-55b5-427d-b206-11f599cca584: 935,
  138f0d31-70b6-4ff9-9393-a78fc3ab3815: 16,
  49423686-e0f6-45e0-b6c4-c8f688c7381a: 1982,
  ed339cab-96da-4f73-b933-061b33ef1a6a: 15,
  85450762-cad8-4729-8c81-de33caddfcf5: 4589,
  9989f416-cbdb-4f0d-bb92-94bf1d49e0a6: 16,
  be09b2af-8416-478c-9025-c6d1eac717e8: 3999,
  f31b3809-c372-40ef-bac4-f80c6e51044c: 13,
  4061524e-e2ec-42ff-a8a6-307a2737b6ac: 4387,
  b307cd42-7061-4e6f-9349-222ebbde1dfb: 13,
  3c4f3269-91a4-49f4-90c3-4c0ce6872296: 88,
  7b656ddf-c959-47a2-b819-a4eee129c022: 5,
}
2025-08-29T15:57:33.212Z debug: [BaseClient]
{
  promptTokens: 16367,
  remainingContextTokens: 163633,
  payloadSize: 15,
  maxContextTokens: 180000,
}
2025-08-29T15:57:33.212Z debug: [BaseClient] tokenCountMap
{
  79fc7ca8-6531-4119-a1b4-54c51c4b0739: 8,
  588326fd-b0e0-4944-bbc7-53adf4077c88: 283,
  568063f6-0d14-45eb-83d9-4d5c68363b0e: 15,
  b4d3e636-55b5-427d-b206-11f599cca584: 935,
  138f0d31-70b6-4ff9-9393-a78fc3ab3815: 16,
  49423686-e0f6-45e0-b6c4-c8f688c7381a: 1982,
  ed339cab-96da-4f73-b933-061b33ef1a6a: 15,
  85450762-cad8-4729-8c81-de33caddfcf5: 4589,
  9989f416-cbdb-4f0d-bb92-94bf1d49e0a6: 16,
  be09b2af-8416-478c-9025-c6d1eac717e8: 3999,
  f31b3809-c372-40ef-bac4-f80c6e51044c: 13,
  4061524e-e2ec-42ff-a8a6-307a2737b6ac: 4387,
  b307cd42-7061-4e6f-9349-222ebbde1dfb: 13,
  3c4f3269-91a4-49f4-90c3-4c0ce6872296: 88,
  7b656ddf-c959-47a2-b819-a4eee129c022: 5,
}
2025-08-29T15:57:33.212Z debug: [BaseClient] userMessage
{
  messageId: "7b656ddf-c959-47a2-b819-a4eee129c022",
  parentMessageId: "3c4f3269-91a4-49f4-90c3-4c0ce6872296",
  conversationId: "78bf277d-2eab-4fae-b61e-df5d3c50bedf",
  sender: "User",
  text: "yes",
  isCreatedByUser: true,
  tokenCount: 5,
}
2025-08-29T15:57:33.421Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T15:57:43.366Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T15:57:43.374Z debug: [AgentController] Request closed
2025-08-29T15:57:43.378Z debug: [AgentController] Performing cleanup
2025-08-29T15:57:43.378Z debug: [AgentController] Cleaning up abort controller
2025-08-29T15:57:43.378Z debug: [AgentController] Cleanup completed
2025-08-29T15:58:57.395Z debug: [AgentController] Request aborted on close
2025-08-29T15:58:57.396Z debug: [BaseClient] Loading history:
{
  conversationId: "78bf277d-2eab-4fae-b61e-df5d3c50bedf",
  parentMessageId: "06205596-08d9-44e3-8a15-c2d8ab4849fa",
}
2025-08-29T15:58:57.400Z debug: [AgentClient] Injected MCP instructions for servers:
["\"d1-database\"","\"prompt-instructions\""]
2025-08-29T15:58:57.400Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 163275,
  maxContextTokens: 180000,
}
2025-08-29T15:58:57.400Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 163275,
  maxContextTokens: 180000,
}
2025-08-29T15:58:57.400Z debug: [BaseClient] tokenCountMap:
{
  79fc7ca8-6531-4119-a1b4-54c51c4b0739: 8,
  588326fd-b0e0-4944-bbc7-53adf4077c88: 283,
  568063f6-0d14-45eb-83d9-4d5c68363b0e: 15,
  b4d3e636-55b5-427d-b206-11f599cca584: 935,
  138f0d31-70b6-4ff9-9393-a78fc3ab3815: 16,
  49423686-e0f6-45e0-b6c4-c8f688c7381a: 1982,
  ed339cab-96da-4f73-b933-061b33ef1a6a: 15,
  85450762-cad8-4729-8c81-de33caddfcf5: 4589,
  9989f416-cbdb-4f0d-bb92-94bf1d49e0a6: 16,
  be09b2af-8416-478c-9025-c6d1eac717e8: 3999,
  f31b3809-c372-40ef-bac4-f80c6e51044c: 13,
  4061524e-e2ec-42ff-a8a6-307a2737b6ac: 4387,
  b307cd42-7061-4e6f-9349-222ebbde1dfb: 13,
  3c4f3269-91a4-49f4-90c3-4c0ce6872296: 88,
  7b656ddf-c959-47a2-b819-a4eee129c022: 5,
  06205596-08d9-44e3-8a15-c2d8ab4849fa: 308,
  fd8b03ad-8593-4db4-8dd6-d9253454af07: 50,
}
2025-08-29T15:58:57.400Z debug: [BaseClient]
{
  promptTokens: 16725,
  remainingContextTokens: 163275,
  payloadSize: 17,
  maxContextTokens: 180000,
}
2025-08-29T15:58:57.402Z debug: [BaseClient] tokenCountMap
{
  79fc7ca8-6531-4119-a1b4-54c51c4b0739: 8,
  588326fd-b0e0-4944-bbc7-53adf4077c88: 283,
  568063f6-0d14-45eb-83d9-4d5c68363b0e: 15,
  b4d3e636-55b5-427d-b206-11f599cca584: 935,
  138f0d31-70b6-4ff9-9393-a78fc3ab3815: 16,
  49423686-e0f6-45e0-b6c4-c8f688c7381a: 1982,
  ed339cab-96da-4f73-b933-061b33ef1a6a: 15,
  85450762-cad8-4729-8c81-de33caddfcf5: 4589,
  9989f416-cbdb-4f0d-bb92-94bf1d49e0a6: 16,
  be09b2af-8416-478c-9025-c6d1eac717e8: 3999,
  f31b3809-c372-40ef-bac4-f80c6e51044c: 13,
  4061524e-e2ec-42ff-a8a6-307a2737b6ac: 4387,
  b307cd42-7061-4e6f-9349-222ebbde1dfb: 13,
  3c4f3269-91a4-49f4-90c3-4c0ce6872296: 88,
  7b656ddf-c959-47a2-b819-a4eee129c022: 5,
  06205596-08d9-44e3-8a15-c2d8ab4849fa: 308,
  fd8b03ad-8593-4db4-8dd6-d9253454af07: 50,
}
2025-08-29T15:58:57.402Z debug: [BaseClient] userMessage
{
  messageId: "fd8b03ad-8593-4db4-8dd6-d9253454af07",
  parentMessageId: "06205596-08d9-44e3-8a15-c2d8ab4849fa",
  conversationId: "78bf277d-2eab-4fae-b61e-df5d3c50bedf",
  sender: "User",
  text: "No. Tell me what Viator tour and excursion options are available in Birmingham 9/25/2025 that might ... [truncated]",
  isCreatedByUser: true,
  tokenCount: 50,
}
2025-08-29T15:58:57.814Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T15:59:04.584Z info: [onSearchResults] user: 68b1ababa6d361e541dc7c03 | thread_id: 78bf277d-2eab-4fae-b61e-df5d3c50bedf | run_id: 3fda104d-0745-464f-8746-862f8285e835
2025-08-29T15:59:04.585Z debug: Scraping 5 links with Firecrawl
2025-08-29T15:59:12.099Z error: Error scraping https://www.viator.com/en-GB/Birmingham/d22776-ttd: Firecrawl API request failed: timeout of 7500ms exceeded
2025-08-29T15:59:12.099Z error: Error scraping https://www.viator.com/en-GB/Birmingham/d22776-ttd:
2025-08-29T15:59:12.100Z error: Error scraping https://www.viator.com/en-GB/England-tours/Horseback-Riding/d731-g9-c26032: Firecrawl API request failed: timeout of 7500ms exceeded
2025-08-29T15:59:12.100Z error: Error scraping https://www.viator.com/en-GB/England-tours/Horseback-Riding/d731-g9-c26032:
2025-08-29T15:59:12.101Z error: Error scraping https://www.tripadvisor.com/Attraction_Review-g187443-d2587905-Reviews-Horse_Carriage_Tour-Seville_Province_of_Seville_Andalucia.html: ... [truncated]
2025-08-29T15:59:12.101Z error: Error scraping https://www.tripadvisor.com/Attraction_Review-g187443-d2587905-Reviews-Horse_Carriage_Tour-Seville_Province_of_Seville_Andalucia.html:
2025-08-29T15:59:12.103Z error: Error scraping https://www.viator.com/West-Midlands/d22392: Firecrawl API request failed: timeout of 7500ms exceeded
2025-08-29T15:59:12.103Z error: Error scraping https://www.viator.com/West-Midlands/d22392:
2025-08-29T15:59:12.103Z error: Error scraping https://www.viator.com/Birmingham/d22776: Firecrawl API request failed: timeout of 7500ms exceeded
2025-08-29T15:59:12.103Z error: Error scraping https://www.viator.com/Birmingham/d22776:
2025-08-29T15:59:18.270Z info: [onSearchResults] user: 68b1ababa6d361e541dc7c03 | thread_id: 78bf277d-2eab-4fae-b61e-df5d3c50bedf | run_id: 3fda104d-0745-464f-8746-862f8285e835
2025-08-29T15:59:18.271Z debug: Scraping 5 links with Firecrawl
2025-08-29T15:59:25.780Z error: Error scraping https://www.tripadvisor.com/Attraction_Review-g1759238-d7080075-Reviews-Museum_Of_The_Horse-Tuxford_Nottinghamshire_England.html: Firec... [truncated]
2025-08-29T15:59:25.780Z error: Error scraping https://www.tripadvisor.com/Attraction_Review-g1759238-d7080075-Reviews-Museum_Of_The_Horse-Tuxford_Nottinghamshire_England.html:
2025-08-29T15:59:25.780Z error: Error scraping https://www.tripadvisor.com/Attractions-g186401-Activities-c61-t62-West_Midlands_England.html: Firecrawl API request failed: timeout of... [truncated]
2025-08-29T15:59:25.780Z error: Error scraping https://www.tripadvisor.com/Attractions-g186401-Activities-c61-t62-West_Midlands_England.html:
2025-08-29T15:59:25.781Z error: Error scraping https://www.bpiht.co.uk/: Firecrawl API request failed: timeout of 7500ms exceeded
2025-08-29T15:59:25.781Z error: Error scraping https://www.bpiht.co.uk/:
2025-08-29T15:59:25.781Z error: Error scraping https://www.horsejournals.com/popular/history-heritage/horse-museum-bucket-list: Firecrawl API request failed: timeout of 7500ms exceed... [truncated]
2025-08-29T15:59:25.781Z error: Error scraping https://www.horsejournals.com/popular/history-heritage/horse-museum-bucket-list:
2025-08-29T15:59:25.782Z error: Error scraping https://museumofthehorse.co.uk/the-collections/: Firecrawl API request failed: timeout of 7500ms exceeded
2025-08-29T15:59:25.782Z error: Error scraping https://museumofthehorse.co.uk/the-collections/:
2025-08-29T15:59:31.889Z info: [onSearchResults] user: 68b1ababa6d361e541dc7c03 | thread_id: 78bf277d-2eab-4fae-b61e-df5d3c50bedf | run_id: 3fda104d-0745-464f-8746-862f8285e835
2025-08-29T15:59:31.890Z debug: Scraping 5 links with Firecrawl
2025-08-29T15:59:31.987Z error: Error scraping https://www.horseware.com/en-gb/blog/horse-shows-to-attend-this-year?srsltid=AfmBOoos5-mE8HV-av_KaZdOWWGJOn7ldaZKltHpGsoBkUvA2AKgYXw8: ... [truncated]
2025-08-29T15:59:31.987Z error: Error scraping https://www.horseware.com/en-gb/blog/horse-shows-to-attend-this-year?srsltid=AfmBOoos5-mE8HV-av_KaZdOWWGJOn7ldaZKltHpGsoBkUvA2AKgYXw8:
2025-08-29T15:59:32.024Z error: Error scraping https://www.tripadvisor.com/Attraction_Review-g190732-d8820170-Reviews-or30-Burghley_Horse_Trials-Stamford_Lincolnshire_England.html: F... [truncated]
2025-08-29T15:59:32.025Z error: Error scraping https://www.tripadvisor.com/Attraction_Review-g190732-d8820170-Reviews-or30-Burghley_Horse_Trials-Stamford_Lincolnshire_England.html:
2025-08-29T15:59:32.034Z error: Error scraping https://www.globetrotting.com.au/horse-riding-holidays/the-cotswolds-ride-england/: Firecrawl API request failed: Request failed with s... [truncated]
2025-08-29T15:59:32.035Z error: Error scraping https://www.globetrotting.com.au/horse-riding-holidays/the-cotswolds-ride-england/:
2025-08-29T15:59:36.502Z error: Error scraping https://wetwednesdays.co.uk/magazine/the-top-equestrian-events-uk-2025/?srsltid=AfmBOopPORGbxIKcd1tXuPNnVC14snCEYN_ihBmFLwf7avgWWYDus_q... [truncated]
2025-08-29T15:59:36.502Z error: Error scraping https://wetwednesdays.co.uk/magazine/the-top-equestrian-events-uk-2025/?srsltid=AfmBOopPORGbxIKcd1tXuPNnVC14snCEYN_ihBmFLwf7avgWWYDus_q... [truncated]
2025-08-29T15:59:36.557Z error: Error scraping https://www.equus-journeys.com/riding-holidays/england: Firecrawl API request failed: Request failed with status code 429
2025-08-29T15:59:36.557Z error: Error scraping https://www.equus-journeys.com/riding-holidays/england:
2025-08-29T15:59:41.413Z debug: [FinalizationRegistry] Cleaning up client for user 68b1ababa6d361e541dc7c03
2025-08-29T15:59:41.413Z debug: [FinalizationRegistry] Cleaning up client for user 68b1ababa6d361e541dc7c03
2025-08-29T15:59:41.414Z debug: [FinalizationRegistry] Cleaning up client for user 68b1ababa6d361e541dc7c03
2025-08-29T15:59:49.807Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T15:59:49.822Z debug: [AgentController] Request closed
2025-08-29T15:59:49.827Z debug: [AgentController] Performing cleanup
2025-08-29T15:59:49.827Z debug: [AgentController] Cleaning up abort controller
2025-08-29T15:59:49.827Z debug: [AgentController] Cleanup completed
2025-08-29T16:35:20.881Z info: Mongo Connection options
2025-08-29T16:35:20.883Z info: {
  "bufferCommands": false,
  "autoIndex": false,
  "autoCreate": false
}
2025-08-29T16:35:20.923Z info: Connected to MongoDB
2025-08-29T16:35:20.923Z info: [indexSync] Starting index synchronization check...
2025-08-29T16:35:20.996Z info: [getAppConfig] App configuration not initialized. Initializing AppService...
2025-08-29T16:35:21.005Z info: Custom config file loaded:
2025-08-29T16:35:21.005Z info: {
  "version": "1.0.0",
  "cache": true,
  "endpoints": {
    "custom": [
      {
        "name": "Claude Haiku (Cost Effective)",
        "apiKey": "... [truncated]
2025-08-29T16:35:21.006Z debug: Custom config:
{
  version: "1.0.0",
  cache: true,
    // 3 custom(s)
    endpoints.custom: [{"name":"Claude Haiku (Cost Effective)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthr... [truncated],{"name":"Claude Sonnet (Premium)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthropic.c... [truncated],{"name":"GPT-4 (Fallback)","apiKey":"${OPENAI_API_KEY}","baseURL":"https://api.openai.com/v1","model... [truncated]],
    0.name: "Claude Haiku (Cost Effective)",
    0.apiKey: "${ANTHROPIC_API_KEY}",
    0.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-haiku-20241022"],
    default.0: "claude-3-5-haiku-20241022",
    0.modelDisplayLabel: "üí∞ Haiku - Economical ($0.25/1M tokens)",
    0.titleConvo: true,
    0.titleModel: "claude-3-5-haiku-20241022",
    1.name: "Claude Sonnet (Premium)",
    1.apiKey: "${ANTHROPIC_API_KEY}",
    1.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-sonnet-20241022"],
    default.0: "claude-3-5-sonnet-20241022",
    1.modelDisplayLabel: "‚≠ê Sonnet - Premium Planning ($3.00/1M tokens)",
    1.titleConvo: true,
    1.titleModel: "claude-3-5-sonnet-20241022",
    2.name: "GPT-4 (Fallback)",
    2.apiKey: "${OPENAI_API_KEY}",
    2.baseURL: "https://api.openai.com/v1",
    // 1 default(s)
    models.default: ["gpt-4-turbo-preview"],
    default.0: "gpt-4-turbo-preview",
    2.modelDisplayLabel: "üîÑ GPT-4 - Fallback ($10.00/1M tokens)",
    2.titleConvo: true,
    d1-database.command: "npx",
    // 3 arg(s)
    d1-database.args: ["-y","mcp-remote","https://d1-database-improved.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://d1-database-improved.somotravel.workers.dev/sse",
    d1-database.timeout: 30000,
    d1-database.env: [object Object],
    d1-database.description: "Access to client and trip database with comprehensive travel data",
    d1-database.serverInstructions: "Tool selection guidance:\n- Use this server for data lookups and persistence:\n  ‚Ä¢ get_anything: broad... [truncated]",
    prompt-instructions.command: "npx",
    // 3 arg(s)
    prompt-instructions.args: ["-y","mcp-remote","https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse",
    prompt-instructions.timeout: 30000,
    prompt-instructions.env: [object Object],
    prompt-instructions.description: "Travel planning workflows, instructions, and structured processes",
    prompt-instructions.serverInstructions: "Tool selection guidance:\n- Use this server to manage workflow state and conversation flow.\n  ‚Ä¢ trave... [truncated]",
    privacyPolicy.externalUrl: "https://travelops.ai/privacy",
    termsOfService.externalUrl: "https://travelops.ai/terms",
}
2025-08-29T16:35:21.008Z debug: Web search serperApiKey: Using environment variable SERPER_API_KEY (not set in environment, user provided value)
2025-08-29T16:35:21.009Z debug: Web search searxngInstanceUrl: Using environment variable SEARXNG_INSTANCE_URL (not set in environment, user provided value)
2025-08-29T16:35:21.009Z debug: Web search searxngApiKey: Using environment variable SEARXNG_API_KEY (not set in environment, user provided value)
2025-08-29T16:35:21.009Z debug: Web search firecrawlApiKey: Using environment variable FIRECRAWL_API_KEY (not set in environment, user provided value)
2025-08-29T16:35:21.009Z debug: Web search firecrawlApiUrl: Using environment variable FIRECRAWL_API_URL (not set in environment, user provided value)
2025-08-29T16:35:21.009Z debug: Web search jinaApiKey: Using environment variable JINA_API_KEY (not set in environment, user provided value)
2025-08-29T16:35:21.009Z debug: Web search cohereApiKey: Using environment variable COHERE_API_KEY (not set in environment, user provided value)
2025-08-29T16:35:21.009Z warn: Default value for CREDS_KEY is being used.
2025-08-29T16:35:21.009Z warn: Default value for CREDS_IV is being used.
2025-08-29T16:35:21.009Z warn: Default value for JWT_SECRET is being used.
2025-08-29T16:35:21.009Z warn: Default value for JWT_REFRESH_SECRET is being used.
2025-08-29T16:35:21.009Z info: Please replace any default secret values.
2025-08-29T16:35:21.010Z info: ‚Äã

    For your convenience, use this tool to generate your own secret values:
    https://www.librechat.ai/toolkit/creds_generator

    ‚Äã
2025-08-29T16:35:21.010Z warn: RAG API is either not running or not reachable at undefined, you may experience errors with file uploads.
2025-08-29T16:35:21.024Z info: Turnstile is DISABLED (no siteKey provided).
2025-08-29T16:35:21.025Z info: Outdated Config version: 1.0.0
Latest version: 1.2.8

      Check out the Config changelogs for the latest options and features added.

      https://... [truncated]
2025-08-29T16:35:21.031Z debug: Role 'USER': Preserving existing permissions for 'PROMPTS'
2025-08-29T16:35:21.031Z debug: Role 'USER': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T16:35:21.031Z debug: Role 'USER': Preserving existing permissions for 'MEMORIES'
2025-08-29T16:35:21.031Z debug: Role 'USER': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T16:35:21.031Z debug: Role 'USER': Preserving existing permissions for 'AGENTS'
2025-08-29T16:35:21.031Z debug: Role 'USER': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T16:35:21.031Z debug: Role 'USER': Preserving existing permissions for 'RUN_CODE'
2025-08-29T16:35:21.031Z debug: Role 'USER': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T16:35:21.031Z debug: Role 'USER': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T16:35:21.031Z debug: Role 'USER': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T16:35:21.031Z debug: Role 'USER': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T16:35:21.031Z debug: Role 'USER': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T16:35:21.033Z debug: Role 'ADMIN': Preserving existing permissions for 'PROMPTS'
2025-08-29T16:35:21.034Z debug: Role 'ADMIN': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T16:35:21.034Z debug: Role 'ADMIN': Preserving existing permissions for 'MEMORIES'
2025-08-29T16:35:21.034Z debug: Role 'ADMIN': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T16:35:21.034Z debug: Role 'ADMIN': Preserving existing permissions for 'AGENTS'
2025-08-29T16:35:21.034Z debug: Role 'ADMIN': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T16:35:21.034Z debug: Role 'ADMIN': Preserving existing permissions for 'RUN_CODE'
2025-08-29T16:35:21.034Z debug: Role 'ADMIN': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T16:35:21.034Z debug: Role 'ADMIN': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T16:35:21.034Z debug: Role 'ADMIN': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T16:35:21.034Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T16:35:21.034Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T16:35:21.048Z info: Server listening at http://localhost:3080
2025-08-29T16:35:21.093Z debug: [MCP][d1-database] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librech... [truncated]
2025-08-29T16:35:21.094Z debug: [MCP][prompt-instructions] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"... [truncated]
2025-08-29T16:35:21.177Z debug: [MEILI_SYNC:meili-index-sync] Creating initial flow state
2025-08-29T16:35:21.179Z error: [indexSync] error fetch failed
2025-08-29T16:35:22.015Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{}},"serverInfo":{"nam... [truncated]
2025-08-29T16:35:22.016Z debug: [MCP][d1-database] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T16:35:22.017Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T16:35:22.112Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{"listChanged"... [truncated]
2025-08-29T16:35:22.112Z debug: [MCP][prompt-instructions] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T16:35:22.112Z debug: [MCP][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T16:35:22.202Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T16:35:22.203Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T16:35:22.203Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T16:35:22.247Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T16:35:22.250Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T16:35:22.256Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T16:35:22.258Z debug: [MCP][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T16:35:22.259Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T16:35:22.291Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T16:35:22.292Z info: [MCP][d1-database] -------------------------------------------------‚îê
2025-08-29T16:35:22.292Z info: [MCP][d1-database] URL: undefined
2025-08-29T16:35:22.292Z info: [MCP][d1-database] OAuth Required: false
2025-08-29T16:35:22.293Z info: [MCP][d1-database] Capabilities: {"tools":{}}
2025-08-29T16:35:22.293Z info: [MCP][d1-database] Tools: health_check, update_activitylog_clients, reset_activitylog_from_trips, explore_database, get_anything, remember_context, bu... [truncated]
2025-08-29T16:35:22.293Z info: [MCP][d1-database] Server Instructions: Tool selection guidance:
- Use this server for data lookups and persistence:
  ‚Ä¢ get_anything: broad search fo... [truncated]
2025-08-29T16:35:22.293Z info: [MCP][d1-database] -------------------------------------------------‚îò
2025-08-29T16:35:22.322Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T16:35:22.323Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T16:35:22.368Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T16:35:22.369Z info: [MCP][prompt-instructions] -------------------------------------------------‚îê
2025-08-29T16:35:22.369Z info: [MCP][prompt-instructions] URL: undefined
2025-08-29T16:35:22.369Z info: [MCP][prompt-instructions] OAuth Required: false
2025-08-29T16:35:22.369Z info: [MCP][prompt-instructions] Capabilities: {"tools":{"listChanged":false}}
2025-08-29T16:35:22.370Z info: [MCP][prompt-instructions] Tools: get_instruction, list_instructions, create_instruction, update_instruction, get_instructions_by_confidence, set_verb... [truncated]
2025-08-29T16:35:22.370Z info: [MCP][prompt-instructions] Server Instructions: Tool selection guidance:
- Use this server to manage workflow state and conversation flow.
  ‚Ä¢ travel_... [truncated]
2025-08-29T16:35:22.370Z info: [MCP][prompt-instructions] -------------------------------------------------‚îò
2025-08-29T16:35:22.372Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T16:35:22.422Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T16:35:22.423Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T16:35:25.379Z info: Mongo Connection options
2025-08-29T16:35:25.381Z info: {
  "bufferCommands": false,
  "autoIndex": false,
  "autoCreate": false
}
2025-08-29T16:35:25.422Z info: Connected to MongoDB
2025-08-29T16:35:25.422Z info: [indexSync] Starting index synchronization check...
2025-08-29T16:35:25.483Z info: [getAppConfig] App configuration not initialized. Initializing AppService...
2025-08-29T16:35:25.492Z info: Custom config file loaded:
2025-08-29T16:35:25.492Z info: {
  "version": "1.0.0",
  "cache": true,
  "endpoints": {
    "custom": [
      {
        "name": "Claude Haiku (Cost Effective)",
        "apiKey": "... [truncated]
2025-08-29T16:35:25.492Z debug: Custom config:
{
  version: "1.0.0",
  cache: true,
    // 3 custom(s)
    endpoints.custom: [{"name":"Claude Haiku (Cost Effective)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthr... [truncated],{"name":"Claude Sonnet (Premium)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthropic.c... [truncated],{"name":"GPT-4 (Fallback)","apiKey":"${OPENAI_API_KEY}","baseURL":"https://api.openai.com/v1","model... [truncated]],
    0.name: "Claude Haiku (Cost Effective)",
    0.apiKey: "${ANTHROPIC_API_KEY}",
    0.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-haiku-20241022"],
    default.0: "claude-3-5-haiku-20241022",
    0.modelDisplayLabel: "üí∞ Haiku - Economical ($0.25/1M tokens)",
    0.titleConvo: true,
    0.titleModel: "claude-3-5-haiku-20241022",
    1.name: "Claude Sonnet (Premium)",
    1.apiKey: "${ANTHROPIC_API_KEY}",
    1.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-sonnet-20241022"],
    default.0: "claude-3-5-sonnet-20241022",
    1.modelDisplayLabel: "‚≠ê Sonnet - Premium Planning ($3.00/1M tokens)",
    1.titleConvo: true,
    1.titleModel: "claude-3-5-sonnet-20241022",
    2.name: "GPT-4 (Fallback)",
    2.apiKey: "${OPENAI_API_KEY}",
    2.baseURL: "https://api.openai.com/v1",
    // 1 default(s)
    models.default: ["gpt-4-turbo-preview"],
    default.0: "gpt-4-turbo-preview",
    2.modelDisplayLabel: "üîÑ GPT-4 - Fallback ($10.00/1M tokens)",
    2.titleConvo: true,
    d1-database.command: "npx",
    // 3 arg(s)
    d1-database.args: ["-y","mcp-remote","https://d1-database-improved.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://d1-database-improved.somotravel.workers.dev/sse",
    d1-database.timeout: 30000,
    d1-database.env: [object Object],
    d1-database.description: "Access to client and trip database with comprehensive travel data",
    d1-database.serverInstructions: "Tool selection guidance:\n- Use this server for data lookups and persistence:\n  ‚Ä¢ get_anything: broad... [truncated]",
    prompt-instructions.command: "npx",
    // 3 arg(s)
    prompt-instructions.args: ["-y","mcp-remote","https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse",
    prompt-instructions.timeout: 30000,
    prompt-instructions.env: [object Object],
    prompt-instructions.description: "Travel planning workflows, instructions, and structured processes",
    prompt-instructions.serverInstructions: "Tool selection guidance:\n- Use this server to manage workflow state and conversation flow.\n  ‚Ä¢ trave... [truncated]",
    privacyPolicy.externalUrl: "https://travelops.ai/privacy",
    termsOfService.externalUrl: "https://travelops.ai/terms",
}
2025-08-29T16:35:25.494Z debug: Web search serperApiKey: Using environment variable SERPER_API_KEY (not set in environment, user provided value)
2025-08-29T16:35:25.494Z debug: Web search searxngInstanceUrl: Using environment variable SEARXNG_INSTANCE_URL (not set in environment, user provided value)
2025-08-29T16:35:25.495Z debug: Web search searxngApiKey: Using environment variable SEARXNG_API_KEY (not set in environment, user provided value)
2025-08-29T16:35:25.495Z debug: Web search firecrawlApiKey: Using environment variable FIRECRAWL_API_KEY (not set in environment, user provided value)
2025-08-29T16:35:25.495Z debug: Web search firecrawlApiUrl: Using environment variable FIRECRAWL_API_URL (not set in environment, user provided value)
2025-08-29T16:35:25.495Z debug: Web search jinaApiKey: Using environment variable JINA_API_KEY (not set in environment, user provided value)
2025-08-29T16:35:25.495Z debug: Web search cohereApiKey: Using environment variable COHERE_API_KEY (not set in environment, user provided value)
2025-08-29T16:35:25.495Z warn: Default value for CREDS_KEY is being used.
2025-08-29T16:35:25.495Z warn: Default value for CREDS_IV is being used.
2025-08-29T16:35:25.495Z warn: Default value for JWT_SECRET is being used.
2025-08-29T16:35:25.495Z warn: Default value for JWT_REFRESH_SECRET is being used.
2025-08-29T16:35:25.495Z info: Please replace any default secret values.
2025-08-29T16:35:25.496Z info: ‚Äã

    For your convenience, use this tool to generate your own secret values:
    https://www.librechat.ai/toolkit/creds_generator

    ‚Äã
2025-08-29T16:35:25.496Z warn: RAG API is either not running or not reachable at undefined, you may experience errors with file uploads.
2025-08-29T16:35:25.506Z info: Turnstile is DISABLED (no siteKey provided).
2025-08-29T16:35:25.506Z info: Outdated Config version: 1.0.0
Latest version: 1.2.8

      Check out the Config changelogs for the latest options and features added.

      https://... [truncated]
2025-08-29T16:35:25.511Z debug: Role 'USER': Preserving existing permissions for 'PROMPTS'
2025-08-29T16:35:25.511Z debug: Role 'USER': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T16:35:25.511Z debug: Role 'USER': Preserving existing permissions for 'MEMORIES'
2025-08-29T16:35:25.511Z debug: Role 'USER': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T16:35:25.511Z debug: Role 'USER': Preserving existing permissions for 'AGENTS'
2025-08-29T16:35:25.511Z debug: Role 'USER': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T16:35:25.511Z debug: Role 'USER': Preserving existing permissions for 'RUN_CODE'
2025-08-29T16:35:25.511Z debug: Role 'USER': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T16:35:25.511Z debug: Role 'USER': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T16:35:25.512Z debug: Role 'USER': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T16:35:25.512Z debug: Role 'USER': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T16:35:25.512Z debug: Role 'USER': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T16:35:25.514Z debug: Role 'ADMIN': Preserving existing permissions for 'PROMPTS'
2025-08-29T16:35:25.514Z debug: Role 'ADMIN': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T16:35:25.514Z debug: Role 'ADMIN': Preserving existing permissions for 'MEMORIES'
2025-08-29T16:35:25.514Z debug: Role 'ADMIN': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T16:35:25.514Z debug: Role 'ADMIN': Preserving existing permissions for 'AGENTS'
2025-08-29T16:35:25.514Z debug: Role 'ADMIN': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T16:35:25.514Z debug: Role 'ADMIN': Preserving existing permissions for 'RUN_CODE'
2025-08-29T16:35:25.514Z debug: Role 'ADMIN': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T16:35:25.514Z debug: Role 'ADMIN': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T16:35:25.514Z debug: Role 'ADMIN': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T16:35:25.514Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T16:35:25.514Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T16:35:25.525Z info: Server listening at http://localhost:3080
2025-08-29T16:35:25.564Z debug: [MCP][d1-database] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librech... [truncated]
2025-08-29T16:35:25.565Z debug: [MCP][prompt-instructions] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"... [truncated]
2025-08-29T16:35:25.675Z debug: [MEILI_SYNC:meili-index-sync] Creating initial flow state
2025-08-29T16:35:25.680Z error: [indexSync] error fetch failed
2025-08-29T16:35:26.318Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{"listChanged"... [truncated]
2025-08-29T16:35:26.319Z debug: [MCP][prompt-instructions] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T16:35:26.320Z debug: [MCP][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T16:35:26.343Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{}},"serverInfo":{"nam... [truncated]
2025-08-29T16:35:26.343Z debug: [MCP][d1-database] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T16:35:26.343Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T16:35:26.443Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T16:35:26.443Z debug: [MCP][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T16:35:26.444Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T16:35:26.482Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T16:35:26.483Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T16:35:26.510Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T16:35:26.511Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T16:35:26.511Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T16:35:26.534Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T16:35:26.535Z info: [MCP][prompt-instructions] -------------------------------------------------‚îê
2025-08-29T16:35:26.535Z info: [MCP][prompt-instructions] URL: undefined
2025-08-29T16:35:26.535Z info: [MCP][prompt-instructions] OAuth Required: false
2025-08-29T16:35:26.535Z info: [MCP][prompt-instructions] Capabilities: {"tools":{"listChanged":false}}
2025-08-29T16:35:26.536Z info: [MCP][prompt-instructions] Tools: get_instruction, list_instructions, create_instruction, update_instruction, get_instructions_by_confidence, set_verb... [truncated]
2025-08-29T16:35:26.536Z info: [MCP][prompt-instructions] Server Instructions: Tool selection guidance:
- Use this server to manage workflow state and conversation flow.
  ‚Ä¢ travel_... [truncated]
2025-08-29T16:35:26.536Z info: [MCP][prompt-instructions] -------------------------------------------------‚îò
2025-08-29T16:35:26.554Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T16:35:26.555Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T16:35:26.596Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T16:35:26.598Z info: [MCP][d1-database] -------------------------------------------------‚îê
2025-08-29T16:35:26.599Z info: [MCP][d1-database] URL: undefined
2025-08-29T16:35:26.599Z info: [MCP][d1-database] OAuth Required: false
2025-08-29T16:35:26.600Z info: [MCP][d1-database] Capabilities: {"tools":{}}
2025-08-29T16:35:26.600Z info: [MCP][d1-database] Tools: health_check, update_activitylog_clients, reset_activitylog_from_trips, explore_database, get_anything, remember_context, bu... [truncated]
2025-08-29T16:35:26.600Z info: [MCP][d1-database] Server Instructions: Tool selection guidance:
- Use this server for data lookups and persistence:
  ‚Ä¢ get_anything: broad search fo... [truncated]
2025-08-29T16:35:26.600Z info: [MCP][d1-database] -------------------------------------------------‚îò
2025-08-29T16:35:26.602Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T16:35:26.641Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T16:35:26.642Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T16:35:26.683Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T16:35:26.689Z debug: Merged 33 app-level tools
2025-08-29T16:35:26.689Z info: MCP servers initialized successfully. Added 33 MCP tools.
2025-08-29T16:35:26.690Z debug: Checking if agent permissions migration is needed
2025-08-29T16:35:26.693Z debug: Collection already exists: aclentries
2025-08-29T16:35:26.709Z debug: Agent migration check completed
{
  totalToMigrate: 0,
  globalEditAccess: 0,
  globalViewAccess: 0,
  privateAgents: 0,
}
2025-08-29T16:35:26.711Z debug: Checking if prompt permissions migration is needed
2025-08-29T16:35:26.714Z debug: Collection already exists: aclentries
2025-08-29T16:35:26.728Z debug: Prompt migration check completed
{
  totalToMigrate: 0,
  globalViewAccess: 0,
  privateGroups: 0,
}
2025-08-29T16:35:37.203Z info: Mongo Connection options
2025-08-29T16:35:37.205Z info: {
  "bufferCommands": false,
  "autoIndex": false,
  "autoCreate": false
}
2025-08-29T16:35:37.246Z info: Connected to MongoDB
2025-08-29T16:35:37.246Z info: [indexSync] Starting index synchronization check...
2025-08-29T16:35:37.312Z info: [getAppConfig] App configuration not initialized. Initializing AppService...
2025-08-29T16:35:37.321Z info: Custom config file loaded:
2025-08-29T16:35:37.322Z info: {
  "version": "1.0.0",
  "cache": true,
  "endpoints": {
    "custom": [
      {
        "name": "Claude Haiku (Cost Effective)",
        "apiKey": "... [truncated]
2025-08-29T16:35:37.323Z debug: Custom config:
{
  version: "1.0.0",
  cache: true,
    // 3 custom(s)
    endpoints.custom: [{"name":"Claude Haiku (Cost Effective)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthr... [truncated],{"name":"Claude Sonnet (Premium)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthropic.c... [truncated],{"name":"GPT-4 (Fallback)","apiKey":"${OPENAI_API_KEY}","baseURL":"https://api.openai.com/v1","model... [truncated]],
    0.name: "Claude Haiku (Cost Effective)",
    0.apiKey: "${ANTHROPIC_API_KEY}",
    0.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-haiku-20241022"],
    default.0: "claude-3-5-haiku-20241022",
    0.modelDisplayLabel: "üí∞ Haiku - Economical ($0.25/1M tokens)",
    0.titleConvo: true,
    0.titleModel: "claude-3-5-haiku-20241022",
    1.name: "Claude Sonnet (Premium)",
    1.apiKey: "${ANTHROPIC_API_KEY}",
    1.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-sonnet-20241022"],
    default.0: "claude-3-5-sonnet-20241022",
    1.modelDisplayLabel: "‚≠ê Sonnet - Premium Planning ($3.00/1M tokens)",
    1.titleConvo: true,
    1.titleModel: "claude-3-5-sonnet-20241022",
    2.name: "GPT-4 (Fallback)",
    2.apiKey: "${OPENAI_API_KEY}",
    2.baseURL: "https://api.openai.com/v1",
    // 1 default(s)
    models.default: ["gpt-4-turbo-preview"],
    default.0: "gpt-4-turbo-preview",
    2.modelDisplayLabel: "üîÑ GPT-4 - Fallback ($10.00/1M tokens)",
    2.titleConvo: true,
    d1-database.command: "npx",
    // 3 arg(s)
    d1-database.args: ["-y","mcp-remote","https://d1-database-improved.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://d1-database-improved.somotravel.workers.dev/sse",
    d1-database.timeout: 30000,
    d1-database.env: [object Object],
    d1-database.description: "Access to client and trip database with comprehensive travel data",
    d1-database.serverInstructions: "Tool selection guidance:\n- Use this server for data lookups and persistence:\n  ‚Ä¢ get_anything: broad... [truncated]",
    prompt-instructions.command: "npx",
    // 3 arg(s)
    prompt-instructions.args: ["-y","mcp-remote","https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse",
    prompt-instructions.timeout: 30000,
    prompt-instructions.env: [object Object],
    prompt-instructions.description: "Travel planning workflows, instructions, and structured processes",
    prompt-instructions.serverInstructions: "Tool selection guidance:\n- Use this server to manage workflow state and conversation flow.\n  ‚Ä¢ trave... [truncated]",
    privacyPolicy.externalUrl: "https://travelops.ai/privacy",
    termsOfService.externalUrl: "https://travelops.ai/terms",
}
2025-08-29T16:35:37.325Z debug: Web search serperApiKey: Using environment variable SERPER_API_KEY (not set in environment, user provided value)
2025-08-29T16:35:37.325Z debug: Web search searxngInstanceUrl: Using environment variable SEARXNG_INSTANCE_URL (not set in environment, user provided value)
2025-08-29T16:35:37.325Z debug: Web search searxngApiKey: Using environment variable SEARXNG_API_KEY (not set in environment, user provided value)
2025-08-29T16:35:37.325Z debug: Web search firecrawlApiKey: Using environment variable FIRECRAWL_API_KEY (not set in environment, user provided value)
2025-08-29T16:35:37.325Z debug: Web search firecrawlApiUrl: Using environment variable FIRECRAWL_API_URL (not set in environment, user provided value)
2025-08-29T16:35:37.325Z debug: Web search jinaApiKey: Using environment variable JINA_API_KEY (not set in environment, user provided value)
2025-08-29T16:35:37.326Z debug: Web search cohereApiKey: Using environment variable COHERE_API_KEY (not set in environment, user provided value)
2025-08-29T16:35:37.326Z warn: Default value for CREDS_KEY is being used.
2025-08-29T16:35:37.326Z warn: Default value for CREDS_IV is being used.
2025-08-29T16:35:37.326Z warn: Default value for JWT_SECRET is being used.
2025-08-29T16:35:37.326Z warn: Default value for JWT_REFRESH_SECRET is being used.
2025-08-29T16:35:37.326Z info: Please replace any default secret values.
2025-08-29T16:35:37.326Z info: ‚Äã

    For your convenience, use this tool to generate your own secret values:
    https://www.librechat.ai/toolkit/creds_generator

    ‚Äã
2025-08-29T16:35:37.327Z warn: RAG API is either not running or not reachable at undefined, you may experience errors with file uploads.
2025-08-29T16:35:37.339Z info: Turnstile is DISABLED (no siteKey provided).
2025-08-29T16:35:37.340Z info: Outdated Config version: 1.0.0
Latest version: 1.2.8

      Check out the Config changelogs for the latest options and features added.

      https://... [truncated]
2025-08-29T16:35:37.345Z debug: Role 'USER': Preserving existing permissions for 'PROMPTS'
2025-08-29T16:35:37.345Z debug: Role 'USER': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T16:35:37.345Z debug: Role 'USER': Preserving existing permissions for 'MEMORIES'
2025-08-29T16:35:37.345Z debug: Role 'USER': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T16:35:37.345Z debug: Role 'USER': Preserving existing permissions for 'AGENTS'
2025-08-29T16:35:37.345Z debug: Role 'USER': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T16:35:37.345Z debug: Role 'USER': Preserving existing permissions for 'RUN_CODE'
2025-08-29T16:35:37.345Z debug: Role 'USER': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T16:35:37.345Z debug: Role 'USER': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T16:35:37.346Z debug: Role 'USER': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T16:35:37.346Z debug: Role 'USER': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T16:35:37.346Z debug: Role 'USER': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T16:35:37.348Z debug: Role 'ADMIN': Preserving existing permissions for 'PROMPTS'
2025-08-29T16:35:37.348Z debug: Role 'ADMIN': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T16:35:37.348Z debug: Role 'ADMIN': Preserving existing permissions for 'MEMORIES'
2025-08-29T16:35:37.348Z debug: Role 'ADMIN': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T16:35:37.349Z debug: Role 'ADMIN': Preserving existing permissions for 'AGENTS'
2025-08-29T16:35:37.349Z debug: Role 'ADMIN': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T16:35:37.349Z debug: Role 'ADMIN': Preserving existing permissions for 'RUN_CODE'
2025-08-29T16:35:37.349Z debug: Role 'ADMIN': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T16:35:37.349Z debug: Role 'ADMIN': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T16:35:37.349Z debug: Role 'ADMIN': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T16:35:37.349Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T16:35:37.349Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T16:35:37.360Z info: Server listening at http://localhost:3080
2025-08-29T16:35:37.402Z debug: [MCP][d1-database] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librech... [truncated]
2025-08-29T16:35:37.402Z debug: [MCP][prompt-instructions] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"... [truncated]
2025-08-29T16:35:37.498Z debug: [MEILI_SYNC:meili-index-sync] Creating initial flow state
2025-08-29T16:35:37.502Z error: [indexSync] error fetch failed
2025-08-29T16:35:38.126Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{"listChanged"... [truncated]
2025-08-29T16:35:38.127Z debug: [MCP][prompt-instructions] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T16:35:38.129Z debug: [MCP][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T16:35:38.134Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{}},"serverInfo":{"nam... [truncated]
2025-08-29T16:35:38.134Z debug: [MCP][d1-database] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T16:35:38.136Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T16:35:38.258Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T16:35:38.259Z debug: [MCP][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T16:35:38.260Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T16:35:38.273Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T16:35:38.273Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T16:35:38.273Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T16:35:38.308Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T16:35:38.309Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T16:35:38.326Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T16:35:38.328Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T16:35:38.347Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T16:35:38.348Z info: [MCP][prompt-instructions] -------------------------------------------------‚îê
2025-08-29T16:35:38.348Z info: [MCP][prompt-instructions] URL: undefined
2025-08-29T16:35:38.348Z info: [MCP][prompt-instructions] OAuth Required: false
2025-08-29T16:35:38.348Z info: [MCP][prompt-instructions] Capabilities: {"tools":{"listChanged":false}}
2025-08-29T16:35:38.349Z info: [MCP][prompt-instructions] Tools: get_instruction, list_instructions, create_instruction, update_instruction, get_instructions_by_confidence, set_verb... [truncated]
2025-08-29T16:35:38.349Z info: [MCP][prompt-instructions] Server Instructions: Tool selection guidance:
- Use this server to manage workflow state and conversation flow.
  ‚Ä¢ travel_... [truncated]
2025-08-29T16:35:38.349Z info: [MCP][prompt-instructions] -------------------------------------------------‚îò
2025-08-29T16:35:38.368Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T16:35:38.369Z info: [MCP][d1-database] -------------------------------------------------‚îê
2025-08-29T16:35:38.369Z info: [MCP][d1-database] URL: undefined
2025-08-29T16:35:38.370Z info: [MCP][d1-database] OAuth Required: false
2025-08-29T16:35:38.370Z info: [MCP][d1-database] Capabilities: {"tools":{}}
2025-08-29T16:35:38.370Z info: [MCP][d1-database] Tools: health_check, update_activitylog_clients, reset_activitylog_from_trips, explore_database, get_anything, remember_context, bu... [truncated]
2025-08-29T16:35:38.370Z info: [MCP][d1-database] Server Instructions: Tool selection guidance:
- Use this server for data lookups and persistence:
  ‚Ä¢ get_anything: broad search fo... [truncated]
2025-08-29T16:35:38.370Z info: [MCP][d1-database] -------------------------------------------------‚îò
2025-08-29T16:35:38.372Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T16:35:38.412Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T16:35:38.413Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T16:35:38.468Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T16:35:38.472Z debug: Merged 33 app-level tools
2025-08-29T16:35:38.472Z info: MCP servers initialized successfully. Added 33 MCP tools.
2025-08-29T16:35:38.473Z debug: Checking if agent permissions migration is needed
2025-08-29T16:35:38.477Z debug: Collection already exists: aclentries
2025-08-29T16:35:38.491Z debug: Agent migration check completed
{
  totalToMigrate: 0,
  globalEditAccess: 0,
  globalViewAccess: 0,
  privateAgents: 0,
}
2025-08-29T16:35:38.492Z debug: Checking if prompt permissions migration is needed
2025-08-29T16:35:38.495Z debug: Collection already exists: aclentries
2025-08-29T16:35:38.505Z debug: Prompt migration check completed
{
  totalToMigrate: 0,
  globalViewAccess: 0,
  privateGroups: 0,
}
2025-08-29T17:06:00.825Z info: Cleaning up FlowStateManager intervals...
2025-08-29T17:06:08.188Z info: Mongo Connection options
2025-08-29T17:06:08.191Z info: {
  "bufferCommands": false,
  "autoIndex": false,
  "autoCreate": false
}
2025-08-29T17:06:08.228Z info: Connected to MongoDB
2025-08-29T17:06:08.229Z info: [indexSync] Starting index synchronization check...
2025-08-29T17:06:08.296Z info: [getAppConfig] App configuration not initialized. Initializing AppService...
2025-08-29T17:06:08.307Z info: Custom config file loaded:
2025-08-29T17:06:08.308Z info: {
  "version": "1.0.0",
  "cache": true,
  "endpoints": {
    "custom": [
      {
        "name": "Claude Haiku (Cost Effective)",
        "apiKey": "... [truncated]
2025-08-29T17:06:08.308Z debug: Custom config:
{
  version: "1.0.0",
  cache: true,
    // 3 custom(s)
    endpoints.custom: [{"name":"Claude Haiku (Cost Effective)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthr... [truncated],{"name":"Claude Sonnet (Premium)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthropic.c... [truncated],{"name":"GPT-4 (Fallback)","apiKey":"${OPENAI_API_KEY}","baseURL":"https://api.openai.com/v1","model... [truncated]],
    0.name: "Claude Haiku (Cost Effective)",
    0.apiKey: "${ANTHROPIC_API_KEY}",
    0.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-haiku-20241022"],
    default.0: "claude-3-5-haiku-20241022",
    0.modelDisplayLabel: "üí∞ Haiku - Economical ($0.25/1M tokens)",
    0.titleConvo: true,
    0.titleModel: "claude-3-5-haiku-20241022",
    1.name: "Claude Sonnet (Premium)",
    1.apiKey: "${ANTHROPIC_API_KEY}",
    1.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-sonnet-20241022"],
    default.0: "claude-3-5-sonnet-20241022",
    1.modelDisplayLabel: "‚≠ê Sonnet - Premium Planning ($3.00/1M tokens)",
    1.titleConvo: true,
    1.titleModel: "claude-3-5-sonnet-20241022",
    2.name: "GPT-4 (Fallback)",
    2.apiKey: "${OPENAI_API_KEY}",
    2.baseURL: "https://api.openai.com/v1",
    // 1 default(s)
    models.default: ["gpt-4-turbo-preview"],
    default.0: "gpt-4-turbo-preview",
    2.modelDisplayLabel: "üîÑ GPT-4 - Fallback ($10.00/1M tokens)",
    2.titleConvo: true,
    d1-database.command: "npx",
    // 3 arg(s)
    d1-database.args: ["-y","mcp-remote","https://d1-database-improved.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://d1-database-improved.somotravel.workers.dev/sse",
    d1-database.timeout: 30000,
    d1-database.env: [object Object],
    d1-database.description: "Access to client and trip database with comprehensive travel data",
    d1-database.serverInstructions: "Tool selection guidance:\n- Use this server for data lookups and persistence:\n  ‚Ä¢ get_anything: broad... [truncated]",
    prompt-instructions.command: "npx",
    // 3 arg(s)
    prompt-instructions.args: ["-y","mcp-remote","https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse",
    prompt-instructions.timeout: 30000,
    prompt-instructions.env: [object Object],
    prompt-instructions.description: "Travel planning workflows, instructions, and structured processes",
    prompt-instructions.serverInstructions: "Tool selection guidance:\n- Use this server to manage workflow state and conversation flow.\n  ‚Ä¢ trave... [truncated]",
    privacyPolicy.externalUrl: "https://travelops.ai/privacy",
    termsOfService.externalUrl: "https://travelops.ai/terms",
    webSearch.searchProvider: "serper",
    webSearch.scraperType: "firecrawl",
    webSearch.rerankerType: "jina",
    webSearch.scraperTimeout: 20000,
    webSearch.firecrawlApiKey: "${FIRECRAWL_API_KEY}",
    webSearch.firecrawlApiUrl: "${FIRECRAWL_API_URL}",
    firecrawlOptions.timeout: 20000,
    // 3 allowedDomain(s)
    webSearch.allowedDomains: ["wikipedia.org","nationalrail.co.uk","crosscountrytrains.co.uk"],
    allowedDomains.0: "wikipedia.org",
    allowedDomains.1: "nationalrail.co.uk",
    allowedDomains.2: "crosscountrytrains.co.uk",
    webSearch.maxScrapes: 3,
}
2025-08-29T17:06:08.310Z debug: Web search serperApiKey: Using environment variable SERPER_API_KEY (not set in environment, user provided value)
2025-08-29T17:06:08.310Z debug: Web search searxngInstanceUrl: Using environment variable SEARXNG_INSTANCE_URL (not set in environment, user provided value)
2025-08-29T17:06:08.310Z debug: Web search searxngApiKey: Using environment variable SEARXNG_API_KEY (not set in environment, user provided value)
2025-08-29T17:06:08.310Z debug: Web search firecrawlApiKey: Using environment variable FIRECRAWL_API_KEY (not set in environment, user provided value)
2025-08-29T17:06:08.311Z debug: Web search firecrawlApiUrl: Using environment variable FIRECRAWL_API_URL (not set in environment, user provided value)
2025-08-29T17:06:08.311Z debug: Web search jinaApiKey: Using environment variable JINA_API_KEY (not set in environment, user provided value)
2025-08-29T17:06:08.311Z debug: Web search cohereApiKey: Using environment variable COHERE_API_KEY (not set in environment, user provided value)
2025-08-29T17:06:08.311Z warn: Default value for CREDS_KEY is being used.
2025-08-29T17:06:08.311Z warn: Default value for CREDS_IV is being used.
2025-08-29T17:06:08.311Z warn: Default value for JWT_SECRET is being used.
2025-08-29T17:06:08.311Z warn: Default value for JWT_REFRESH_SECRET is being used.
2025-08-29T17:06:08.312Z info: Please replace any default secret values.
2025-08-29T17:06:08.312Z info: ‚Äã

    For your convenience, use this tool to generate your own secret values:
    https://www.librechat.ai/toolkit/creds_generator

    ‚Äã
2025-08-29T17:06:08.313Z warn: RAG API is either not running or not reachable at undefined, you may experience errors with file uploads.
2025-08-29T17:06:08.324Z info: Turnstile is DISABLED (no siteKey provided).
2025-08-29T17:06:08.325Z info: Outdated Config version: 1.0.0
Latest version: 1.2.8

      Check out the Config changelogs for the latest options and features added.

      https://... [truncated]
2025-08-29T17:06:08.330Z debug: Role 'USER': Preserving existing permissions for 'PROMPTS'
2025-08-29T17:06:08.330Z debug: Role 'USER': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T17:06:08.330Z debug: Role 'USER': Preserving existing permissions for 'MEMORIES'
2025-08-29T17:06:08.330Z debug: Role 'USER': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T17:06:08.331Z debug: Role 'USER': Preserving existing permissions for 'AGENTS'
2025-08-29T17:06:08.331Z debug: Role 'USER': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T17:06:08.331Z debug: Role 'USER': Preserving existing permissions for 'RUN_CODE'
2025-08-29T17:06:08.331Z debug: Role 'USER': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T17:06:08.331Z debug: Role 'USER': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T17:06:08.331Z debug: Role 'USER': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T17:06:08.331Z debug: Role 'USER': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T17:06:08.331Z debug: Role 'USER': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T17:06:08.334Z debug: Role 'ADMIN': Preserving existing permissions for 'PROMPTS'
2025-08-29T17:06:08.334Z debug: Role 'ADMIN': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T17:06:08.334Z debug: Role 'ADMIN': Preserving existing permissions for 'MEMORIES'
2025-08-29T17:06:08.334Z debug: Role 'ADMIN': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T17:06:08.334Z debug: Role 'ADMIN': Preserving existing permissions for 'AGENTS'
2025-08-29T17:06:08.334Z debug: Role 'ADMIN': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T17:06:08.334Z debug: Role 'ADMIN': Preserving existing permissions for 'RUN_CODE'
2025-08-29T17:06:08.334Z debug: Role 'ADMIN': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T17:06:08.334Z debug: Role 'ADMIN': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T17:06:08.334Z debug: Role 'ADMIN': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T17:06:08.334Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T17:06:08.335Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T17:06:08.346Z info: Server listening at http://localhost:3080
2025-08-29T17:06:08.391Z debug: [MCP][d1-database] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librech... [truncated]
2025-08-29T17:06:08.391Z debug: [MCP][prompt-instructions] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"... [truncated]
2025-08-29T17:06:08.483Z debug: [MEILI_SYNC:meili-index-sync] Creating initial flow state
2025-08-29T17:06:08.486Z error: [indexSync] error fetch failed
2025-08-29T17:06:09.253Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{}},"serverInfo":{"nam... [truncated]
2025-08-29T17:06:09.254Z debug: [MCP][d1-database] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T17:06:09.255Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T17:06:09.385Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T17:06:09.386Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T17:06:09.386Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T17:06:09.387Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{"listChanged"... [truncated]
2025-08-29T17:06:09.388Z debug: [MCP][prompt-instructions] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T17:06:09.388Z debug: [MCP][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T17:06:09.444Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T17:06:09.446Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T17:06:09.487Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T17:06:09.489Z info: [MCP][d1-database] -------------------------------------------------‚îê
2025-08-29T17:06:09.489Z info: [MCP][d1-database] URL: undefined
2025-08-29T17:06:09.489Z info: [MCP][d1-database] OAuth Required: false
2025-08-29T17:06:09.489Z info: [MCP][d1-database] Capabilities: {"tools":{}}
2025-08-29T17:06:09.489Z info: [MCP][d1-database] Tools: health_check, update_activitylog_clients, reset_activitylog_from_trips, explore_database, get_anything, remember_context, bu... [truncated]
2025-08-29T17:06:09.489Z info: [MCP][d1-database] Server Instructions: Tool selection guidance:
- Use this server for data lookups and persistence:
  ‚Ä¢ get_anything: broad search fo... [truncated]
2025-08-29T17:06:09.489Z info: [MCP][d1-database] -------------------------------------------------‚îò
2025-08-29T17:06:09.538Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T17:06:09.539Z debug: [MCP][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T17:06:09.539Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T17:06:09.589Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T17:06:09.590Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T17:06:09.647Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T17:06:09.648Z info: [MCP][prompt-instructions] -------------------------------------------------‚îê
2025-08-29T17:06:09.648Z info: [MCP][prompt-instructions] URL: undefined
2025-08-29T17:06:09.648Z info: [MCP][prompt-instructions] OAuth Required: false
2025-08-29T17:06:09.648Z info: [MCP][prompt-instructions] Capabilities: {"tools":{"listChanged":false}}
2025-08-29T17:06:09.648Z info: [MCP][prompt-instructions] Tools: get_instruction, list_instructions, create_instruction, update_instruction, get_instructions_by_confidence, set_verb... [truncated]
2025-08-29T17:06:09.648Z info: [MCP][prompt-instructions] Server Instructions: Tool selection guidance:
- Use this server to manage workflow state and conversation flow.
  ‚Ä¢ travel_... [truncated]
2025-08-29T17:06:09.648Z info: [MCP][prompt-instructions] -------------------------------------------------‚îò
2025-08-29T17:06:09.652Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T17:06:09.689Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T17:06:09.691Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T17:06:09.743Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T17:06:09.748Z debug: Merged 33 app-level tools
2025-08-29T17:06:09.748Z info: MCP servers initialized successfully. Added 33 MCP tools.
2025-08-29T17:06:09.749Z debug: Checking if agent permissions migration is needed
2025-08-29T17:06:09.753Z debug: Collection already exists: aclentries
2025-08-29T17:06:09.779Z debug: Agent migration check completed
{
  totalToMigrate: 0,
  globalEditAccess: 0,
  globalViewAccess: 0,
  privateAgents: 0,
}
2025-08-29T17:06:09.779Z debug: Checking if prompt permissions migration is needed
2025-08-29T17:06:09.781Z debug: Collection already exists: aclentries
2025-08-29T17:06:09.790Z debug: Prompt migration check completed
{
  totalToMigrate: 0,
  globalViewAccess: 0,
  privateGroups: 0,
}
2025-08-29T17:06:30.694Z debug: Merged 33 user-level tools
2025-08-29T17:06:33.167Z debug: [MCP][d1-database] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librech... [truncated]
2025-08-29T17:06:33.167Z debug: [MCP][prompt-instructions] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"... [truncated]
2025-08-29T17:06:35.473Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{}},"serverInfo":{"nam... [truncated]
2025-08-29T17:06:35.474Z debug: [MCP][d1-database] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T17:06:35.474Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T17:06:35.659Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T17:06:35.662Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T17:06:35.662Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T17:06:35.691Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{"listChanged"... [truncated]
2025-08-29T17:06:35.692Z debug: [MCP][prompt-instructions] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T17:06:35.692Z debug: [MCP][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T17:06:35.732Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T17:06:36.058Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T17:06:36.058Z debug: [MCP][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T17:06:36.058Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T17:06:36.111Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T17:07:44.856Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":3}
2025-08-29T17:07:44.856Z debug: [MCP][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":3}
2025-08-29T17:07:45.017Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":3,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T17:07:45.017Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T17:07:45.018Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T17:07:45.048Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":3,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T17:07:45.050Z debug: [MCP][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T17:07:45.050Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T17:07:45.119Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T17:07:45.136Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T17:07:55.128Z debug: [AgentController] Request aborted on close
2025-08-29T17:07:55.130Z debug: [BaseClient] Loading history:
{
  conversationId: "78bf277d-2eab-4fae-b61e-df5d3c50bedf",
  parentMessageId: "00000000-0000-0000-0000-000000000000",
}
2025-08-29T17:07:55.480Z debug: [AgentClient] Injected MCP instructions for servers:
["\"d1-database\"","\"prompt-instructions\""]
2025-08-29T17:07:55.481Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 179989,
  maxContextTokens: 180000,
}
2025-08-29T17:07:55.481Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 179989,
  maxContextTokens: 180000,
}
2025-08-29T17:07:55.481Z debug: [BaseClient] tokenCountMap:
{
  e697153e-ba28-41b0-82ec-51cd80017424: 8,
}
2025-08-29T17:07:55.481Z debug: [BaseClient]
{
  promptTokens: 11,
  remainingContextTokens: 179989,
  payloadSize: 1,
  maxContextTokens: 180000,
}
2025-08-29T17:07:55.482Z debug: [BaseClient] tokenCountMap
{
  e697153e-ba28-41b0-82ec-51cd80017424: 8,
}
2025-08-29T17:07:55.482Z debug: [BaseClient] userMessage
{
  messageId: "e697153e-ba28-41b0-82ec-51cd80017424",
  parentMessageId: "00000000-0000-0000-0000-000000000000",
  conversationId: "78bf277d-2eab-4fae-b61e-df5d3c50bedf",
  sender: "User",
  text: "start_travel_agent",
  isCreatedByUser: true,
  tokenCount: 8,
}
2025-08-29T17:07:56.047Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T17:07:59.282Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/call","params":{"name":"travel_agent_start","arguments":{}},"jsonrpc":"2.0","id":5}
2025-08-29T17:08:00.890Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":5,"result":{"content":[{"type":"text","text":"‚úÖ **Claude Travel Agent System Read... [truncated]
2025-08-29T17:08:00.890Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T17:08:00.890Z
2025-08-29T17:08:04.072Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T17:08:04.104Z debug: [AgentController] Request closed
2025-08-29T17:08:04.127Z debug: [AgentController] Performing cleanup
2025-08-29T17:08:04.137Z debug: [AgentController] Cleaning up abort controller
2025-08-29T17:08:04.139Z debug: [AgentController] Cleanup completed
2025-08-29T17:08:31.416Z debug: [AgentController] Request aborted on close
2025-08-29T17:08:31.416Z debug: [BaseClient] Loading history:
{
  conversationId: "78bf277d-2eab-4fae-b61e-df5d3c50bedf",
  parentMessageId: "453f3887-d859-4fe3-ada2-7cc5826ff9df",
}
2025-08-29T17:08:31.435Z debug: [AgentClient] Injected MCP instructions for servers:
["\"d1-database\"","\"prompt-instructions\""]
2025-08-29T17:08:31.436Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 179711,
  maxContextTokens: 180000,
}
2025-08-29T17:08:31.436Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 179711,
  maxContextTokens: 180000,
}
2025-08-29T17:08:31.436Z debug: [BaseClient] tokenCountMap:
{
  e697153e-ba28-41b0-82ec-51cd80017424: 8,
  453f3887-d859-4fe3-ada2-7cc5826ff9df: 262,
  d23f6057-5211-4d24-937d-43a390e9a1db: 16,
}
2025-08-29T17:08:31.436Z debug: [BaseClient]
{
  promptTokens: 289,
  remainingContextTokens: 179711,
  payloadSize: 3,
  maxContextTokens: 180000,
}
2025-08-29T17:08:31.436Z debug: [BaseClient] tokenCountMap
{
  e697153e-ba28-41b0-82ec-51cd80017424: 8,
  453f3887-d859-4fe3-ada2-7cc5826ff9df: 262,
  d23f6057-5211-4d24-937d-43a390e9a1db: 16,
}
2025-08-29T17:08:31.436Z debug: [BaseClient] userMessage
{
  messageId: "d23f6057-5211-4d24-937d-43a390e9a1db",
  parentMessageId: "453f3887-d859-4fe3-ada2-7cc5826ff9df",
  conversationId: "78bf277d-2eab-4fae-b61e-df5d3c50bedf",
  sender: "User",
  text: "I want to work on Sara and Darren Jones October trip.",
  isCreatedByUser: true,
  tokenCount: 16,
}
2025-08-29T17:08:32.035Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T17:08:35.398Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"continue_trip","arguments":{"search_query":"Sara and Darren Jones Octob... [truncated]
2025-08-29T17:08:35.718Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":5,"result":{"content":[{"type":"text","text":"{\n  \"success\": false,\n  \"no_trips_foun... [truncated]
2025-08-29T17:08:35.720Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T17:08:35.720Z
2025-08-29T17:08:39.209Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_anything","arguments":{"query":"Sara Jones Darren Jones"}},"jsonrpc... [truncated]
2025-08-29T17:08:39.520Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":6,"result":{"content":[{"type":"text","text":"{\n  \"response\": \"No exact match for \\\... [truncated]
2025-08-29T17:08:39.522Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T17:08:39.522Z
2025-08-29T17:08:44.467Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_workflow_status","arguments":{"trip_identifier":"Sara & Darren Jone... [truncated]
2025-08-29T17:08:44.705Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":7,"result":{"content":[{"type":"text","text":"{\n  \"success\": true,\n  \"trip_id\": 26,... [truncated]
2025-08-29T17:08:44.705Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T17:08:44.705Z
2025-08-29T17:08:47.675Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":8}
2025-08-29T17:08:47.719Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":8,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T17:08:47.720Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T17:08:47.720Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":9}
2025-08-29T17:08:47.763Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":9,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T17:08:47.764Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_workflow_instructions","arguments":{"trip_identifier":"Sara & Darre... [truncated]
2025-08-29T17:08:47.883Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":10,"result":{"content":[{"type":"text","text":"{\n  \"success\": false,\n  \"error\": \"D... [truncated]
2025-08-29T17:08:47.884Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T17:08:47.884Z
2025-08-29T17:08:57.806Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T17:08:57.818Z debug: [AgentController] Request closed
2025-08-29T17:08:57.823Z debug: [AgentController] Performing cleanup
2025-08-29T17:08:57.823Z debug: [AgentController] Cleaning up abort controller
2025-08-29T17:08:57.823Z debug: [AgentController] Cleanup completed
2025-08-29T17:22:36.906Z info: Cleaning up FlowStateManager intervals...
2025-08-29T17:22:45.170Z info: Mongo Connection options
2025-08-29T17:22:45.175Z info: {
  "bufferCommands": false,
  "autoIndex": false,
  "autoCreate": false
}
2025-08-29T17:22:45.269Z info: Connected to MongoDB
2025-08-29T17:22:45.269Z info: [indexSync] Starting index synchronization check...
2025-08-29T17:22:45.378Z info: [getAppConfig] App configuration not initialized. Initializing AppService...
2025-08-29T17:22:45.390Z info: Custom config file loaded:
2025-08-29T17:22:45.390Z info: {
  "version": "1.0.0",
  "cache": true,
  "endpoints": {
    "custom": [
      {
        "name": "Claude Haiku (Cost Effective)",
        "apiKey": "... [truncated]
2025-08-29T17:22:45.392Z debug: Custom config:
{
  version: "1.0.0",
  cache: true,
    // 3 custom(s)
    endpoints.custom: [{"name":"Claude Haiku (Cost Effective)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthr... [truncated],{"name":"Claude Sonnet (Premium)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthropic.c... [truncated],{"name":"GPT-4 (Fallback)","apiKey":"${OPENAI_API_KEY}","baseURL":"https://api.openai.com/v1","model... [truncated]],
    0.name: "Claude Haiku (Cost Effective)",
    0.apiKey: "${ANTHROPIC_API_KEY}",
    0.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-haiku-20241022"],
    default.0: "claude-3-5-haiku-20241022",
    0.modelDisplayLabel: "üí∞ Haiku - Economical ($0.25/1M tokens)",
    0.titleConvo: true,
    0.titleModel: "claude-3-5-haiku-20241022",
    1.name: "Claude Sonnet (Premium)",
    1.apiKey: "${ANTHROPIC_API_KEY}",
    1.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-sonnet-20241022"],
    default.0: "claude-3-5-sonnet-20241022",
    1.modelDisplayLabel: "‚≠ê Sonnet - Premium Planning ($3.00/1M tokens)",
    1.titleConvo: true,
    1.titleModel: "claude-3-5-sonnet-20241022",
    2.name: "GPT-4 (Fallback)",
    2.apiKey: "${OPENAI_API_KEY}",
    2.baseURL: "https://api.openai.com/v1",
    // 1 default(s)
    models.default: ["gpt-4-turbo-preview"],
    default.0: "gpt-4-turbo-preview",
    2.modelDisplayLabel: "üîÑ GPT-4 - Fallback ($10.00/1M tokens)",
    2.titleConvo: true,
    d1-database.command: "npx",
    // 3 arg(s)
    d1-database.args: ["-y","mcp-remote","https://d1-database-improved.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://d1-database-improved.somotravel.workers.dev/sse",
    d1-database.timeout: 30000,
    d1-database.env: [object Object],
    d1-database.description: "Access to client and trip database with comprehensive travel data",
    d1-database.serverInstructions: "Tool selection guidance:\n- Use this server for data lookups and persistence:\n  ‚Ä¢ get_anything: broad... [truncated]",
    prompt-instructions.command: "npx",
    // 3 arg(s)
    prompt-instructions.args: ["-y","mcp-remote","https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse",
    prompt-instructions.timeout: 30000,
    prompt-instructions.env: [object Object],
    prompt-instructions.description: "Travel planning workflows, instructions, and structured processes",
    prompt-instructions.serverInstructions: "Tool selection guidance:\n- Use this server to manage workflow state and conversation flow.\n  ‚Ä¢ trave... [truncated]",
    privacyPolicy.externalUrl: "https://travelops.ai/privacy",
    termsOfService.externalUrl: "https://travelops.ai/terms",
    webSearch.searchProvider: "serper",
    webSearch.scraperType: "firecrawl",
    webSearch.rerankerType: "jina",
    webSearch.scraperTimeout: 20000,
    webSearch.firecrawlApiKey: "${FIRECRAWL_API_KEY}",
    webSearch.firecrawlApiUrl: "${FIRECRAWL_API_URL}",
    firecrawlOptions.timeout: 20000,
    // 3 allowedDomain(s)
    webSearch.allowedDomains: ["wikipedia.org","nationalrail.co.uk","crosscountrytrains.co.uk"],
    allowedDomains.0: "wikipedia.org",
    allowedDomains.1: "nationalrail.co.uk",
    allowedDomains.2: "crosscountrytrains.co.uk",
    webSearch.maxScrapes: 3,
}
2025-08-29T17:22:45.397Z debug: Web search serperApiKey: Using environment variable SERPER_API_KEY (not set in environment, user provided value)
2025-08-29T17:22:45.397Z debug: Web search searxngInstanceUrl: Using environment variable SEARXNG_INSTANCE_URL (not set in environment, user provided value)
2025-08-29T17:22:45.397Z debug: Web search searxngApiKey: Using environment variable SEARXNG_API_KEY (not set in environment, user provided value)
2025-08-29T17:22:45.397Z debug: Web search firecrawlApiKey: Using environment variable FIRECRAWL_API_KEY (not set in environment, user provided value)
2025-08-29T17:22:45.397Z debug: Web search firecrawlApiUrl: Using environment variable FIRECRAWL_API_URL (not set in environment, user provided value)
2025-08-29T17:22:45.397Z debug: Web search jinaApiKey: Using environment variable JINA_API_KEY (not set in environment, user provided value)
2025-08-29T17:22:45.397Z debug: Web search cohereApiKey: Using environment variable COHERE_API_KEY (not set in environment, user provided value)
2025-08-29T17:22:45.398Z warn: Default value for CREDS_KEY is being used.
2025-08-29T17:22:45.400Z warn: Default value for CREDS_IV is being used.
2025-08-29T17:22:45.401Z warn: Default value for JWT_SECRET is being used.
2025-08-29T17:22:45.402Z warn: Default value for JWT_REFRESH_SECRET is being used.
2025-08-29T17:22:45.402Z info: Please replace any default secret values.
2025-08-29T17:22:45.403Z info: ‚Äã

    For your convenience, use this tool to generate your own secret values:
    https://www.librechat.ai/toolkit/creds_generator

    ‚Äã
2025-08-29T17:22:45.403Z warn: RAG API is either not running or not reachable at undefined, you may experience errors with file uploads.
2025-08-29T17:22:45.430Z info: Turnstile is DISABLED (no siteKey provided).
2025-08-29T17:22:45.433Z info: Outdated Config version: 1.0.0
Latest version: 1.2.8

      Check out the Config changelogs for the latest options and features added.

      https://... [truncated]
2025-08-29T17:22:45.441Z debug: Role 'USER': Preserving existing permissions for 'PROMPTS'
2025-08-29T17:22:45.441Z debug: Role 'USER': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T17:22:45.441Z debug: Role 'USER': Preserving existing permissions for 'MEMORIES'
2025-08-29T17:22:45.441Z debug: Role 'USER': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T17:22:45.441Z debug: Role 'USER': Preserving existing permissions for 'AGENTS'
2025-08-29T17:22:45.441Z debug: Role 'USER': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T17:22:45.441Z debug: Role 'USER': Preserving existing permissions for 'RUN_CODE'
2025-08-29T17:22:45.441Z debug: Role 'USER': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T17:22:45.441Z debug: Role 'USER': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T17:22:45.441Z debug: Role 'USER': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T17:22:45.441Z debug: Role 'USER': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T17:22:45.441Z debug: Role 'USER': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T17:22:45.444Z debug: Role 'ADMIN': Preserving existing permissions for 'PROMPTS'
2025-08-29T17:22:45.444Z debug: Role 'ADMIN': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T17:22:45.444Z debug: Role 'ADMIN': Preserving existing permissions for 'MEMORIES'
2025-08-29T17:22:45.444Z debug: Role 'ADMIN': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T17:22:45.444Z debug: Role 'ADMIN': Preserving existing permissions for 'AGENTS'
2025-08-29T17:22:45.444Z debug: Role 'ADMIN': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T17:22:45.444Z debug: Role 'ADMIN': Preserving existing permissions for 'RUN_CODE'
2025-08-29T17:22:45.444Z debug: Role 'ADMIN': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T17:22:45.444Z debug: Role 'ADMIN': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T17:22:45.444Z debug: Role 'ADMIN': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T17:22:45.444Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T17:22:45.444Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T17:22:45.477Z info: Server listening at http://localhost:3080
2025-08-29T17:22:45.570Z debug: [MCP][d1-database] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librech... [truncated]
2025-08-29T17:22:45.571Z debug: [MCP][prompt-instructions] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"... [truncated]
2025-08-29T17:22:45.571Z debug: [MEILI_SYNC:meili-index-sync] Creating initial flow state
2025-08-29T17:22:45.582Z error: [indexSync] error fetch failed
2025-08-29T17:22:47.612Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{}},"serverInfo":{"nam... [truncated]
2025-08-29T17:22:47.613Z debug: [MCP][d1-database] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T17:22:47.613Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T17:22:47.818Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{"listChanged"... [truncated]
2025-08-29T17:22:47.819Z debug: [MCP][prompt-instructions] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T17:22:47.821Z debug: [MCP][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T17:22:47.992Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T17:22:47.993Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T17:22:47.996Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T17:22:48.046Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T17:22:48.046Z debug: [MCP][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T17:22:48.046Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T17:22:48.059Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T17:22:48.060Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T17:22:48.113Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T17:22:48.114Z info: [MCP][d1-database] -------------------------------------------------‚îê
2025-08-29T17:22:48.114Z info: [MCP][d1-database] URL: undefined
2025-08-29T17:22:48.114Z info: [MCP][d1-database] OAuth Required: false
2025-08-29T17:22:48.114Z info: [MCP][d1-database] Capabilities: {"tools":{}}
2025-08-29T17:22:48.115Z info: [MCP][d1-database] Tools: health_check, update_activitylog_clients, reset_activitylog_from_trips, explore_database, get_anything, remember_context, bu... [truncated]
2025-08-29T17:22:48.115Z info: [MCP][d1-database] Server Instructions: Tool selection guidance:
- Use this server for data lookups and persistence:
  ‚Ä¢ get_anything: broad search fo... [truncated]
2025-08-29T17:22:48.115Z info: [MCP][d1-database] -------------------------------------------------‚îò
2025-08-29T17:22:48.191Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T17:22:48.195Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T17:22:48.325Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T17:22:48.327Z info: [MCP][prompt-instructions] -------------------------------------------------‚îê
2025-08-29T17:22:48.328Z info: [MCP][prompt-instructions] URL: undefined
2025-08-29T17:22:48.328Z info: [MCP][prompt-instructions] OAuth Required: false
2025-08-29T17:22:48.328Z info: [MCP][prompt-instructions] Capabilities: {"tools":{"listChanged":false}}
2025-08-29T17:22:48.328Z info: [MCP][prompt-instructions] Tools: get_instruction, list_instructions, create_instruction, update_instruction, get_instructions_by_confidence, set_verb... [truncated]
2025-08-29T17:22:48.328Z info: [MCP][prompt-instructions] Server Instructions: Tool selection guidance:
- Use this server to manage workflow state and conversation flow.
  ‚Ä¢ travel_... [truncated]
2025-08-29T17:22:48.328Z info: [MCP][prompt-instructions] -------------------------------------------------‚îò
2025-08-29T17:22:48.333Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T17:22:48.379Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T17:22:48.381Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T17:22:48.523Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T17:22:48.562Z debug: Merged 33 app-level tools
2025-08-29T17:22:48.562Z info: MCP servers initialized successfully. Added 33 MCP tools.
2025-08-29T17:22:48.563Z debug: Checking if agent permissions migration is needed
2025-08-29T17:22:48.581Z debug: Collection already exists: aclentries
2025-08-29T17:22:48.654Z debug: Agent migration check completed
{
  totalToMigrate: 0,
  globalEditAccess: 0,
  globalViewAccess: 0,
  privateAgents: 0,
}
2025-08-29T17:22:48.655Z debug: Checking if prompt permissions migration is needed
2025-08-29T17:22:48.659Z debug: Collection already exists: aclentries
2025-08-29T17:22:48.672Z debug: Prompt migration check completed
{
  totalToMigrate: 0,
  globalViewAccess: 0,
  privateGroups: 0,
}
2025-08-29T18:09:16.866Z info: Cleaning up FlowStateManager intervals...
2025-08-29T18:10:16.271Z info: Mongo Connection options
2025-08-29T18:10:16.274Z info: {
  "bufferCommands": false,
  "autoIndex": false,
  "autoCreate": false
}
2025-08-29T18:10:16.320Z info: Connected to MongoDB
2025-08-29T18:10:16.321Z info: [indexSync] Starting index synchronization check...
2025-08-29T18:10:16.412Z info: [getAppConfig] App configuration not initialized. Initializing AppService...
2025-08-29T18:10:16.424Z info: Custom config file loaded:
2025-08-29T18:10:16.425Z info: {
  "version": "1.0.0",
  "cache": true,
  "endpoints": {
    "custom": [
      {
        "name": "Claude Haiku (Cost Effective)",
        "apiKey": "... [truncated]
2025-08-29T18:10:16.425Z debug: Custom config:
{
  version: "1.0.0",
  cache: true,
    // 3 custom(s)
    endpoints.custom: [{"name":"Claude Haiku (Cost Effective)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthr... [truncated],{"name":"Claude Sonnet (Premium)","apiKey":"${ANTHROPIC_API_KEY}","baseURL":"https://api.anthropic.c... [truncated],{"name":"GPT-4 (Fallback)","apiKey":"${OPENAI_API_KEY}","baseURL":"https://api.openai.com/v1","model... [truncated]],
    0.name: "Claude Haiku (Cost Effective)",
    0.apiKey: "${ANTHROPIC_API_KEY}",
    0.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-haiku-20241022"],
    default.0: "claude-3-5-haiku-20241022",
    0.modelDisplayLabel: "üí∞ Haiku - Economical ($0.25/1M tokens)",
    0.titleConvo: true,
    0.titleModel: "claude-3-5-haiku-20241022",
    1.name: "Claude Sonnet (Premium)",
    1.apiKey: "${ANTHROPIC_API_KEY}",
    1.baseURL: "https://api.anthropic.com/v1",
    // 1 default(s)
    models.default: ["claude-3-5-sonnet-20241022"],
    default.0: "claude-3-5-sonnet-20241022",
    1.modelDisplayLabel: "‚≠ê Sonnet - Premium Planning ($3.00/1M tokens)",
    1.titleConvo: true,
    1.titleModel: "claude-3-5-sonnet-20241022",
    2.name: "GPT-4 (Fallback)",
    2.apiKey: "${OPENAI_API_KEY}",
    2.baseURL: "https://api.openai.com/v1",
    // 1 default(s)
    models.default: ["gpt-4-turbo-preview"],
    default.0: "gpt-4-turbo-preview",
    2.modelDisplayLabel: "üîÑ GPT-4 - Fallback ($10.00/1M tokens)",
    2.titleConvo: true,
    mcp-chrome.command: "node",
    // 1 arg(s)
    mcp-chrome.args: ["../mcp-local-servers/mcp-chrome/app/native-server/dist/index.js"],
    args.0: "../mcp-local-servers/mcp-chrome/app/native-server/dist/index.js",
    mcp-chrome.timeout: 30000,
    mcp-chrome.env: [object Object],
    mcp-chrome.description: "Browser automation and web content extraction",
    mcp-chrome.serverInstructions: "Browser automation capabilities:\n- Use this server for real-time web interaction and content extract... [truncated]",
    d1-database.command: "npx",
    // 3 arg(s)
    d1-database.args: ["-y","mcp-remote","https://d1-database-improved.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://d1-database-improved.somotravel.workers.dev/sse",
    d1-database.timeout: 30000,
    d1-database.env: [object Object],
    d1-database.description: "Access to client and trip database with comprehensive travel data",
    d1-database.serverInstructions: "Tool selection guidance:\n- Use this server for data lookups and persistence:\n  ‚Ä¢ get_anything: broad... [truncated]",
    prompt-instructions.command: "npx",
    // 3 arg(s)
    prompt-instructions.args: ["-y","mcp-remote","https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://prompt-instructions-d1-mcp.somotravel.workers.dev/sse",
    prompt-instructions.timeout: 30000,
    prompt-instructions.env: [object Object],
    prompt-instructions.description: "Travel planning workflows, instructions, and structured processes",
    prompt-instructions.serverInstructions: "Tool selection guidance:\n- Use this server to manage workflow state and conversation flow.\n  ‚Ä¢ trave... [truncated]",
    template-document.command: "npx",
    // 3 arg(s)
    template-document.args: ["-y","mcp-remote","https://template-document-qhubvccp6-neil-roberts-projects.vercel.app/api/mcp"],
    args.0: "-y",
    args.1: "mcp-remote",
    args.2: "https://template-document-qhubvccp6-neil-roberts-projects.vercel.app/api/mcp",
    template-document.timeout: 30000,
    template-document.env: [object Object],
    template-document.description: "Travel document template rendering and publishing system",
    template-document.serverInstructions: "Document publishing capabilities:\n- Use this server for creating professional travel documents:\n  ‚Ä¢ ... [truncated]",
    privacyPolicy.externalUrl: "https://voygen.app/privacy",
    termsOfService.externalUrl: "https://voygen.app/terms",
    webSearch.searchProvider: "serper",
    webSearch.scraperType: "firecrawl",
    webSearch.rerankerType: "jina",
    webSearch.scraperTimeout: 20000,
    webSearch.firecrawlApiKey: "${FIRECRAWL_API_KEY}",
    webSearch.firecrawlApiUrl: "${FIRECRAWL_API_URL}",
    firecrawlOptions.timeout: 20000,
    // 3 allowedDomain(s)
    webSearch.allowedDomains: ["wikipedia.org","nationalrail.co.uk","crosscountrytrains.co.uk"],
    allowedDomains.0: "wikipedia.org",
    allowedDomains.1: "nationalrail.co.uk",
    allowedDomains.2: "crosscountrytrains.co.uk",
    webSearch.maxScrapes: 3,
}
2025-08-29T18:10:16.428Z debug: Web search serperApiKey: Using environment variable SERPER_API_KEY (not set in environment, user provided value)
2025-08-29T18:10:16.428Z debug: Web search searxngInstanceUrl: Using environment variable SEARXNG_INSTANCE_URL (not set in environment, user provided value)
2025-08-29T18:10:16.428Z debug: Web search searxngApiKey: Using environment variable SEARXNG_API_KEY (not set in environment, user provided value)
2025-08-29T18:10:16.429Z debug: Web search firecrawlApiKey: Using environment variable FIRECRAWL_API_KEY (not set in environment, user provided value)
2025-08-29T18:10:16.429Z debug: Web search firecrawlApiUrl: Using environment variable FIRECRAWL_API_URL (not set in environment, user provided value)
2025-08-29T18:10:16.429Z debug: Web search jinaApiKey: Using environment variable JINA_API_KEY (not set in environment, user provided value)
2025-08-29T18:10:16.429Z debug: Web search cohereApiKey: Using environment variable COHERE_API_KEY (not set in environment, user provided value)
2025-08-29T18:10:16.429Z warn: Default value for CREDS_KEY is being used.
2025-08-29T18:10:16.429Z warn: Default value for CREDS_IV is being used.
2025-08-29T18:10:16.429Z warn: Default value for JWT_SECRET is being used.
2025-08-29T18:10:16.430Z warn: Default value for JWT_REFRESH_SECRET is being used.
2025-08-29T18:10:16.430Z info: Please replace any default secret values.
2025-08-29T18:10:16.430Z info: ‚Äã

    For your convenience, use this tool to generate your own secret values:
    https://www.librechat.ai/toolkit/creds_generator

    ‚Äã
2025-08-29T18:10:16.430Z warn: RAG API is either not running or not reachable at undefined, you may experience errors with file uploads.
2025-08-29T18:10:16.450Z info: Turnstile is DISABLED (no siteKey provided).
2025-08-29T18:10:16.450Z info: Outdated Config version: 1.0.0
Latest version: 1.2.8

      Check out the Config changelogs for the latest options and features added.

      https://... [truncated]
2025-08-29T18:10:16.456Z debug: Role 'USER': Preserving existing permissions for 'PROMPTS'
2025-08-29T18:10:16.456Z debug: Role 'USER': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T18:10:16.457Z debug: Role 'USER': Preserving existing permissions for 'MEMORIES'
2025-08-29T18:10:16.457Z debug: Role 'USER': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T18:10:16.457Z debug: Role 'USER': Preserving existing permissions for 'AGENTS'
2025-08-29T18:10:16.457Z debug: Role 'USER': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T18:10:16.457Z debug: Role 'USER': Preserving existing permissions for 'RUN_CODE'
2025-08-29T18:10:16.457Z debug: Role 'USER': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T18:10:16.457Z debug: Role 'USER': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T18:10:16.457Z debug: Role 'USER': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T18:10:16.457Z debug: Role 'USER': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T18:10:16.457Z debug: Role 'USER': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T18:10:16.461Z debug: Role 'ADMIN': Preserving existing permissions for 'PROMPTS'
2025-08-29T18:10:16.461Z debug: Role 'ADMIN': Preserving existing permissions for 'BOOKMARKS'
2025-08-29T18:10:16.461Z debug: Role 'ADMIN': Preserving existing permissions for 'MEMORIES'
2025-08-29T18:10:16.461Z debug: Role 'ADMIN': Preserving existing permissions for 'MULTI_CONVO'
2025-08-29T18:10:16.461Z debug: Role 'ADMIN': Preserving existing permissions for 'AGENTS'
2025-08-29T18:10:16.461Z debug: Role 'ADMIN': Preserving existing permissions for 'TEMPORARY_CHAT'
2025-08-29T18:10:16.461Z debug: Role 'ADMIN': Preserving existing permissions for 'RUN_CODE'
2025-08-29T18:10:16.461Z debug: Role 'ADMIN': Preserving existing permissions for 'WEB_SEARCH'
2025-08-29T18:10:16.461Z debug: Role 'ADMIN': Preserving existing permissions for 'PEOPLE_PICKER'
2025-08-29T18:10:16.461Z debug: Role 'ADMIN': Preserving existing permissions for 'MARKETPLACE'
2025-08-29T18:10:16.461Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_SEARCH'
2025-08-29T18:10:16.461Z debug: Role 'ADMIN': Preserving existing permissions for 'FILE_CITATIONS'
2025-08-29T18:10:16.477Z info: Server listening at http://localhost:3080
2025-08-29T18:10:16.541Z debug: [MCP][mcp-chrome] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librecha... [truncated]
2025-08-29T18:10:16.542Z debug: [MCP][d1-database] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librech... [truncated]
2025-08-29T18:10:16.542Z debug: [MCP][prompt-instructions] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"... [truncated]
2025-08-29T18:10:16.542Z debug: [MCP][template-document] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@l... [truncated]
2025-08-29T18:10:16.577Z debug: [MEILI_SYNC:meili-index-sync] Creating initial flow state
2025-08-29T18:10:16.583Z error: [indexSync] error fetch failed
2025-08-29T18:10:17.944Z error: [MCP][template-document] Connection failed: MCP error -32000: Connection closed
2025-08-29T18:10:18.022Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{"listChanged"... [truncated]
2025-08-29T18:10:18.024Z debug: [MCP][prompt-instructions] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T18:10:18.026Z debug: [MCP][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T18:10:18.037Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{}},"serverInfo":{"nam... [truncated]
2025-08-29T18:10:18.037Z debug: [MCP][d1-database] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T18:10:18.037Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T18:10:18.074Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T18:10:18.074Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T18:10:18.074Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T18:10:18.121Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T18:10:18.123Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T18:10:18.124Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T18:10:18.124Z debug: [MCP][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T18:10:18.124Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T18:10:18.162Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T18:10:18.163Z info: [MCP][d1-database] -------------------------------------------------‚îê
2025-08-29T18:10:18.163Z info: [MCP][d1-database] URL: undefined
2025-08-29T18:10:18.163Z info: [MCP][d1-database] OAuth Required: false
2025-08-29T18:10:18.163Z info: [MCP][d1-database] Capabilities: {"tools":{}}
2025-08-29T18:10:18.163Z info: [MCP][d1-database] Tools: health_check, update_activitylog_clients, reset_activitylog_from_trips, explore_database, get_anything, remember_context, bu... [truncated]
2025-08-29T18:10:18.163Z info: [MCP][d1-database] Server Instructions: Tool selection guidance:
- Use this server for data lookups and persistence:
  ‚Ä¢ get_anything: broad search fo... [truncated]
2025-08-29T18:10:18.164Z info: [MCP][d1-database] -------------------------------------------------‚îò
2025-08-29T18:10:18.169Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T18:10:18.169Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T18:10:18.215Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T18:10:18.216Z info: [MCP][prompt-instructions] -------------------------------------------------‚îê
2025-08-29T18:10:18.216Z info: [MCP][prompt-instructions] URL: undefined
2025-08-29T18:10:18.216Z info: [MCP][prompt-instructions] OAuth Required: false
2025-08-29T18:10:18.216Z info: [MCP][prompt-instructions] Capabilities: {"tools":{"listChanged":false}}
2025-08-29T18:10:18.217Z info: [MCP][prompt-instructions] Tools: get_instruction, list_instructions, create_instruction, update_instruction, get_instructions_by_confidence, set_verb... [truncated]
2025-08-29T18:10:18.217Z info: [MCP][prompt-instructions] Server Instructions: Tool selection guidance:
- Use this server to manage workflow state and conversation flow.
  ‚Ä¢ travel_... [truncated]
2025-08-29T18:10:18.217Z info: [MCP][prompt-instructions] -------------------------------------------------‚îò
2025-08-29T18:10:19.960Z debug: [MCP][template-document] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@l... [truncated]
2025-08-29T18:10:21.439Z error: [MCP][template-document] Connection failed: MCP error -32000: Connection closed
2025-08-29T18:10:25.471Z debug: [MCP][template-document] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@l... [truncated]
2025-08-29T18:10:27.073Z error: [MCP][template-document] Connection failed: MCP error -32000: Connection closed
2025-08-29T18:10:27.073Z error: [MCP][template-document] Failed to connect after 3 attempts MCP error -32000: Connection closed
2025-08-29T18:10:27.074Z warn: [MCP][template-document] Failed to fetch server capabilities: MCP error -32000: Connection closed
2025-08-29T18:10:27.074Z info: [MCP][template-document] -------------------------------------------------‚îê
2025-08-29T18:10:27.074Z info: [MCP][template-document] URL: undefined
2025-08-29T18:10:27.074Z info: [MCP][template-document] OAuth Required: false
2025-08-29T18:10:27.074Z info: [MCP][template-document] Capabilities: undefined
2025-08-29T18:10:27.074Z info: [MCP][template-document] Tools: undefined
2025-08-29T18:10:27.074Z info: [MCP][template-document] Server Instructions: Document publishing capabilities:
- Use this server for creating professional travel documents:
  ‚Ä¢ rend... [truncated]
2025-08-29T18:10:27.074Z info: [MCP][template-document] -------------------------------------------------‚îò
2025-08-29T18:10:46.511Z warn: [MCP][mcp-chrome] Failed to fetch server capabilities: Connection timeout after 30000ms
2025-08-29T18:10:46.512Z info: [MCP][mcp-chrome] -------------------------------------------------‚îê
2025-08-29T18:10:46.512Z info: [MCP][mcp-chrome] URL: undefined
2025-08-29T18:10:46.512Z info: [MCP][mcp-chrome] OAuth Required: false
2025-08-29T18:10:46.512Z info: [MCP][mcp-chrome] Capabilities: undefined
2025-08-29T18:10:46.512Z info: [MCP][mcp-chrome] Tools: undefined
2025-08-29T18:10:46.512Z info: [MCP][mcp-chrome] Server Instructions: Browser automation capabilities:
- Use this server for real-time web interaction and content extraction:
  ‚Ä¢ Na... [truncated]
2025-08-29T18:10:46.512Z info: [MCP][mcp-chrome] -------------------------------------------------‚îò
2025-08-29T18:10:46.514Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T18:10:46.637Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T18:10:46.638Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T18:10:46.779Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T18:10:46.787Z debug: Merged 33 app-level tools
2025-08-29T18:10:46.787Z info: MCP servers initialized successfully. Added 33 MCP tools.
2025-08-29T18:10:46.787Z debug: Checking if agent permissions migration is needed
2025-08-29T18:10:46.792Z debug: Collection already exists: aclentries
2025-08-29T18:10:46.818Z debug: Agent migration check completed
{
  totalToMigrate: 0,
  globalEditAccess: 0,
  globalViewAccess: 0,
  privateAgents: 0,
}
2025-08-29T18:10:46.820Z debug: Checking if prompt permissions migration is needed
2025-08-29T18:10:46.823Z debug: Collection already exists: aclentries
2025-08-29T18:10:46.840Z debug: Prompt migration check completed
{
  totalToMigrate: 0,
  globalViewAccess: 0,
  privateGroups: 0,
}
2025-08-29T18:11:16.542Z debug: [MCP][mcp-chrome] Transport sending: {"jsonrpc":"2.0","method":"notifications/cancelled","params":{"requestId":0,"reason":"McpError: MCP error -32001:... [truncated]
2025-08-29T18:11:16.543Z error: [MCP][mcp-chrome] Connection failed: MCP error -32001: Request timed out
2025-08-29T18:11:18.560Z debug: [MCP][mcp-chrome] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librecha... [truncated]
2025-08-29T18:11:44.211Z debug: Merged 33 user-level tools
2025-08-29T18:11:45.100Z debug: [MCP][mcp-chrome] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librecha... [truncated]
2025-08-29T18:11:45.100Z debug: [MCP][d1-database] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librech... [truncated]
2025-08-29T18:11:45.101Z debug: [MCP][prompt-instructions] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"... [truncated]
2025-08-29T18:11:45.101Z debug: [MCP][template-document] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@l... [truncated]
2025-08-29T18:11:46.297Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{"listChanged"... [truncated]
2025-08-29T18:11:46.297Z debug: [MCP][prompt-instructions] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T18:11:46.297Z debug: [MCP][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T18:11:46.420Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T18:11:46.421Z debug: [MCP][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T18:11:46.421Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T18:11:46.473Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T18:11:46.525Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities":{"tools":{}},"serverInfo":{"nam... [truncated]
2025-08-29T18:11:46.526Z debug: [MCP][d1-database] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T18:11:46.526Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T18:11:46.673Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T18:11:46.674Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T18:11:46.674Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T18:11:46.716Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T18:11:47.296Z error: [MCP][template-document] Connection failed: MCP error -32000: Connection closed
2025-08-29T18:11:49.302Z debug: [MCP][template-document] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@l... [truncated]
2025-08-29T18:11:50.336Z error: [MCP][template-document] Connection failed: MCP error -32000: Connection closed
2025-08-29T18:11:54.342Z debug: [MCP][template-document] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@l... [truncated]
2025-08-29T18:11:55.405Z error: [MCP][template-document] Connection failed: MCP error -32000: Connection closed
2025-08-29T18:11:55.405Z error: [MCP][template-document] Failed to connect after 3 attempts MCP error -32000: Connection closed
2025-08-29T18:11:55.405Z error: [MCP][User: 68b1ababa6d361e541dc7c03] Error getting app connections: MCP error -32000: Connection closed
2025-08-29T18:12:18.561Z debug: [MCP][mcp-chrome] Transport sending: {"jsonrpc":"2.0","method":"notifications/cancelled","params":{"requestId":1,"reason":"McpError: MCP error -32001:... [truncated]
2025-08-29T18:12:18.562Z error: [MCP][mcp-chrome] Connection failed: MCP error -32001: Request timed out
2025-08-29T18:12:22.568Z debug: [MCP][mcp-chrome] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librecha... [truncated]
2025-08-29T18:12:45.101Z debug: [MCP][mcp-chrome] Transport sending: {"jsonrpc":"2.0","method":"notifications/cancelled","params":{"requestId":0,"reason":"McpError: MCP error -32001:... [truncated]
2025-08-29T18:12:45.102Z error: [MCP][mcp-chrome] Connection failed: MCP error -32001: Request timed out
2025-08-29T18:12:47.108Z debug: [MCP][mcp-chrome] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librecha... [truncated]
2025-08-29T18:13:22.569Z debug: [MCP][mcp-chrome] Transport sending: {"jsonrpc":"2.0","method":"notifications/cancelled","params":{"requestId":2,"reason":"McpError: MCP error -32001:... [truncated]
2025-08-29T18:13:22.572Z error: [MCP][mcp-chrome] Connection failed: MCP error -32001: Request timed out
2025-08-29T18:13:22.572Z error: [MCP][mcp-chrome] Failed to connect after 3 attempts MCP error -32001: Request timed out
2025-08-29T18:13:47.109Z debug: [MCP][mcp-chrome] Transport sending: {"jsonrpc":"2.0","method":"notifications/cancelled","params":{"requestId":1,"reason":"McpError: MCP error -32001:... [truncated]
2025-08-29T18:13:47.110Z error: [MCP][mcp-chrome] Connection failed: MCP error -32001: Request timed out
2025-08-29T18:13:51.115Z debug: [MCP][mcp-chrome] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librecha... [truncated]
2025-08-29T18:14:51.114Z debug: [MCP][mcp-chrome] Transport sending: {"jsonrpc":"2.0","method":"notifications/cancelled","params":{"requestId":2,"reason":"McpError: MCP error -32001:... [truncated]
2025-08-29T18:14:51.115Z error: [MCP][mcp-chrome] Connection failed: MCP error -32001: Request timed out
2025-08-29T18:14:51.115Z error: [MCP][mcp-chrome] Failed to connect after 3 attempts MCP error -32001: Request timed out
2025-08-29T18:19:38.927Z debug: [AgentController] Request aborted on close
2025-08-29T18:19:38.928Z debug: [BaseClient] Loading history:
{
  conversationId: "af5c1b74-ced9-4860-9284-35571cb7e68e",
  parentMessageId: "00000000-0000-0000-0000-000000000000",
}
2025-08-29T18:19:39.286Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 179990,
  maxContextTokens: 180000,
}
2025-08-29T18:19:39.286Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 179990,
  maxContextTokens: 180000,
}
2025-08-29T18:19:39.286Z debug: [BaseClient] tokenCountMap:
{
  6670c85f-9924-48ae-8733-4f7d2276ef96: 7,
}
2025-08-29T18:19:39.286Z debug: [BaseClient]
{
  promptTokens: 10,
  remainingContextTokens: 179990,
  payloadSize: 1,
  maxContextTokens: 180000,
}
2025-08-29T18:19:39.287Z debug: [BaseClient] tokenCountMap
{
  6670c85f-9924-48ae-8733-4f7d2276ef96: 7,
}
2025-08-29T18:19:39.287Z debug: [BaseClient] userMessage
{
  messageId: "6670c85f-9924-48ae-8733-4f7d2276ef96",
  parentMessageId: "00000000-0000-0000-0000-000000000000",
  conversationId: "af5c1b74-ced9-4860-9284-35571cb7e68e",
  sender: "User",
  text: "travel_agent_start",
  isCreatedByUser: true,
  tokenCount: 7,
}
2025-08-29T18:19:39.481Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T18:20:01.818Z debug: [AgentController] Request closed
2025-08-29T18:20:01.821Z debug: [AgentController] Request aborted on close
2025-08-29T18:20:01.830Z error: [api/server/controllers/agents/client.js #sendCompletion] Operation aborted Aborted
2025-08-29T18:20:01.858Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T18:20:02.817Z debug: [saveConvo] api/server/services/Endpoints/agents/title.js
2025-08-29T18:20:02.827Z debug: [AgentController] Title generation started
2025-08-29T18:20:02.827Z debug: [AgentController] Title generation completed
2025-08-29T18:20:02.828Z debug: [AgentController] Performing cleanup
2025-08-29T18:20:02.828Z debug: [AgentController] Cleaning up abort controller
2025-08-29T18:20:02.828Z debug: [AgentController] Cleanup completed
2025-08-29T18:20:10.347Z info: [MCP Reinitialize] Reinitializing server: prompt-instructions
2025-08-29T18:20:10.348Z info: [MCP Reinitialize] Disconnected existing user connection for server: prompt-instructions
2025-08-29T18:20:10.349Z info: [MCP][User: 68b1ababa6d361e541dc7c03][prompt-instructions] Establishing new connection
2025-08-29T18:20:10.600Z debug: [mcp_get_tokens:68b1ababa6d361e541dc7c03:prompt-instructions] Creating initial flow state
2025-08-29T18:20:10.602Z info: [MCP][User: 68b1ababa6d361e541dc7c03][prompt-instructions] Access token missing
2025-08-29T18:20:10.604Z info: [MCP][User: 68b1ababa6d361e541dc7c03][prompt-instructions] Access token missing and no refresh token available
2025-08-29T18:20:10.614Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][prompt-instructions] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabil... [truncated]
2025-08-29T18:20:11.442Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capab... [truncated]
2025-08-29T18:20:11.443Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][prompt-instructions] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T18:20:11.443Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T18:20:11.565Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not fo... [truncated]
2025-08-29T18:20:11.566Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T18:20:11.566Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T18:20:11.609Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"get_instruction","d... [truncated]
2025-08-29T18:20:11.610Z info: [MCP][User: 68b1ababa6d361e541dc7c03][prompt-instructions] Connection successfully established
2025-08-29T18:20:11.610Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T18:20:11.610Z
2025-08-29T18:20:11.610Z info: [MCP Reinitialize] Successfully established connection for prompt-instructions
2025-08-29T18:20:11.610Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T18:20:11.646Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"get_instruction","d... [truncated]
2025-08-29T18:20:11.650Z debug: [MCP Cache] Updated 11 tools for prompt-instructions user 68b1ababa6d361e541dc7c03
2025-08-29T18:20:11.650Z debug: [MCP Reinitialize] Sending response for prompt-instructions - oauthRequired: false, oauthUrl: null
2025-08-29T18:20:11.653Z debug: MCP server 'prompt-instructions' reinitialized successfully
{
    azure-ai-search.type: "function",
    function.name: "azure-ai-search",
    function.description: "Use the 'azure-ai-search' tool to retrieve search results relevant to your input",
    parameters.type: "object",
    query.type: "string",
    query.description: "Search word or phrase to Azure AI Search",
    // 1 required(s)
    parameters.required: ["query"],
    required.0: "query",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    dalle.type: "function",
    function.name: "dalle",
    function.description: "Use DALLE to create images from text descriptions.\n    - It requires prompts to be in English, detai... [truncated]",
    parameters.type: "object",
    prompt.type: "string",
    prompt.maxLength: 4000,
    prompt.description: "A text description of the desired image, following the rules, up to 4000 characters.",
    style.type: "string",
    // 2 enum(s)
    style.enum: ["vivid","natural"],
    enum.0: "vivid",
    enum.1: "natural",
    style.description: "Must be one of `vivid` or `natural`. `vivid` generates hyper-real and dramatic images, `natural` pro... [truncated]",
    quality.type: "string",
    // 2 enum(s)
    quality.enum: ["hd","standard"],
    enum.0: "hd",
    enum.1: "standard",
    quality.description: "The quality of the generated image. Only `hd` and `standard` are supported.",
    size.type: "string",
    // 3 enum(s)
    size.enum: ["1024x1024","1792x1024","1024x1792"],
    enum.0: "1024x1024",
    enum.1: "1792x1024",
    enum.2: "1024x1792",
    size.description: "The size of the requested image. Use 1024x1024 (square) as the default, 1792x1024 if the user reques... [truncated]",
    // 4 required(s)
    parameters.required: ["prompt","style","quality","size"],
    required.0: "prompt",
    required.1: "style",
    required.2: "quality",
    required.3: "size",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    flux.type: "function",
    function.name: "flux",
    function.description: "Use Flux to generate images from text descriptions. This tool can generate images and list available... [truncated]",
    parameters.type: "object",
    action.type: "string",
    // 3 enum(s)
    action.enum: ["generate","list_finetunes","generate_finetuned"],
    enum.0: "generate",
    enum.1: "list_finetunes",
    enum.2: "generate_finetuned",
    action.default: "generate",
    action.description: "Action to perform: \"generate\" for image generation, \"generate_finetuned\" for finetuned model generat... [truncated]",
    prompt.type: "string",
    prompt.description: "Text prompt for image generation. Required when action is \"generate\". Not used for list_finetunes.",
    width.type: "number",
    width.description: "Width of the generated image in pixels. Must be a multiple of 32. Default is 1024.",
    height.type: "number",
    height.description: "Height of the generated image in pixels. Must be a multiple of 32. Default is 768.",
    prompt_upsampling.type: "boolean",
    prompt_upsampling.default: false,
    prompt_upsampling.description: "Whether to perform upsampling on the prompt.",
    steps.type: "integer",
    steps.description: "Number of steps to run the model for, a number from 1 to 50. Default is 40.",
    seed.type: "number",
    seed.description: "Optional seed for reproducibility.",
    safety_tolerance.type: "number",
    safety_tolerance.default: 6,
    safety_tolerance.description: "Tolerance level for input and output moderation. Between 0 and 6, 0 being most strict, 6 being least... [truncated]",
    endpoint.type: "string",
    // 6 enum(s)
    endpoint.enum: ["/v1/flux-pro-1.1","/v1/flux-pro","/v1/flux-dev","/v1/flux-pro-1.1-ultra","/v1/flux-pro-finetuned","/v1/flux-pro-1.1-ultra-finetuned"],
    enum.0: "/v1/flux-pro-1.1",
    enum.1: "/v1/flux-pro",
    enum.2: "/v1/flux-dev",
    enum.3: "/v1/flux-pro-1.1-ultra",
    enum.4: "/v1/flux-pro-finetuned",
    enum.5: "/v1/flux-pro-1.1-ultra-finetuned",
    endpoint.default: "/v1/flux-pro-1.1",
    endpoint.description: "Endpoint to use for image generation.",
    raw.type: "boolean",
    raw.default: false,
    raw.description: "Generate less processed, more natural-looking images. Only works for /v1/flux-pro-1.1-ultra.",
    finetune_id.type: "string",
    finetune_id.description: "ID of the finetuned model to use",
    finetune_strength.type: "number",
    finetune_strength.default: 1.1,
    finetune_strength.description: "Strength of the finetuning effect (typically between 0.1 and 1.2)",
    guidance.type: "number",
    guidance.default: 2.5,
    guidance.description: "Guidance scale for finetuned models",
    aspect_ratio.type: "string",
    aspect_ratio.default: "16:9",
    aspect_ratio.description: "Aspect ratio for ultra models (e.g., \"16:9\")",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    google.type: "function",
    function.name: "google",
    function.description: "A search engine optimized for comprehensive, accurate, and trusted results. Useful for when you need... [truncated]",
    parameters.type: "object",
    query.type: "string",
    query.minLength: 1,
    query.description: "The search query string.",
    max_results.type: "number",
    max_results.minimum: 1,
    max_results.maximum: 10,
    max_results.description: "The maximum number of search results to return. Defaults to 10.",
    // 1 required(s)
    parameters.required: ["query"],
    required.0: "query",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    open_weather.type: "function",
    function.name: "open_weather",
    function.description: "Provides weather data from OpenWeather One Call API 3.0. Actions: help, current_forecast, timestamp,... [truncated]",
    parameters.type: "object",
    action.type: "string",
    // 5 enum(s)
    action.enum: ["help","current_forecast","timestamp","daily_aggregation","overview"],
    enum.0: "help",
    enum.1: "current_forecast",
    enum.2: "timestamp",
    enum.3: "daily_aggregation",
    enum.4: "overview",
    city.type: "string",
    lat.type: "number",
    lon.type: "number",
    exclude.type: "string",
    units.type: "string",
    // 3 enum(s)
    units.enum: ["Celsius","Kelvin","Fahrenheit"],
    enum.0: "Celsius",
    enum.1: "Kelvin",
    enum.2: "Fahrenheit",
    lang.type: "string",
    date.type: "string",
    tz.type: "string",
    // 1 required(s)
    parameters.required: ["action"],
    required.0: "action",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    render_trip_status.type: "function",
    function.name: "render_trip_status",
    function.description: "Render a compact status card for the active trip (trip name, cost, percent complete, phase, dates, a... [truncated]",
    parameters.type: "object",
    trip_name.type: "string",
    trip_name.minLength: 1,
    percent_complete.type: "number",
    percent_complete.minimum: 0,
    percent_complete.maximum: 100,
    percent_complete.default: 0,
    phase.type: "string",
    phase.minLength: 1,
    dates.type: "string",
    dates.minLength: 1,
    // 2 type(s)
    cost.type: ["string","number"],
    type.0: "string",
    type.1: "number",
    next_steps.type: "array",
    items.type: "string",
    theme.type: "object",
    primary.type: "string",
    accent.type: "string",
    text.type: "string",
    background.type: "string",
    theme.additionalProperties: false,
    // 3 required(s)
    parameters.required: ["trip_name","phase","dates"],
    required.0: "trip_name",
    required.1: "phase",
    required.2: "dates",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    stable-diffusion.type: "function",
    function.name: "stable-diffusion",
    function.description: "You can generate images using text with 'stable-diffusion'. This tool is exclusively for visual cont... [truncated]",
    parameters.type: "object",
    prompt.type: "string",
    prompt.description: "Detailed keywords to describe the subject, using at least 7 keywords to accurately describe the imag... [truncated]",
    negative_prompt.type: "string",
    negative_prompt.description: "Keywords we want to exclude from the final image, using at least 7 keywords to accurately describe t... [truncated]",
    // 2 required(s)
    parameters.required: ["prompt","negative_prompt"],
    required.0: "prompt",
    required.1: "negative_prompt",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    tavily_search_results_json.type: "function",
    function.name: "tavily_search_results_json",
    function.description: "A search engine optimized for comprehensive, accurate, and trusted results. Useful for when you need... [truncated]",
    parameters.type: "object",
    query.type: "string",
    query.minLength: 1,
    query.description: "The search query string.",
    max_results.type: "number",
    max_results.minimum: 1,
    max_results.maximum: 10,
    max_results.description: "The maximum number of search results to return. Defaults to 5.",
    search_depth.type: "string",
    // 2 enum(s)
    search_depth.enum: ["basic","advanced"],
    enum.0: "basic",
    enum.1: "advanced",
    search_depth.description: "The depth of the search, affecting result quality and response time (`basic` or `advanced`). Default... [truncated]",
    include_images.type: "boolean",
    include_images.description: "Whether to include a list of query-related images in the response. Default is False.",
    include_answer.type: "boolean",
    include_answer.description: "Whether to include answers in the search results. Default is False.",
    include_raw_content.type: "boolean",
    include_raw_content.description: "Whether to include raw content in the search results. Default is False.",
    include_domains.type: "array",
    items.type: "string",
    include_domains.description: "A list of domains to specifically include in the search results.",
    exclude_domains.type: "array",
    items.type: "string",
    exclude_domains.description: "A list of domains to specifically exclude from the search results.",
    topic.type: "string",
    // 3 enum(s)
    topic.enum: ["general","news","finance"],
    enum.0: "general",
    enum.1: "news",
    enum.2: "finance",
    topic.description: "The category of the search. Use news ONLY if query SPECIFCALLY mentions the word \"news\".",
    time_range.type: "string",
    // 8 enum(s)
    time_range.enum: ["day","week","month","year","d","w","m","y"],
    enum.0: "day",
    enum.1: "week",
    enum.2: "month",
    enum.3: "year",
    enum.4: "d",
    enum.5: "w",
    enum.6: "m",
    enum.7: "y",
    time_range.description: "The time range back from the current date to filter results.",
    days.type: "number",
    days.minimum: 1,
    days.description: "Number of days back from the current date to include. Only if topic is news.",
    include_image_descriptions.type: "boolean",
    include_image_descriptions.description: "When include_images is true, also add a descriptive text for each image. Default is false.",
    // 1 required(s)
    parameters.required: ["query"],
    required.0: "query",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    traversaal_search.type: "function",
    function.name: "traversaal_search",
    function.description: "An AI search engine optimized for comprehensive, accurate, and trusted results.\n    Useful for when ... [truncated]",
    parameters.type: "object",
    query.type: "string",
    query.description: "A properly written sentence to be interpreted by an AI to search the web according to the user's req... [truncated]",
    // 1 required(s)
    parameters.required: ["query"],
    required.0: "query",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    wolfram.type: "function",
    function.name: "wolfram",
    function.description: "WolframAlpha offers computation, math, curated knowledge, and real-time data. It handles natural lan... [truncated]",
    parameters.type: "object",
    input.type: "string",
    input.description: "Natural language query to WolframAlpha following the guidelines",
    // 1 required(s)
    parameters.required: ["input"],
    required.0: "input",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    calculator.type: "function",
    function.name: "calculator",
    function.description: "Useful for getting the result of a math expression. The input to this tool should be a valid mathema... [truncated]",
    parameters.type: "object",
    input.type: "string",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    image_gen_oai.type: "function",
    function.name: "image_gen_oai",
    function.description: "Generates high-quality, original images based solely on text, not using any uploaded reference image... [truncated]",
    parameters.type: "object",
    prompt.type: "string",
    prompt.maxLength: 32000,
    prompt.description: "Describe the image you want in detail. \n      Be highly specific‚Äîbreak your idea into layers: \n     ... [truncated]",
    background.type: "string",
    // 3 enum(s)
    background.enum: ["transparent","opaque","auto"],
    enum.0: "transparent",
    enum.1: "opaque",
    enum.2: "auto",
    background.description: "Sets transparency for the background. Must be one of transparent, opaque or auto (default). When tra... [truncated]",
    quality.type: "string",
    // 4 enum(s)
    quality.enum: ["auto","high","medium","low"],
    enum.0: "auto",
    enum.1: "high",
    enum.2: "medium",
    enum.3: "low",
    quality.description: "The quality of the image. One of auto (default), high, medium, or low.",
    size.type: "string",
    // 4 enum(s)
    size.enum: ["auto","1024x1024","1536x1024","1024x1536"],
    enum.0: "auto",
    enum.1: "1024x1024",
    enum.2: "1536x1024",
    enum.3: "1024x1536",
    size.description: "The size of the generated image. One of 1024x1024, 1536x1024 (landscape), 1024x1536 (portrait), or a... [truncated]",
    // 1 required(s)
    parameters.required: ["prompt"],
    required.0: "prompt",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    image_edit_oai.type: "function",
    function.name: "image_edit_oai",
    function.description: "Generates high-quality, original images based on text and one or more uploaded/referenced images.\n\nW... [truncated]",
    parameters.type: "object",
    image_ids.type: "array",
    items.type: "string",
    image_ids.minItems: 1,
    image_ids.description: "IDs (image ID strings) of previously generated or uploaded images that should guide the edit.\n\nGuide... [truncated]",
    prompt.type: "string",
    prompt.maxLength: 32000,
    prompt.description: "Describe the changes, enhancements, or new ideas to apply to the uploaded image(s).\n      Be highly ... [truncated]",
    quality.type: "string",
    // 4 enum(s)
    quality.enum: ["auto","high","medium","low"],
    enum.0: "auto",
    enum.1: "high",
    enum.2: "medium",
    enum.3: "low",
    quality.description: "The quality of the image. One of auto (default), high, medium, or low. High/medium/low only supporte... [truncated]",
    size.type: "string",
    // 6 enum(s)
    size.enum: ["auto","1024x1024","1536x1024","1024x1536","256x256","512x512"],
    enum.0: "auto",
    enum.1: "1024x1024",
    enum.2: "1536x1024",
    enum.3: "1024x1536",
    enum.4: "256x256",
    enum.5: "512x512",
    size.description: "The size of the generated images. For gpt-image-1: auto (default), 1024x1024, 1536x1024, 1024x1536. ... [truncated]",
    // 2 required(s)
    parameters.required: ["image_ids","prompt"],
    required.0: "image_ids",
    required.1: "prompt",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    youtube_search.type: "function",
    function.name: "youtube_search",
    function.description: "Search for YouTube videos by keyword or phrase.\n- Required: query (search terms to find videos)\n- Op... [truncated]",
    parameters.type: "object",
    query.type: "string",
    query.description: "Search query terms",
    maxResults.type: "integer",
    maxResults.minimum: 1,
    maxResults.maximum: 50,
    maxResults.description: "Number of results (1-50)",
    // 1 required(s)
    parameters.required: ["query"],
    required.0: "query",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    youtube_info.type: "function",
    function.name: "youtube_info",
    function.description: "Get detailed metadata and statistics for a specific YouTube video.\n- Required: url (full YouTube URL... [truncated]",
    parameters.type: "object",
    url.type: "string",
    url.description: "YouTube video URL or ID",
    // 1 required(s)
    parameters.required: ["url"],
    required.0: "url",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    youtube_comments.type: "function",
    function.name: "youtube_comments",
    function.description: "Retrieve top-level comments from a YouTube video.\n- Required: url (full YouTube URL or video ID)\n- O... [truncated]",
    parameters.type: "object",
    url.type: "string",
    url.description: "YouTube video URL or ID",
    maxResults.type: "integer",
    maxResults.minimum: 1,
    maxResults.maximum: 50,
    maxResults.description: "Number of comments to retrieve",
    // 1 required(s)
    parameters.required: ["url"],
    required.0: "url",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    youtube_transcript.type: "function",
    function.name: "youtube_transcript",
    function.description: "Fetch and parse the transcript/captions of a YouTube video.\n- Required: url (full YouTube URL or vid... [truncated]",
    parameters.type: "object",
    url.type: "string",
    url.description: "YouTube video URL or ID",
    // 1 required(s)
    parameters.required: ["url"],
    required.0: "url",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    image_vision.type: "function",
    function.name: "image_vision",
    function.description: "Get detailed text descriptions for all current image attachments.",
    parameters.type: "object",
    parameters.properties: [object Object],
    parameters.required: ,
    health_check_mcp_d1-database.type: "function",
    function.name: "health_check_mcp_d1-database",
    function.description: "Check database health and status",
    parameters.type: "object",
    parameters.properties: [object Object],
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    update_activitylog_clients_mcp_d1-database.type: "function",
    function.name: "update_activitylog_clients_mcp_d1-database",
    function.description: "Update ActivityLog entries to populate client_id from trip_id",
    parameters.type: "object",
    parameters.properties: [object Object],
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    reset_activitylog_from_trips_mcp_d1-database.type: "function",
    function.name: "reset_activitylog_from_trips_mcp_d1-database",
    function.description: "Clear ActivityLog and repopulate from trips_v2 table updated_at column",
    parameters.type: "object",
    parameters.properties: [object Object],
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    explore_database_mcp_d1-database.type: "function",
    function.name: "explore_database_mcp_d1-database",
    function.description: "Show all tables and their structure in the database",
    parameters.type: "object",
    parameters.properties: [object Object],
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    get_anything_mcp_d1-database.type: "function",
    function.name: "get_anything_mcp_d1-database",
    function.description: "Get COMPLETE information about any trip, client, or travel-related query. Just describe what you nee... [truncated]",
    parameters.type: "object",
    query.type: "string",
    query.description: "Natural language query like \"Smith family Hawaii trip\" or \"john@email.com\" or \"upcoming trips\"",
    include_everything.type: "boolean",
    include_everything.default: true,
    include_everything.description: "Return all possible related information to avoid follow-up queries",
    // 1 required(s)
    parameters.required: ["query"],
    required.0: "query",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    remember_context_mcp_d1-database.type: "function",
    function.name: "remember_context_mcp_d1-database",
    function.description: "Store important facts from the current conversation to avoid repeated lookups",
    parameters.type: "object",
    session_id.type: "string",
    session_id.description: "Current session identifier",
    facts.type: "array",
    items.type: "object",
    type.type: "string",
    // 4 enum(s)
    type.enum: ["preference","constraint","decision","context"],
    enum.0: "preference",
    enum.1: "constraint",
    enum.2: "decision",
    enum.3: "context",
    subject.type: "string",
    fact.type: "string",
    // 3 required(s)
    items.required: ["type","subject","fact"],
    required.0: "type",
    required.1: "subject",
    required.2: "fact",
    items.additionalProperties: false,
    facts.description: "Facts learned in this conversation",
    active_context.type: "object",
    trip_name.type: "string",
    client_email.type: "string",
    current_focus.type: "string",
    active_context.additionalProperties: false,
    // 2 required(s)
    parameters.required: ["session_id","facts"],
    required.0: "session_id",
    required.1: "facts",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    bulk_trip_operations_mcp_d1-database.type: "function",
    function.name: "bulk_trip_operations_mcp_d1-database",
    function.description: "Perform multiple trip operations in a single call - assign clients, add activities, update costs, mo... [truncated]",
    parameters.type: "object",
    trip_identifier.type: "string",
    trip_identifier.description: "Trip name or ID",
    operations.type: "array",
    items.type: "object",
    type.type: "string",
    // 8 enum(s)
    type.enum: ["add_activity","update_cost","add_note","update_status","add_document","assign_client","advance_workflow","set_workflow_step"],
    enum.0: "add_activity",
    enum.1: "update_cost",
    enum.2: "add_note",
    enum.3: "update_status",
    enum.4: "add_document",
    enum.5: "assign_client",
    enum.6: "advance_workflow",
    enum.7: "set_workflow_step",
    data.description: "Operation-specific data. For workflow operations: {phase?, step_number?, completion_data?, notes?}",
    // 1 required(s)
    items.required: ["type"],
    required.0: "type",
    items.additionalProperties: false,
    operations.description: "Array of operations to perform including workflow operations",
    // 2 required(s)
    parameters.required: ["trip_identifier","operations"],
    required.0: "trip_identifier",
    required.1: "operations",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    regenerate_context_mcp_d1-database.type: "function",
    function.name: "regenerate_context_mcp_d1-database",
    function.description: "Manually regenerate LLM context cache for a specific trip or client",
    parameters.type: "object",
    trip_id.type: "number",
    trip_id.description: "Trip ID to regenerate context for",
    client_id.type: "number",
    client_id.description: "Client ID to regenerate context for",
    trip_name.type: "string",
    trip_name.description: "Trip name to regenerate context for",
    client_email.type: "string",
    client_email.description: "Client email to regenerate context for",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    create_trip_v2_mcp_d1-database.type: "function",
    function.name: "create_trip_v2_mcp_d1-database",
    function.description: "Create a new trip in the trips_v2 table with proper JSON structure",
    parameters.type: "object",
    trip_name.type: "string",
    trip_name.description: "Name/title for the trip",
    start_date.type: "string",
    start_date.description: "Start date (YYYY-MM-DD format)",
    end_date.type: "string",
    end_date.description: "End date (YYYY-MM-DD format)",
    destinations.type: "string",
    destinations.description: "Primary destination(s)",
    total_cost.type: "number",
    total_cost.default: 0,
    total_cost.description: "Total estimated cost",
    status.type: "string",
    status.default: "planning",
    status.description: "Trip status: planning, confirmed, in_progress, completed, cancelled",
    notes.type: "string",
    notes.description: "Trip notes or description",
    primary_client_email.type: "string",
    primary_client_email.description: "Email of primary client (if known)",
    // 3 required(s)
    parameters.required: ["trip_name","start_date","end_date"],
    required.0: "trip_name",
    required.1: "start_date",
    required.2: "end_date",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    create_client_v2_mcp_d1-database.type: "function",
    function.name: "create_client_v2_mcp_d1-database",
    function.description: "Create a new client in the clients_v2 table with proper JSON structure",
    parameters.type: "object",
    email.type: "string",
    email.format: "email",
    email.description: "Client email address (required)",
    full_name.type: "string",
    full_name.description: "Client full name (required)",
    phone.type: "string",
    phone.description: "Phone number",
    address.type: "string",
    address.description: "Full address",
    preferences.type: "object",
    preferences.properties: [object Object],
    preferences.additionalProperties: false,
    preferences.description: "Travel preferences as key-value pairs",
    travel_docs.type: "object",
    travel_docs.properties: [object Object],
    travel_docs.additionalProperties: false,
    travel_docs.description: "Travel document information",
    loyalty_programs.type: "object",
    loyalty_programs.properties: [object Object],
    loyalty_programs.additionalProperties: false,
    loyalty_programs.description: "Loyalty program memberships",
    notes.type: "string",
    notes.description: "Additional notes about client",
    // 2 required(s)
    parameters.required: ["email","full_name"],
    required.0: "email",
    required.1: "full_name",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    create_trip_with_client_mcp_d1-database.type: "function",
    function.name: "create_trip_with_client_mcp_d1-database",
    function.description: "Create a new trip and assign a client (new or existing) in a single operation",
    parameters.type: "object",
    trip_name.type: "string",
    trip_name.description: "Name/title for the trip",
    start_date.type: "string",
    start_date.description: "Start date (YYYY-MM-DD format)",
    end_date.type: "string",
    end_date.description: "End date (YYYY-MM-DD format)",
    destinations.type: "string",
    destinations.description: "Primary destination(s)",
    total_cost.type: "number",
    total_cost.default: 0,
    total_cost.description: "Total estimated cost",
    status.type: "string",
    status.default: "planning",
    status.description: "Trip status",
    trip_notes.type: "string",
    trip_notes.description: "Trip notes or description",
    client_email.type: "string",
    client_email.format: "email",
    client_email.description: "Client email address",
    client_full_name.type: "string",
    client_full_name.description: "Client full name",
    client_phone.type: "string",
    client_phone.description: "Client phone number",
    client_preferences.type: "object",
    client_preferences.properties: [object Object],
    client_preferences.additionalProperties: false,
    client_preferences.description: "Client travel preferences",
    client_role.type: "string",
    client_role.default: "primary_traveler",
    client_role.description: "Client role in trip",
    // 5 required(s)
    parameters.required: ["trip_name","start_date","end_date","client_email","client_full_name"],
    required.0: "trip_name",
    required.1: "start_date",
    required.2: "end_date",
    required.3: "client_email",
    required.4: "client_full_name",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    advance_workflow_phase_mcp_d1-database.type: "function",
    function.name: "advance_workflow_phase_mcp_d1-database",
    function.description: "Advance a trip to the next workflow phase with completion data and validation",
    parameters.type: "object",
    trip_identifier.type: "string",
    trip_identifier.description: "Trip name or ID",
    new_phase.type: "string",
    // 7 enum(s)
    new_phase.enum: ["interview","conceptualization","planning","proposal","revision","finalization","preparation"],
    enum.0: "interview",
    enum.1: "conceptualization",
    enum.2: "planning",
    enum.3: "proposal",
    enum.4: "revision",
    enum.5: "finalization",
    enum.6: "preparation",
    new_phase.description: "New workflow phase to advance to",
    completion_data.type: "object",
    completion_data.properties: [object Object],
    completion_data.additionalProperties: false,
    completion_data.description: "Data about the completed phase",
    step_number.type: "number",
    step_number.default: 1,
    step_number.description: "Step number within the new phase",
    notes.type: "string",
    notes.description: "Notes about the phase transition",
    // 2 required(s)
    parameters.required: ["trip_identifier","new_phase"],
    required.0: "trip_identifier",
    required.1: "new_phase",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    set_workflow_step_mcp_d1-database.type: "function",
    function.name: "set_workflow_step_mcp_d1-database",
    function.description: "Set the current step within the current workflow phase",
    parameters.type: "object",
    trip_identifier.type: "string",
    trip_identifier.description: "Trip name or ID",
    step_number.type: "number",
    step_number.description: "Step number within current phase",
    step_data.type: "object",
    step_data.properties: [object Object],
    step_data.additionalProperties: false,
    step_data.description: "Data specific to this step",
    // 2 required(s)
    parameters.required: ["trip_identifier","step_number"],
    required.0: "trip_identifier",
    required.1: "step_number",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    get_workflow_status_mcp_d1-database.type: "function",
    function.name: "get_workflow_status_mcp_d1-database",
    function.description: "Get detailed workflow status for a trip including phase history and current state",
    parameters.type: "object",
    trip_identifier.type: "string",
    trip_identifier.description: "Trip name or ID",
    // 1 required(s)
    parameters.required: ["trip_identifier"],
    required.0: "trip_identifier",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    get_workflow_instructions_mcp_d1-database.type: "function",
    function.name: "get_workflow_instructions_mcp_d1-database",
    function.description: "Get phase-specific instructions for the current workflow state of a trip",
    parameters.type: "object",
    trip_identifier.type: "string",
    trip_identifier.description: "Trip name or ID",
    include_all_phases.type: "boolean",
    include_all_phases.default: false,
    include_all_phases.description: "Include instructions for all phases, not just current",
    // 1 required(s)
    parameters.required: ["trip_identifier"],
    required.0: "trip_identifier",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    initialize_workflow_mcp_d1-database.type: "function",
    function.name: "initialize_workflow_mcp_d1-database",
    function.description: "Initialize workflow state for a trip with a starting phase",
    parameters.type: "object",
    trip_identifier.type: "string",
    trip_identifier.description: "Trip name or ID",
    starting_phase.type: "string",
    // 7 enum(s)
    starting_phase.enum: ["interview","conceptualization","planning","proposal","revision","finalization","preparation"],
    enum.0: "interview",
    enum.1: "conceptualization",
    enum.2: "planning",
    enum.3: "proposal",
    enum.4: "revision",
    enum.5: "finalization",
    enum.6: "preparation",
    starting_phase.default: "interview",
    starting_phase.description: "Starting workflow phase",
    initial_data.type: "object",
    initial_data.properties: [object Object],
    initial_data.additionalProperties: false,
    initial_data.description: "Initial workflow data",
    // 1 required(s)
    parameters.required: ["trip_identifier"],
    required.0: "trip_identifier",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    analyze_recent_errors_mcp_d1-database.type: "function",
    function.name: "analyze_recent_errors_mcp_d1-database",
    function.description: "Analyze recent database errors and provide insights",
    parameters.type: "object",
    hours.type: "number",
    hours.default: 24,
    hours.description: "Hours to look back for errors",
    limit.type: "number",
    limit.default: 10,
    limit.description: "Maximum number of error patterns to return",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    resolve_error_pattern_mcp_d1-database.type: "function",
    function.name: "resolve_error_pattern_mcp_d1-database",
    function.description: "Mark error patterns as resolved and track successful solutions",
    parameters.type: "object",
    error_pattern.type: "string",
    error_pattern.description: "Error message pattern to resolve",
    resolution.type: "string",
    resolution.description: "Description of how the error was resolved",
    session_id.type: "string",
    session_id.description: "Session ID if resolving a specific error",
    // 2 required(s)
    parameters.required: ["error_pattern","resolution"],
    required.0: "error_pattern",
    required.1: "resolution",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    get_recent_activities_mcp_d1-database.type: "function",
    function.name: "get_recent_activities_mcp_d1-database",
    function.description: "Get recent activities from ActivityLog for CTA startup presentation",
    parameters.type: "object",
    days.type: "number",
    days.default: 7,
    days.description: "Number of days to look back",
    limit.type: "number",
    limit.default: 10,
    limit.description: "Maximum number of activities to return",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    continue_trip_mcp_d1-database.type: "function",
    function.name: "continue_trip_mcp_d1-database",
    function.description: "Resume work on a trip from ActivityLog with full context and status. Use without parameters for most... [truncated]",
    parameters.type: "object",
    search_query.type: "string",
    search_query.description: "Optional search terms to find specific trip (name, client, destination, dates)",
    activity_id.type: "number",
    activity_id.description: "Specific activity ID to continue from",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    cleanup_duplicate_clients_mcp_d1-database.type: "function",
    function.name: "cleanup_duplicate_clients_mcp_d1-database",
    function.description: "Remove duplicate or test client records based on email patterns or names while preserving legitimate... [truncated]",
    parameters.type: "object",
    dry_run.type: "boolean",
    dry_run.default: true,
    dry_run.description: "If true, only show what would be deleted without actually deleting",
    email_patterns.type: "array",
    items.type: "string",
    email_patterns.description: "Email patterns to match for deletion (e.g., [\"@example.com\"])",
    name_patterns.type: "array",
    items.type: "string",
    name_patterns.description: "Name patterns to match for deletion (e.g., [\"Test\", \"Sarah & Michael\"])",
    preserve_client_ids.type: "array",
    items.type: "number",
    preserve_client_ids.description: "Client IDs to preserve even if they match patterns",
    preserve_emails.type: "array",
    items.type: "string",
    preserve_emails.description: "Specific emails to preserve even if they match patterns",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    cleanup_duplicate_trips_mcp_d1-database.type: "function",
    function.name: "cleanup_duplicate_trips_mcp_d1-database",
    function.description: "Remove duplicate or test trip records based on name patterns while preserving legitimate trips",
    parameters.type: "object",
    dry_run.type: "boolean",
    dry_run.default: true,
    dry_run.description: "If true, only show what would be deleted without actually deleting",
    name_patterns.type: "array",
    items.type: "string",
    name_patterns.description: "Trip name patterns to match for deletion (e.g., [\"Sarah & Michael\", \"Test Trip\"])",
    preserve_trip_ids.type: "array",
    items.type: "number",
    preserve_trip_ids.description: "Trip IDs to preserve even if they match patterns",
    preserve_trip_names.type: "array",
    items.type: "string",
    preserve_trip_names.description: "Specific trip names to preserve even if they match patterns",
    // 1 required(s)
    parameters.required: ["name_patterns"],
    required.0: "name_patterns",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    get_instruction_mcp_prompt-instructions.type: "function",
    function.name: "get_instruction_mcp_prompt-instructions",
    function.description: "Retrieve a specific instruction by name from the D1 database",
    parameters.type: "object",
    name.type: "string",
    name.description: "The name/key of the instruction to retrieve",
    verbosity.type: "string",
    // 3 enum(s)
    verbosity.enum: ["minimal","normal","verbose"],
    enum.0: "minimal",
    enum.1: "normal",
    enum.2: "verbose",
    verbosity.description: "Override verbosity level for this request (optional)",
    // 1 required(s)
    parameters.required: ["name"],
    required.0: "name",
    list_instructions_mcp_prompt-instructions.type: "function",
    function.name: "list_instructions_mcp_prompt-instructions",
    function.description: "List all available instructions, optionally filtered by category",
    parameters.type: "object",
    category.type: "string",
    category.description: "Optional category filter (e.g., modes, planning, search_workflows)",
    create_instruction_mcp_prompt-instructions.type: "function",
    function.name: "create_instruction_mcp_prompt-instructions",
    function.description: "Create a new instruction in the database",
    parameters.type: "object",
    name.type: "string",
    name.description: "Unique name/key for the instruction",
    title.type: "string",
    title.description: "Human-readable title for the instruction",
    content.type: "string",
    content.description: "The instruction content in markdown format",
    category.type: "string",
    category.description: "Category for the instruction (default: general)",
    // 3 required(s)
    parameters.required: ["name","title","content"],
    required.0: "name",
    required.1: "title",
    required.2: "content",
    update_instruction_mcp_prompt-instructions.type: "function",
    function.name: "update_instruction_mcp_prompt-instructions",
    function.description: "Update an existing instruction in the database",
    parameters.type: "object",
    name.type: "string",
    name.description: "Name/key of the instruction to update",
    title.type: "string",
    title.description: "New title for the instruction",
    content.type: "string",
    content.description: "New content for the instruction",
    category.type: "string",
    category.description: "New category for the instruction",
    // 1 required(s)
    parameters.required: ["name"],
    required.0: "name",
    get_instructions_by_confidence_mcp_prompt-instructions.type: "function",
    function.name: "get_instructions_by_confidence_mcp_prompt-instructions",
    function.description: "Get instructions based on confidence level (high, medium, low, error)",
    parameters.type: "object",
    confidence_level.type: "string",
    // 4 enum(s)
    confidence_level.enum: ["high","medium","low","error"],
    enum.0: "high",
    enum.1: "medium",
    enum.2: "low",
    enum.3: "error",
    confidence_level.description: "Confidence level for instruction selection",
    // 1 required(s)
    parameters.required: ["confidence_level"],
    required.0: "confidence_level",
    set_verbosity_preference_mcp_prompt-instructions.type: "function",
    function.name: "set_verbosity_preference_mcp_prompt-instructions",
    function.description: "Set verbosity preference globally or for a specific instruction",
    parameters.type: "object",
    verbosity.type: "string",
    // 3 enum(s)
    verbosity.enum: ["minimal","normal","verbose"],
    enum.0: "minimal",
    enum.1: "normal",
    enum.2: "verbose",
    verbosity.description: "Verbosity level for instruction output",
    instruction_name.type: "string",
    instruction_name.description: "Optional: Set verbosity for a specific instruction only",
    // 1 required(s)
    parameters.required: ["verbosity"],
    required.0: "verbosity",
    get_verbosity_preference_mcp_prompt-instructions.type: "function",
    function.name: "get_verbosity_preference_mcp_prompt-instructions",
    function.description: "Get current verbosity preference",
    parameters.type: "object",
    instruction_name.type: "string",
    instruction_name.description: "Optional: Get verbosity for a specific instruction",
    travel_agent_start_mcp_prompt-instructions.type: "function",
    function.name: "travel_agent_start_mcp_prompt-instructions",
    function.description: "Start the travel agent system - loads startup-core instruction",
    parameters.type: "object",
    parameters.properties: [object Object],
    status_mcp_prompt-instructions.type: "function",
    function.name: "status_mcp_prompt-instructions",
    function.description: "Show currently loaded instructions",
    parameters.type: "object",
    parameters.properties: [object Object],
    help_mcp_prompt-instructions.type: "function",
    function.name: "help_mcp_prompt-instructions",
    function.description: "Show travel agent workflows and available commands",
    parameters.type: "object",
    parameters.properties: [object Object],
    reload_mcp_prompt-instructions.type: "function",
    function.name: "reload_mcp_prompt-instructions",
    function.description: "Refresh system instructions",
    parameters.type: "object",
    parameters.properties: [object Object],
  success: true,
  oauthRequired: false,
  serverName: "prompt-instructions",
  oauthUrl: null,
  // 11 tool(s)
  tools: [{"name":"get_instruction","description":"Retrieve a specific instruction by name from the D1 databas... [truncated],{"name":"list_instructions","description":"List all available instructions, optionally filtered by c... [truncated],{"name":"create_instruction","description":"Create a new instruction in the database","inputSchema":... [truncated],{"name":"update_instruction","description":"Update an existing instruction in the database","inputSc... [truncated],{"name":"get_instructions_by_confidence","description":"Get instructions based on confidence level (... [truncated],{"name":"set_verbosity_preference","description":"Set verbosity preference globally or for a specifi... [truncated],{"name":"get_verbosity_preference","description":"Get current verbosity preference","inputSchema":{"... [truncated],{"name":"travel_agent_start","description":"Start the travel agent system - loads startup-core instr... [truncated],{"name":"status","description":"Show currently loaded instructions","inputSchema":{"type":"object","... [truncated],{"name":"help","description":"Show travel agent workflows and available commands","inputSchema":{"ty... [truncated],{"name":"reload","description":"Refresh system instructions","inputSchema":{"type":"object","propert... [truncated]],
    0.name: "get_instruction",
    0.description: "Retrieve a specific instruction by name from the D1 database",
    inputSchema.type: "object",
    name.type: "string",
    name.description: "The name/key of the instruction to retrieve",
    verbosity.type: "string",
    // 3 enum(s)
    verbosity.enum: ["minimal","normal","verbose"],
    enum.0: "minimal",
    enum.1: "normal",
    enum.2: "verbose",
    verbosity.description: "Override verbosity level for this request (optional)",
    // 1 required(s)
    inputSchema.required: ["name"],
    required.0: "name",
    1.name: "list_instructions",
    1.description: "List all available instructions, optionally filtered by category",
    inputSchema.type: "object",
    category.type: "string",
    category.description: "Optional category filter (e.g., modes, planning, search_workflows)",
    2.name: "create_instruction",
    2.description: "Create a new instruction in the database",
    inputSchema.type: "object",
    name.type: "string",
    name.description: "Unique name/key for the instruction",
    title.type: "string",
    title.description: "Human-readable title for the instruction",
    content.type: "string",
    content.description: "The instruction content in markdown format",
    category.type: "string",
    category.description: "Category for the instruction (default: general)",
    // 3 required(s)
    inputSchema.required: ["name","title","content"],
    required.0: "name",
    required.1: "title",
    required.2: "content",
    3.name: "update_instruction",
    3.description: "Update an existing instruction in the database",
    inputSchema.type: "object",
    name.type: "string",
    name.description: "Name/key of the instruction to update",
    title.type: "string",
    title.description: "New title for the instruction",
    content.type: "string",
    content.description: "New content for the instruction",
    category.type: "string",
    category.description: "New category for the instruction",
    // 1 required(s)
    inputSchema.required: ["name"],
    required.0: "name",
    4.name: "get_instructions_by_confidence",
    4.description: "Get instructions based on confidence level (high, medium, low, error)",
    inputSchema.type: "object",
    confidence_level.type: "string",
    // 4 enum(s)
    confidence_level.enum: ["high","medium","low","error"],
    enum.0: "high",
    enum.1: "medium",
    enum.2: "low",
    enum.3: "error",
    confidence_level.description: "Confidence level for instruction selection",
    // 1 required(s)
    inputSchema.required: ["confidence_level"],
    required.0: "confidence_level",
    5.name: "set_verbosity_preference",
    5.description: "Set verbosity preference globally or for a specific instruction",
    inputSchema.type: "object",
    verbosity.type: "string",
    // 3 enum(s)
    verbosity.enum: ["minimal","normal","verbose"],
    enum.0: "minimal",
    enum.1: "normal",
    enum.2: "verbose",
    verbosity.description: "Verbosity level for instruction output",
    instruction_name.type: "string",
    instruction_name.description: "Optional: Set verbosity for a specific instruction only",
    // 1 required(s)
    inputSchema.required: ["verbosity"],
    required.0: "verbosity",
    6.name: "get_verbosity_preference",
    6.description: "Get current verbosity preference",
    inputSchema.type: "object",
    instruction_name.type: "string",
    instruction_name.description: "Optional: Get verbosity for a specific instruction",
    7.name: "travel_agent_start",
    7.description: "Start the travel agent system - loads startup-core instruction",
    inputSchema.type: "object",
    inputSchema.properties: [object Object],
    8.name: "status",
    8.description: "Show currently loaded instructions",
    inputSchema.type: "object",
    inputSchema.properties: [object Object],
    9.name: "help",
    9.description: "Show travel agent workflows and available commands",
    inputSchema.type: "object",
    inputSchema.properties: [object Object],
    10.name: "reload",
    10.description: "Refresh system instructions",
    inputSchema.type: "object",
    inputSchema.properties: [object Object],
}
2025-08-29T18:20:11.675Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":3}
2025-08-29T18:20:11.675Z debug: [MCP][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":3}
2025-08-29T18:20:11.690Z debug: [MCP][mcp-chrome] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librecha... [truncated]
2025-08-29T18:20:11.691Z debug: [MCP][template-document] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@l... [truncated]
2025-08-29T18:20:11.708Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T18:20:11.737Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"get_instruction","d... [truncated]
2025-08-29T18:20:11.739Z debug: Merged 33 user-level tools
2025-08-29T18:20:11.894Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":3,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T18:20:11.894Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T18:20:11.894Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T18:20:11.948Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T18:20:12.030Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":3,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T18:20:12.031Z debug: [MCP][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T18:20:12.031Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T18:20:12.150Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T18:20:12.905Z error: [MCP][template-document] Connection failed: MCP error -32000: Connection closed
2025-08-29T18:20:14.911Z debug: [MCP][template-document] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@l... [truncated]
2025-08-29T18:20:15.797Z error: [MCP][template-document] Connection failed: MCP error -32000: Connection closed
2025-08-29T18:20:19.804Z debug: [MCP][template-document] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@l... [truncated]
2025-08-29T18:20:20.934Z error: [MCP][template-document] Connection failed: MCP error -32000: Connection closed
2025-08-29T18:20:20.935Z error: [MCP][template-document] Failed to connect after 3 attempts MCP error -32000: Connection closed
2025-08-29T18:20:20.935Z error: [MCP][User: 68b1ababa6d361e541dc7c03] Error getting app connections: MCP error -32000: Connection closed
2025-08-29T18:20:24.599Z info: [MCP Reinitialize] Reinitializing server: d1-database
2025-08-29T18:20:24.600Z info: [MCP Reinitialize] Disconnected existing user connection for server: d1-database
2025-08-29T18:20:24.600Z info: [MCP][User: 68b1ababa6d361e541dc7c03][d1-database] Establishing new connection
2025-08-29T18:20:24.850Z debug: [mcp_get_tokens:68b1ababa6d361e541dc7c03:d1-database] Creating initial flow state
2025-08-29T18:20:24.853Z info: [MCP][User: 68b1ababa6d361e541dc7c03][d1-database] Access token missing
2025-08-29T18:20:24.858Z info: [MCP][User: 68b1ababa6d361e541dc7c03][d1-database] Access token missing and no refresh token available
2025-08-29T18:20:24.864Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][d1-database] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{... [truncated]
2025-08-29T18:20:25.998Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][d1-database] Transport received: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-06-18","capabilities"... [truncated]
2025-08-29T18:20:25.999Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][d1-database] Transport sending: {"method":"notifications/initialized","jsonrpc":"2.0"}
2025-08-29T18:20:25.999Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":1}
2025-08-29T18:20:26.137Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][d1-database] Transport received: {"jsonrpc":"2.0","id":1,"error":{"code":-32601,"message":"Method not found: pin... [truncated]
2025-08-29T18:20:26.137Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T18:20:26.137Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":2}
2025-08-29T18:20:26.277Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][d1-database] Transport received: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"health_check","description"... [truncated]
2025-08-29T18:20:26.278Z info: [MCP][User: 68b1ababa6d361e541dc7c03][d1-database] Connection successfully established
2025-08-29T18:20:26.278Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T18:20:26.278Z
2025-08-29T18:20:26.278Z info: [MCP Reinitialize] Successfully established connection for d1-database
2025-08-29T18:20:26.278Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":3}
2025-08-29T18:20:26.400Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][d1-database] Transport received: {"jsonrpc":"2.0","id":3,"result":{"tools":[{"name":"health_check","description"... [truncated]
2025-08-29T18:20:26.404Z debug: [MCP Cache] Updated 24 tools for d1-database user 68b1ababa6d361e541dc7c03
2025-08-29T18:20:26.405Z debug: [MCP Reinitialize] Sending response for d1-database - oauthRequired: false, oauthUrl: null
2025-08-29T18:20:26.407Z debug: MCP server 'd1-database' reinitialized successfully
{
    azure-ai-search.type: "function",
    function.name: "azure-ai-search",
    function.description: "Use the 'azure-ai-search' tool to retrieve search results relevant to your input",
    parameters.type: "object",
    query.type: "string",
    query.description: "Search word or phrase to Azure AI Search",
    // 1 required(s)
    parameters.required: ["query"],
    required.0: "query",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    dalle.type: "function",
    function.name: "dalle",
    function.description: "Use DALLE to create images from text descriptions.\n    - It requires prompts to be in English, detai... [truncated]",
    parameters.type: "object",
    prompt.type: "string",
    prompt.maxLength: 4000,
    prompt.description: "A text description of the desired image, following the rules, up to 4000 characters.",
    style.type: "string",
    // 2 enum(s)
    style.enum: ["vivid","natural"],
    enum.0: "vivid",
    enum.1: "natural",
    style.description: "Must be one of `vivid` or `natural`. `vivid` generates hyper-real and dramatic images, `natural` pro... [truncated]",
    quality.type: "string",
    // 2 enum(s)
    quality.enum: ["hd","standard"],
    enum.0: "hd",
    enum.1: "standard",
    quality.description: "The quality of the generated image. Only `hd` and `standard` are supported.",
    size.type: "string",
    // 3 enum(s)
    size.enum: ["1024x1024","1792x1024","1024x1792"],
    enum.0: "1024x1024",
    enum.1: "1792x1024",
    enum.2: "1024x1792",
    size.description: "The size of the requested image. Use 1024x1024 (square) as the default, 1792x1024 if the user reques... [truncated]",
    // 4 required(s)
    parameters.required: ["prompt","style","quality","size"],
    required.0: "prompt",
    required.1: "style",
    required.2: "quality",
    required.3: "size",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    flux.type: "function",
    function.name: "flux",
    function.description: "Use Flux to generate images from text descriptions. This tool can generate images and list available... [truncated]",
    parameters.type: "object",
    action.type: "string",
    // 3 enum(s)
    action.enum: ["generate","list_finetunes","generate_finetuned"],
    enum.0: "generate",
    enum.1: "list_finetunes",
    enum.2: "generate_finetuned",
    action.default: "generate",
    action.description: "Action to perform: \"generate\" for image generation, \"generate_finetuned\" for finetuned model generat... [truncated]",
    prompt.type: "string",
    prompt.description: "Text prompt for image generation. Required when action is \"generate\". Not used for list_finetunes.",
    width.type: "number",
    width.description: "Width of the generated image in pixels. Must be a multiple of 32. Default is 1024.",
    height.type: "number",
    height.description: "Height of the generated image in pixels. Must be a multiple of 32. Default is 768.",
    prompt_upsampling.type: "boolean",
    prompt_upsampling.default: false,
    prompt_upsampling.description: "Whether to perform upsampling on the prompt.",
    steps.type: "integer",
    steps.description: "Number of steps to run the model for, a number from 1 to 50. Default is 40.",
    seed.type: "number",
    seed.description: "Optional seed for reproducibility.",
    safety_tolerance.type: "number",
    safety_tolerance.default: 6,
    safety_tolerance.description: "Tolerance level for input and output moderation. Between 0 and 6, 0 being most strict, 6 being least... [truncated]",
    endpoint.type: "string",
    // 6 enum(s)
    endpoint.enum: ["/v1/flux-pro-1.1","/v1/flux-pro","/v1/flux-dev","/v1/flux-pro-1.1-ultra","/v1/flux-pro-finetuned","/v1/flux-pro-1.1-ultra-finetuned"],
    enum.0: "/v1/flux-pro-1.1",
    enum.1: "/v1/flux-pro",
    enum.2: "/v1/flux-dev",
    enum.3: "/v1/flux-pro-1.1-ultra",
    enum.4: "/v1/flux-pro-finetuned",
    enum.5: "/v1/flux-pro-1.1-ultra-finetuned",
    endpoint.default: "/v1/flux-pro-1.1",
    endpoint.description: "Endpoint to use for image generation.",
    raw.type: "boolean",
    raw.default: false,
    raw.description: "Generate less processed, more natural-looking images. Only works for /v1/flux-pro-1.1-ultra.",
    finetune_id.type: "string",
    finetune_id.description: "ID of the finetuned model to use",
    finetune_strength.type: "number",
    finetune_strength.default: 1.1,
    finetune_strength.description: "Strength of the finetuning effect (typically between 0.1 and 1.2)",
    guidance.type: "number",
    guidance.default: 2.5,
    guidance.description: "Guidance scale for finetuned models",
    aspect_ratio.type: "string",
    aspect_ratio.default: "16:9",
    aspect_ratio.description: "Aspect ratio for ultra models (e.g., \"16:9\")",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    google.type: "function",
    function.name: "google",
    function.description: "A search engine optimized for comprehensive, accurate, and trusted results. Useful for when you need... [truncated]",
    parameters.type: "object",
    query.type: "string",
    query.minLength: 1,
    query.description: "The search query string.",
    max_results.type: "number",
    max_results.minimum: 1,
    max_results.maximum: 10,
    max_results.description: "The maximum number of search results to return. Defaults to 10.",
    // 1 required(s)
    parameters.required: ["query"],
    required.0: "query",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    open_weather.type: "function",
    function.name: "open_weather",
    function.description: "Provides weather data from OpenWeather One Call API 3.0. Actions: help, current_forecast, timestamp,... [truncated]",
    parameters.type: "object",
    action.type: "string",
    // 5 enum(s)
    action.enum: ["help","current_forecast","timestamp","daily_aggregation","overview"],
    enum.0: "help",
    enum.1: "current_forecast",
    enum.2: "timestamp",
    enum.3: "daily_aggregation",
    enum.4: "overview",
    city.type: "string",
    lat.type: "number",
    lon.type: "number",
    exclude.type: "string",
    units.type: "string",
    // 3 enum(s)
    units.enum: ["Celsius","Kelvin","Fahrenheit"],
    enum.0: "Celsius",
    enum.1: "Kelvin",
    enum.2: "Fahrenheit",
    lang.type: "string",
    date.type: "string",
    tz.type: "string",
    // 1 required(s)
    parameters.required: ["action"],
    required.0: "action",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    render_trip_status.type: "function",
    function.name: "render_trip_status",
    function.description: "Render a compact status card for the active trip (trip name, cost, percent complete, phase, dates, a... [truncated]",
    parameters.type: "object",
    trip_name.type: "string",
    trip_name.minLength: 1,
    percent_complete.type: "number",
    percent_complete.minimum: 0,
    percent_complete.maximum: 100,
    percent_complete.default: 0,
    phase.type: "string",
    phase.minLength: 1,
    dates.type: "string",
    dates.minLength: 1,
    // 2 type(s)
    cost.type: ["string","number"],
    type.0: "string",
    type.1: "number",
    next_steps.type: "array",
    items.type: "string",
    theme.type: "object",
    primary.type: "string",
    accent.type: "string",
    text.type: "string",
    background.type: "string",
    theme.additionalProperties: false,
    // 3 required(s)
    parameters.required: ["trip_name","phase","dates"],
    required.0: "trip_name",
    required.1: "phase",
    required.2: "dates",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    stable-diffusion.type: "function",
    function.name: "stable-diffusion",
    function.description: "You can generate images using text with 'stable-diffusion'. This tool is exclusively for visual cont... [truncated]",
    parameters.type: "object",
    prompt.type: "string",
    prompt.description: "Detailed keywords to describe the subject, using at least 7 keywords to accurately describe the imag... [truncated]",
    negative_prompt.type: "string",
    negative_prompt.description: "Keywords we want to exclude from the final image, using at least 7 keywords to accurately describe t... [truncated]",
    // 2 required(s)
    parameters.required: ["prompt","negative_prompt"],
    required.0: "prompt",
    required.1: "negative_prompt",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    tavily_search_results_json.type: "function",
    function.name: "tavily_search_results_json",
    function.description: "A search engine optimized for comprehensive, accurate, and trusted results. Useful for when you need... [truncated]",
    parameters.type: "object",
    query.type: "string",
    query.minLength: 1,
    query.description: "The search query string.",
    max_results.type: "number",
    max_results.minimum: 1,
    max_results.maximum: 10,
    max_results.description: "The maximum number of search results to return. Defaults to 5.",
    search_depth.type: "string",
    // 2 enum(s)
    search_depth.enum: ["basic","advanced"],
    enum.0: "basic",
    enum.1: "advanced",
    search_depth.description: "The depth of the search, affecting result quality and response time (`basic` or `advanced`). Default... [truncated]",
    include_images.type: "boolean",
    include_images.description: "Whether to include a list of query-related images in the response. Default is False.",
    include_answer.type: "boolean",
    include_answer.description: "Whether to include answers in the search results. Default is False.",
    include_raw_content.type: "boolean",
    include_raw_content.description: "Whether to include raw content in the search results. Default is False.",
    include_domains.type: "array",
    items.type: "string",
    include_domains.description: "A list of domains to specifically include in the search results.",
    exclude_domains.type: "array",
    items.type: "string",
    exclude_domains.description: "A list of domains to specifically exclude from the search results.",
    topic.type: "string",
    // 3 enum(s)
    topic.enum: ["general","news","finance"],
    enum.0: "general",
    enum.1: "news",
    enum.2: "finance",
    topic.description: "The category of the search. Use news ONLY if query SPECIFCALLY mentions the word \"news\".",
    time_range.type: "string",
    // 8 enum(s)
    time_range.enum: ["day","week","month","year","d","w","m","y"],
    enum.0: "day",
    enum.1: "week",
    enum.2: "month",
    enum.3: "year",
    enum.4: "d",
    enum.5: "w",
    enum.6: "m",
    enum.7: "y",
    time_range.description: "The time range back from the current date to filter results.",
    days.type: "number",
    days.minimum: 1,
    days.description: "Number of days back from the current date to include. Only if topic is news.",
    include_image_descriptions.type: "boolean",
    include_image_descriptions.description: "When include_images is true, also add a descriptive text for each image. Default is false.",
    // 1 required(s)
    parameters.required: ["query"],
    required.0: "query",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    traversaal_search.type: "function",
    function.name: "traversaal_search",
    function.description: "An AI search engine optimized for comprehensive, accurate, and trusted results.\n    Useful for when ... [truncated]",
    parameters.type: "object",
    query.type: "string",
    query.description: "A properly written sentence to be interpreted by an AI to search the web according to the user's req... [truncated]",
    // 1 required(s)
    parameters.required: ["query"],
    required.0: "query",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    wolfram.type: "function",
    function.name: "wolfram",
    function.description: "WolframAlpha offers computation, math, curated knowledge, and real-time data. It handles natural lan... [truncated]",
    parameters.type: "object",
    input.type: "string",
    input.description: "Natural language query to WolframAlpha following the guidelines",
    // 1 required(s)
    parameters.required: ["input"],
    required.0: "input",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    calculator.type: "function",
    function.name: "calculator",
    function.description: "Useful for getting the result of a math expression. The input to this tool should be a valid mathema... [truncated]",
    parameters.type: "object",
    input.type: "string",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    image_gen_oai.type: "function",
    function.name: "image_gen_oai",
    function.description: "Generates high-quality, original images based solely on text, not using any uploaded reference image... [truncated]",
    parameters.type: "object",
    prompt.type: "string",
    prompt.maxLength: 32000,
    prompt.description: "Describe the image you want in detail. \n      Be highly specific‚Äîbreak your idea into layers: \n     ... [truncated]",
    background.type: "string",
    // 3 enum(s)
    background.enum: ["transparent","opaque","auto"],
    enum.0: "transparent",
    enum.1: "opaque",
    enum.2: "auto",
    background.description: "Sets transparency for the background. Must be one of transparent, opaque or auto (default). When tra... [truncated]",
    quality.type: "string",
    // 4 enum(s)
    quality.enum: ["auto","high","medium","low"],
    enum.0: "auto",
    enum.1: "high",
    enum.2: "medium",
    enum.3: "low",
    quality.description: "The quality of the image. One of auto (default), high, medium, or low.",
    size.type: "string",
    // 4 enum(s)
    size.enum: ["auto","1024x1024","1536x1024","1024x1536"],
    enum.0: "auto",
    enum.1: "1024x1024",
    enum.2: "1536x1024",
    enum.3: "1024x1536",
    size.description: "The size of the generated image. One of 1024x1024, 1536x1024 (landscape), 1024x1536 (portrait), or a... [truncated]",
    // 1 required(s)
    parameters.required: ["prompt"],
    required.0: "prompt",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    image_edit_oai.type: "function",
    function.name: "image_edit_oai",
    function.description: "Generates high-quality, original images based on text and one or more uploaded/referenced images.\n\nW... [truncated]",
    parameters.type: "object",
    image_ids.type: "array",
    items.type: "string",
    image_ids.minItems: 1,
    image_ids.description: "IDs (image ID strings) of previously generated or uploaded images that should guide the edit.\n\nGuide... [truncated]",
    prompt.type: "string",
    prompt.maxLength: 32000,
    prompt.description: "Describe the changes, enhancements, or new ideas to apply to the uploaded image(s).\n      Be highly ... [truncated]",
    quality.type: "string",
    // 4 enum(s)
    quality.enum: ["auto","high","medium","low"],
    enum.0: "auto",
    enum.1: "high",
    enum.2: "medium",
    enum.3: "low",
    quality.description: "The quality of the image. One of auto (default), high, medium, or low. High/medium/low only supporte... [truncated]",
    size.type: "string",
    // 6 enum(s)
    size.enum: ["auto","1024x1024","1536x1024","1024x1536","256x256","512x512"],
    enum.0: "auto",
    enum.1: "1024x1024",
    enum.2: "1536x1024",
    enum.3: "1024x1536",
    enum.4: "256x256",
    enum.5: "512x512",
    size.description: "The size of the generated images. For gpt-image-1: auto (default), 1024x1024, 1536x1024, 1024x1536. ... [truncated]",
    // 2 required(s)
    parameters.required: ["image_ids","prompt"],
    required.0: "image_ids",
    required.1: "prompt",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    youtube_search.type: "function",
    function.name: "youtube_search",
    function.description: "Search for YouTube videos by keyword or phrase.\n- Required: query (search terms to find videos)\n- Op... [truncated]",
    parameters.type: "object",
    query.type: "string",
    query.description: "Search query terms",
    maxResults.type: "integer",
    maxResults.minimum: 1,
    maxResults.maximum: 50,
    maxResults.description: "Number of results (1-50)",
    // 1 required(s)
    parameters.required: ["query"],
    required.0: "query",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    youtube_info.type: "function",
    function.name: "youtube_info",
    function.description: "Get detailed metadata and statistics for a specific YouTube video.\n- Required: url (full YouTube URL... [truncated]",
    parameters.type: "object",
    url.type: "string",
    url.description: "YouTube video URL or ID",
    // 1 required(s)
    parameters.required: ["url"],
    required.0: "url",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    youtube_comments.type: "function",
    function.name: "youtube_comments",
    function.description: "Retrieve top-level comments from a YouTube video.\n- Required: url (full YouTube URL or video ID)\n- O... [truncated]",
    parameters.type: "object",
    url.type: "string",
    url.description: "YouTube video URL or ID",
    maxResults.type: "integer",
    maxResults.minimum: 1,
    maxResults.maximum: 50,
    maxResults.description: "Number of comments to retrieve",
    // 1 required(s)
    parameters.required: ["url"],
    required.0: "url",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    youtube_transcript.type: "function",
    function.name: "youtube_transcript",
    function.description: "Fetch and parse the transcript/captions of a YouTube video.\n- Required: url (full YouTube URL or vid... [truncated]",
    parameters.type: "object",
    url.type: "string",
    url.description: "YouTube video URL or ID",
    // 1 required(s)
    parameters.required: ["url"],
    required.0: "url",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    image_vision.type: "function",
    function.name: "image_vision",
    function.description: "Get detailed text descriptions for all current image attachments.",
    parameters.type: "object",
    parameters.properties: [object Object],
    parameters.required: ,
    get_instruction_mcp_prompt-instructions.type: "function",
    function.name: "get_instruction_mcp_prompt-instructions",
    function.description: "Retrieve a specific instruction by name from the D1 database",
    parameters.type: "object",
    name.type: "string",
    name.description: "The name/key of the instruction to retrieve",
    verbosity.type: "string",
    // 3 enum(s)
    verbosity.enum: ["minimal","normal","verbose"],
    enum.0: "minimal",
    enum.1: "normal",
    enum.2: "verbose",
    verbosity.description: "Override verbosity level for this request (optional)",
    // 1 required(s)
    parameters.required: ["name"],
    required.0: "name",
    list_instructions_mcp_prompt-instructions.type: "function",
    function.name: "list_instructions_mcp_prompt-instructions",
    function.description: "List all available instructions, optionally filtered by category",
    parameters.type: "object",
    category.type: "string",
    category.description: "Optional category filter (e.g., modes, planning, search_workflows)",
    create_instruction_mcp_prompt-instructions.type: "function",
    function.name: "create_instruction_mcp_prompt-instructions",
    function.description: "Create a new instruction in the database",
    parameters.type: "object",
    name.type: "string",
    name.description: "Unique name/key for the instruction",
    title.type: "string",
    title.description: "Human-readable title for the instruction",
    content.type: "string",
    content.description: "The instruction content in markdown format",
    category.type: "string",
    category.description: "Category for the instruction (default: general)",
    // 3 required(s)
    parameters.required: ["name","title","content"],
    required.0: "name",
    required.1: "title",
    required.2: "content",
    update_instruction_mcp_prompt-instructions.type: "function",
    function.name: "update_instruction_mcp_prompt-instructions",
    function.description: "Update an existing instruction in the database",
    parameters.type: "object",
    name.type: "string",
    name.description: "Name/key of the instruction to update",
    title.type: "string",
    title.description: "New title for the instruction",
    content.type: "string",
    content.description: "New content for the instruction",
    category.type: "string",
    category.description: "New category for the instruction",
    // 1 required(s)
    parameters.required: ["name"],
    required.0: "name",
    get_instructions_by_confidence_mcp_prompt-instructions.type: "function",
    function.name: "get_instructions_by_confidence_mcp_prompt-instructions",
    function.description: "Get instructions based on confidence level (high, medium, low, error)",
    parameters.type: "object",
    confidence_level.type: "string",
    // 4 enum(s)
    confidence_level.enum: ["high","medium","low","error"],
    enum.0: "high",
    enum.1: "medium",
    enum.2: "low",
    enum.3: "error",
    confidence_level.description: "Confidence level for instruction selection",
    // 1 required(s)
    parameters.required: ["confidence_level"],
    required.0: "confidence_level",
    set_verbosity_preference_mcp_prompt-instructions.type: "function",
    function.name: "set_verbosity_preference_mcp_prompt-instructions",
    function.description: "Set verbosity preference globally or for a specific instruction",
    parameters.type: "object",
    verbosity.type: "string",
    // 3 enum(s)
    verbosity.enum: ["minimal","normal","verbose"],
    enum.0: "minimal",
    enum.1: "normal",
    enum.2: "verbose",
    verbosity.description: "Verbosity level for instruction output",
    instruction_name.type: "string",
    instruction_name.description: "Optional: Set verbosity for a specific instruction only",
    // 1 required(s)
    parameters.required: ["verbosity"],
    required.0: "verbosity",
    get_verbosity_preference_mcp_prompt-instructions.type: "function",
    function.name: "get_verbosity_preference_mcp_prompt-instructions",
    function.description: "Get current verbosity preference",
    parameters.type: "object",
    instruction_name.type: "string",
    instruction_name.description: "Optional: Get verbosity for a specific instruction",
    travel_agent_start_mcp_prompt-instructions.type: "function",
    function.name: "travel_agent_start_mcp_prompt-instructions",
    function.description: "Start the travel agent system - loads startup-core instruction",
    parameters.type: "object",
    parameters.properties: [object Object],
    status_mcp_prompt-instructions.type: "function",
    function.name: "status_mcp_prompt-instructions",
    function.description: "Show currently loaded instructions",
    parameters.type: "object",
    parameters.properties: [object Object],
    help_mcp_prompt-instructions.type: "function",
    function.name: "help_mcp_prompt-instructions",
    function.description: "Show travel agent workflows and available commands",
    parameters.type: "object",
    parameters.properties: [object Object],
    reload_mcp_prompt-instructions.type: "function",
    function.name: "reload_mcp_prompt-instructions",
    function.description: "Refresh system instructions",
    parameters.type: "object",
    parameters.properties: [object Object],
    health_check_mcp_d1-database.type: "function",
    function.name: "health_check_mcp_d1-database",
    function.description: "Check database health and status",
    parameters.type: "object",
    parameters.properties: [object Object],
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    update_activitylog_clients_mcp_d1-database.type: "function",
    function.name: "update_activitylog_clients_mcp_d1-database",
    function.description: "Update ActivityLog entries to populate client_id from trip_id",
    parameters.type: "object",
    parameters.properties: [object Object],
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    reset_activitylog_from_trips_mcp_d1-database.type: "function",
    function.name: "reset_activitylog_from_trips_mcp_d1-database",
    function.description: "Clear ActivityLog and repopulate from trips_v2 table updated_at column",
    parameters.type: "object",
    parameters.properties: [object Object],
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    explore_database_mcp_d1-database.type: "function",
    function.name: "explore_database_mcp_d1-database",
    function.description: "Show all tables and their structure in the database",
    parameters.type: "object",
    parameters.properties: [object Object],
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    get_anything_mcp_d1-database.type: "function",
    function.name: "get_anything_mcp_d1-database",
    function.description: "Get COMPLETE information about any trip, client, or travel-related query. Just describe what you nee... [truncated]",
    parameters.type: "object",
    query.type: "string",
    query.description: "Natural language query like \"Smith family Hawaii trip\" or \"john@email.com\" or \"upcoming trips\"",
    include_everything.type: "boolean",
    include_everything.default: true,
    include_everything.description: "Return all possible related information to avoid follow-up queries",
    // 1 required(s)
    parameters.required: ["query"],
    required.0: "query",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    remember_context_mcp_d1-database.type: "function",
    function.name: "remember_context_mcp_d1-database",
    function.description: "Store important facts from the current conversation to avoid repeated lookups",
    parameters.type: "object",
    session_id.type: "string",
    session_id.description: "Current session identifier",
    facts.type: "array",
    items.type: "object",
    type.type: "string",
    // 4 enum(s)
    type.enum: ["preference","constraint","decision","context"],
    enum.0: "preference",
    enum.1: "constraint",
    enum.2: "decision",
    enum.3: "context",
    subject.type: "string",
    fact.type: "string",
    // 3 required(s)
    items.required: ["type","subject","fact"],
    required.0: "type",
    required.1: "subject",
    required.2: "fact",
    items.additionalProperties: false,
    facts.description: "Facts learned in this conversation",
    active_context.type: "object",
    trip_name.type: "string",
    client_email.type: "string",
    current_focus.type: "string",
    active_context.additionalProperties: false,
    // 2 required(s)
    parameters.required: ["session_id","facts"],
    required.0: "session_id",
    required.1: "facts",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    bulk_trip_operations_mcp_d1-database.type: "function",
    function.name: "bulk_trip_operations_mcp_d1-database",
    function.description: "Perform multiple trip operations in a single call - assign clients, add activities, update costs, mo... [truncated]",
    parameters.type: "object",
    trip_identifier.type: "string",
    trip_identifier.description: "Trip name or ID",
    operations.type: "array",
    items.type: "object",
    type.type: "string",
    // 8 enum(s)
    type.enum: ["add_activity","update_cost","add_note","update_status","add_document","assign_client","advance_workflow","set_workflow_step"],
    enum.0: "add_activity",
    enum.1: "update_cost",
    enum.2: "add_note",
    enum.3: "update_status",
    enum.4: "add_document",
    enum.5: "assign_client",
    enum.6: "advance_workflow",
    enum.7: "set_workflow_step",
    data.description: "Operation-specific data. For workflow operations: {phase?, step_number?, completion_data?, notes?}",
    // 1 required(s)
    items.required: ["type"],
    required.0: "type",
    items.additionalProperties: false,
    operations.description: "Array of operations to perform including workflow operations",
    // 2 required(s)
    parameters.required: ["trip_identifier","operations"],
    required.0: "trip_identifier",
    required.1: "operations",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    regenerate_context_mcp_d1-database.type: "function",
    function.name: "regenerate_context_mcp_d1-database",
    function.description: "Manually regenerate LLM context cache for a specific trip or client",
    parameters.type: "object",
    trip_id.type: "number",
    trip_id.description: "Trip ID to regenerate context for",
    client_id.type: "number",
    client_id.description: "Client ID to regenerate context for",
    trip_name.type: "string",
    trip_name.description: "Trip name to regenerate context for",
    client_email.type: "string",
    client_email.description: "Client email to regenerate context for",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    create_trip_v2_mcp_d1-database.type: "function",
    function.name: "create_trip_v2_mcp_d1-database",
    function.description: "Create a new trip in the trips_v2 table with proper JSON structure",
    parameters.type: "object",
    trip_name.type: "string",
    trip_name.description: "Name/title for the trip",
    start_date.type: "string",
    start_date.description: "Start date (YYYY-MM-DD format)",
    end_date.type: "string",
    end_date.description: "End date (YYYY-MM-DD format)",
    destinations.type: "string",
    destinations.description: "Primary destination(s)",
    total_cost.type: "number",
    total_cost.default: 0,
    total_cost.description: "Total estimated cost",
    status.type: "string",
    status.default: "planning",
    status.description: "Trip status: planning, confirmed, in_progress, completed, cancelled",
    notes.type: "string",
    notes.description: "Trip notes or description",
    primary_client_email.type: "string",
    primary_client_email.description: "Email of primary client (if known)",
    // 3 required(s)
    parameters.required: ["trip_name","start_date","end_date"],
    required.0: "trip_name",
    required.1: "start_date",
    required.2: "end_date",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    create_client_v2_mcp_d1-database.type: "function",
    function.name: "create_client_v2_mcp_d1-database",
    function.description: "Create a new client in the clients_v2 table with proper JSON structure",
    parameters.type: "object",
    email.type: "string",
    email.format: "email",
    email.description: "Client email address (required)",
    full_name.type: "string",
    full_name.description: "Client full name (required)",
    phone.type: "string",
    phone.description: "Phone number",
    address.type: "string",
    address.description: "Full address",
    preferences.type: "object",
    preferences.properties: [object Object],
    preferences.additionalProperties: false,
    preferences.description: "Travel preferences as key-value pairs",
    travel_docs.type: "object",
    travel_docs.properties: [object Object],
    travel_docs.additionalProperties: false,
    travel_docs.description: "Travel document information",
    loyalty_programs.type: "object",
    loyalty_programs.properties: [object Object],
    loyalty_programs.additionalProperties: false,
    loyalty_programs.description: "Loyalty program memberships",
    notes.type: "string",
    notes.description: "Additional notes about client",
    // 2 required(s)
    parameters.required: ["email","full_name"],
    required.0: "email",
    required.1: "full_name",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    create_trip_with_client_mcp_d1-database.type: "function",
    function.name: "create_trip_with_client_mcp_d1-database",
    function.description: "Create a new trip and assign a client (new or existing) in a single operation",
    parameters.type: "object",
    trip_name.type: "string",
    trip_name.description: "Name/title for the trip",
    start_date.type: "string",
    start_date.description: "Start date (YYYY-MM-DD format)",
    end_date.type: "string",
    end_date.description: "End date (YYYY-MM-DD format)",
    destinations.type: "string",
    destinations.description: "Primary destination(s)",
    total_cost.type: "number",
    total_cost.default: 0,
    total_cost.description: "Total estimated cost",
    status.type: "string",
    status.default: "planning",
    status.description: "Trip status",
    trip_notes.type: "string",
    trip_notes.description: "Trip notes or description",
    client_email.type: "string",
    client_email.format: "email",
    client_email.description: "Client email address",
    client_full_name.type: "string",
    client_full_name.description: "Client full name",
    client_phone.type: "string",
    client_phone.description: "Client phone number",
    client_preferences.type: "object",
    client_preferences.properties: [object Object],
    client_preferences.additionalProperties: false,
    client_preferences.description: "Client travel preferences",
    client_role.type: "string",
    client_role.default: "primary_traveler",
    client_role.description: "Client role in trip",
    // 5 required(s)
    parameters.required: ["trip_name","start_date","end_date","client_email","client_full_name"],
    required.0: "trip_name",
    required.1: "start_date",
    required.2: "end_date",
    required.3: "client_email",
    required.4: "client_full_name",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    advance_workflow_phase_mcp_d1-database.type: "function",
    function.name: "advance_workflow_phase_mcp_d1-database",
    function.description: "Advance a trip to the next workflow phase with completion data and validation",
    parameters.type: "object",
    trip_identifier.type: "string",
    trip_identifier.description: "Trip name or ID",
    new_phase.type: "string",
    // 7 enum(s)
    new_phase.enum: ["interview","conceptualization","planning","proposal","revision","finalization","preparation"],
    enum.0: "interview",
    enum.1: "conceptualization",
    enum.2: "planning",
    enum.3: "proposal",
    enum.4: "revision",
    enum.5: "finalization",
    enum.6: "preparation",
    new_phase.description: "New workflow phase to advance to",
    completion_data.type: "object",
    completion_data.properties: [object Object],
    completion_data.additionalProperties: false,
    completion_data.description: "Data about the completed phase",
    step_number.type: "number",
    step_number.default: 1,
    step_number.description: "Step number within the new phase",
    notes.type: "string",
    notes.description: "Notes about the phase transition",
    // 2 required(s)
    parameters.required: ["trip_identifier","new_phase"],
    required.0: "trip_identifier",
    required.1: "new_phase",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    set_workflow_step_mcp_d1-database.type: "function",
    function.name: "set_workflow_step_mcp_d1-database",
    function.description: "Set the current step within the current workflow phase",
    parameters.type: "object",
    trip_identifier.type: "string",
    trip_identifier.description: "Trip name or ID",
    step_number.type: "number",
    step_number.description: "Step number within current phase",
    step_data.type: "object",
    step_data.properties: [object Object],
    step_data.additionalProperties: false,
    step_data.description: "Data specific to this step",
    // 2 required(s)
    parameters.required: ["trip_identifier","step_number"],
    required.0: "trip_identifier",
    required.1: "step_number",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    get_workflow_status_mcp_d1-database.type: "function",
    function.name: "get_workflow_status_mcp_d1-database",
    function.description: "Get detailed workflow status for a trip including phase history and current state",
    parameters.type: "object",
    trip_identifier.type: "string",
    trip_identifier.description: "Trip name or ID",
    // 1 required(s)
    parameters.required: ["trip_identifier"],
    required.0: "trip_identifier",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    get_workflow_instructions_mcp_d1-database.type: "function",
    function.name: "get_workflow_instructions_mcp_d1-database",
    function.description: "Get phase-specific instructions for the current workflow state of a trip",
    parameters.type: "object",
    trip_identifier.type: "string",
    trip_identifier.description: "Trip name or ID",
    include_all_phases.type: "boolean",
    include_all_phases.default: false,
    include_all_phases.description: "Include instructions for all phases, not just current",
    // 1 required(s)
    parameters.required: ["trip_identifier"],
    required.0: "trip_identifier",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    initialize_workflow_mcp_d1-database.type: "function",
    function.name: "initialize_workflow_mcp_d1-database",
    function.description: "Initialize workflow state for a trip with a starting phase",
    parameters.type: "object",
    trip_identifier.type: "string",
    trip_identifier.description: "Trip name or ID",
    starting_phase.type: "string",
    // 7 enum(s)
    starting_phase.enum: ["interview","conceptualization","planning","proposal","revision","finalization","preparation"],
    enum.0: "interview",
    enum.1: "conceptualization",
    enum.2: "planning",
    enum.3: "proposal",
    enum.4: "revision",
    enum.5: "finalization",
    enum.6: "preparation",
    starting_phase.default: "interview",
    starting_phase.description: "Starting workflow phase",
    initial_data.type: "object",
    initial_data.properties: [object Object],
    initial_data.additionalProperties: false,
    initial_data.description: "Initial workflow data",
    // 1 required(s)
    parameters.required: ["trip_identifier"],
    required.0: "trip_identifier",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    analyze_recent_errors_mcp_d1-database.type: "function",
    function.name: "analyze_recent_errors_mcp_d1-database",
    function.description: "Analyze recent database errors and provide insights",
    parameters.type: "object",
    hours.type: "number",
    hours.default: 24,
    hours.description: "Hours to look back for errors",
    limit.type: "number",
    limit.default: 10,
    limit.description: "Maximum number of error patterns to return",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    resolve_error_pattern_mcp_d1-database.type: "function",
    function.name: "resolve_error_pattern_mcp_d1-database",
    function.description: "Mark error patterns as resolved and track successful solutions",
    parameters.type: "object",
    error_pattern.type: "string",
    error_pattern.description: "Error message pattern to resolve",
    resolution.type: "string",
    resolution.description: "Description of how the error was resolved",
    session_id.type: "string",
    session_id.description: "Session ID if resolving a specific error",
    // 2 required(s)
    parameters.required: ["error_pattern","resolution"],
    required.0: "error_pattern",
    required.1: "resolution",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    get_recent_activities_mcp_d1-database.type: "function",
    function.name: "get_recent_activities_mcp_d1-database",
    function.description: "Get recent activities from ActivityLog for CTA startup presentation",
    parameters.type: "object",
    days.type: "number",
    days.default: 7,
    days.description: "Number of days to look back",
    limit.type: "number",
    limit.default: 10,
    limit.description: "Maximum number of activities to return",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    continue_trip_mcp_d1-database.type: "function",
    function.name: "continue_trip_mcp_d1-database",
    function.description: "Resume work on a trip from ActivityLog with full context and status. Use without parameters for most... [truncated]",
    parameters.type: "object",
    search_query.type: "string",
    search_query.description: "Optional search terms to find specific trip (name, client, destination, dates)",
    activity_id.type: "number",
    activity_id.description: "Specific activity ID to continue from",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    cleanup_duplicate_clients_mcp_d1-database.type: "function",
    function.name: "cleanup_duplicate_clients_mcp_d1-database",
    function.description: "Remove duplicate or test client records based on email patterns or names while preserving legitimate... [truncated]",
    parameters.type: "object",
    dry_run.type: "boolean",
    dry_run.default: true,
    dry_run.description: "If true, only show what would be deleted without actually deleting",
    email_patterns.type: "array",
    items.type: "string",
    email_patterns.description: "Email patterns to match for deletion (e.g., [\"@example.com\"])",
    name_patterns.type: "array",
    items.type: "string",
    name_patterns.description: "Name patterns to match for deletion (e.g., [\"Test\", \"Sarah & Michael\"])",
    preserve_client_ids.type: "array",
    items.type: "number",
    preserve_client_ids.description: "Client IDs to preserve even if they match patterns",
    preserve_emails.type: "array",
    items.type: "string",
    preserve_emails.description: "Specific emails to preserve even if they match patterns",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
    cleanup_duplicate_trips_mcp_d1-database.type: "function",
    function.name: "cleanup_duplicate_trips_mcp_d1-database",
    function.description: "Remove duplicate or test trip records based on name patterns while preserving legitimate trips",
    parameters.type: "object",
    dry_run.type: "boolean",
    dry_run.default: true,
    dry_run.description: "If true, only show what would be deleted without actually deleting",
    name_patterns.type: "array",
    items.type: "string",
    name_patterns.description: "Trip name patterns to match for deletion (e.g., [\"Sarah & Michael\", \"Test Trip\"])",
    preserve_trip_ids.type: "array",
    items.type: "number",
    preserve_trip_ids.description: "Trip IDs to preserve even if they match patterns",
    preserve_trip_names.type: "array",
    items.type: "string",
    preserve_trip_names.description: "Specific trip names to preserve even if they match patterns",
    // 1 required(s)
    parameters.required: ["name_patterns"],
    required.0: "name_patterns",
    parameters.additionalProperties: false,
    parameters.$schema: "http://json-schema.org/draft-07/schema#",
  success: true,
  oauthRequired: false,
  serverName: "d1-database",
  oauthUrl: null,
  // 24 tool(s)
  tools: [{"name":"health_check","description":"Check database health and status","inputSchema":{"type":"objec... [truncated],{"name":"update_activitylog_clients","description":"Update ActivityLog entries to populate client_id... [truncated],{"name":"reset_activitylog_from_trips","description":"Clear ActivityLog and repopulate from Trips ta... [truncated],{"name":"explore_database","description":"Show all tables and their structure in the database","inpu... [truncated],{"name":"get_anything","description":"Get COMPLETE information about any trip, client, or travel-rel... [truncated],{"name":"remember_context","description":"Store important facts from the current conversation to avo... [truncated],{"name":"bulk_trip_operations","description":"Perform multiple trip operations in a single call - as... [truncated],{"name":"update_activitylog_clients","description":"Update ActivityLog entries to populate client_id... [truncated],{"name":"reset_activitylog_from_trips","description":"Clear ActivityLog and repopulate from trips_v2... [truncated],{"name":"regenerate_context","description":"Manually regenerate LLM context cache for a specific tri... [truncated],{"name":"create_trip_v2","description":"Create a new trip in the trips_v2 table with proper JSON str... [truncated],{"name":"create_client_v2","description":"Create a new client in the clients_v2 table with proper JS... [truncated],{"name":"create_trip_with_client","description":"Create a new trip and assign a client (new or exist... [truncated],{"name":"advance_workflow_phase","description":"Advance a trip to the next workflow phase with compl... [truncated],{"name":"set_workflow_step","description":"Set the current step within the current workflow phase","... [truncated],{"name":"get_workflow_status","description":"Get detailed workflow status for a trip including phase... [truncated],{"name":"get_workflow_instructions","description":"Get phase-specific instructions for the current w... [truncated],{"name":"initialize_workflow","description":"Initialize workflow state for a trip with a starting ph... [truncated],{"name":"analyze_recent_errors","description":"Analyze recent database errors and provide insights",... [truncated],{"name":"resolve_error_pattern","description":"Mark error patterns as resolved and track successful ... [truncated],{"name":"get_recent_activities","description":"Get recent activities from ActivityLog for CTA startu... [truncated],{"name":"continue_trip","description":"Resume work on a trip from ActivityLog with full context and ... [truncated],{"name":"cleanup_duplicate_clients","description":"Remove duplicate or test client records based on ... [truncated],{"name":"cleanup_duplicate_trips","description":"Remove duplicate or test trip records based on name... [truncated]],
    0.name: "health_check",
    0.description: "Check database health and status",
    inputSchema.type: "object",
    inputSchema.properties: [object Object],
    inputSchema.additionalProperties: false,
    inputSchema.$schema: "http://json-schema.org/draft-07/schema#",
    1.name: "update_activitylog_clients",
    1.description: "Update ActivityLog entries to populate client_id from trip_id",
    inputSchema.type: "object",
    inputSchema.properties: [object Object],
    inputSchema.additionalProperties: false,
    inputSchema.$schema: "http://json-schema.org/draft-07/schema#",
    2.name: "reset_activitylog_from_trips",
    2.description: "Clear ActivityLog and repopulate from Trips table updated_at column",
    inputSchema.type: "object",
    inputSchema.properties: [object Object],
    inputSchema.additionalProperties: false,
    inputSchema.$schema: "http://json-schema.org/draft-07/schema#",
    3.name: "explore_database",
    3.description: "Show all tables and their structure in the database",
    inputSchema.type: "object",
    inputSchema.properties: [object Object],
    inputSchema.additionalProperties: false,
    inputSchema.$schema: "http://json-schema.org/draft-07/schema#",
    4.name: "get_anything",
    4.description: "Get COMPLETE information about any trip, client, or travel-related query. Just describe what you nee... [truncated]",
    inputSchema.type: "object",
    query.type: "string",
    query.description: "Natural language query like \"Smith family Hawaii trip\" or \"john@email.com\" or \"upcoming trips\"",
    include_everything.type: "boolean",
    include_everything.default: true,
    include_everything.description: "Return all possible related information to avoid follow-up queries",
    // 1 required(s)
    inputSchema.required: ["query"],
    required.0: "query",
    inputSchema.additionalProperties: false,
    inputSchema.$schema: "http://json-schema.org/draft-07/schema#",
    5.name: "remember_context",
    5.description: "Store important facts from the current conversation to avoid repeated lookups",
    inputSchema.type: "object",
    session_id.type: "string",
    session_id.description: "Current session identifier",
    facts.type: "array",
    items.type: "object",
    type.type: "string",
    // 4 enum(s)
    type.enum: ["preference","constraint","decision","context"],
    enum.0: "preference",
    enum.1: "constraint",
    enum.2: "decision",
    enum.3: "context",
    subject.type: "string",
    fact.type: "string",
    // 3 required(s)
    items.required: ["type","subject","fact"],
    required.0: "type",
    required.1: "subject",
    required.2: "fact",
    items.additionalProperties: false,
    facts.description: "Facts learned in this conversation",
    active_context.type: "object",
    trip_name.type: "string",
    client_email.type: "string",
    current_focus.type: "string",
    active_context.additionalProperties: false,
    // 2 required(s)
    inputSchema.required: ["session_id","facts"],
    required.0: "session_id",
    required.1: "facts",
    inputSchema.additionalProperties: false,
    inputSchema.$schema: "http://json-schema.org/draft-07/schema#",
    6.name: "bulk_trip_operations",
    6.description: "Perform multiple trip operations in a single call - assign clients, add activities, update costs, mo... [truncated]",
    inputSchema.type: "object",
    trip_identifier.type: "string",
    trip_identifier.description: "Trip name or ID",
    operations.type: "array",
    items.type: "object",
    type.type: "string",
    // 8 enum(s)
    type.enum: ["add_activity","update_cost","add_note","update_status","add_document","assign_client","advance_workflow","set_workflow_step"],
    enum.0: "add_activity",
    enum.1: "update_cost",
    enum.2: "add_note",
    enum.3: "update_status",
    enum.4: "add_document",
    enum.5: "assign_client",
    enum.6: "advance_workflow",
    enum.7: "set_workflow_step",
    data.description: "Operation-specific data. For workflow operations: {phase?, step_number?, completion_data?, notes?}",
    // 1 required(s)
    items.required: ["type"],
    required.0: "type",
    items.additionalProperties: false,
    operations.description: "Array of operations to perform including workflow operations",
    // 2 required(s)
    inputSchema.required: ["trip_identifier","operations"],
    required.0: "trip_identifier",
    required.1: "operations",
    inputSchema.additionalProperties: false,
    inputSchema.$schema: "http://json-schema.org/draft-07/schema#",
    7.name: "update_activitylog_clients",
    7.description: "Update ActivityLog entries to populate client_id from trip_id",
    inputSchema.type: "object",
    inputSchema.properties: [object Object],
    inputSchema.additionalProperties: false,
    inputSchema.$schema: "http://json-schema.org/draft-07/schema#",
    8.name: "reset_activitylog_from_trips",
    8.description: "Clear ActivityLog and repopulate from trips_v2 table updated_at column",
    inputSchema.type: "object",
    inputSchema.properties: [object Object],
    inputSchema.additionalProperties: false,
    inputSchema.$schema: "http://json-schema.org/draft-07/schema#",
    9.name: "regenerate_context",
    9.description: "Manually regenerate LLM context cache for a specific trip or client",
    inputSchema.type: "object",
    trip_id.type: "number",
    trip_id.description: "Trip ID to regenerate context for",
    client_id.type: "number",
    client_id.description: "Client ID to regenerate context for",
    trip_name.type: "string",
    trip_name.description: "Trip name to regenerate context for",
    client_email.type: "string",
    client_email.description: "Client email to regenerate context for",
    inputSchema.additionalProperties: false,
    inputSchema.$schema: "http://json-schema.org/draft-07/schema#",
    10.name: "create_trip_v2",
    10.description: "Create a new trip in the trips_v2 table with proper JSON structure",
    inputSchema.type: "object",
    trip_name.type: "string",
    trip_name.description: "Name/title for the trip",
    start_date.type: "string",
    start_date.description: "Start date (YYYY-MM-DD format)",
    end_date.type: "string",
    end_date.description: "End date (YYYY-MM-DD format)",
    destinations.type: "string",
    destinations.description: "Primary destination(s)",
    total_cost.type: "number",
    total_cost.default: 0,
    total_cost.description: "Total estimated cost",
    status.type: "string",
    status.default: "planning",
    status.description: "Trip status: planning, confirmed, in_progress, completed, cancelled",
    notes.type: "string",
    notes.description: "Trip notes or description",
    primary_client_email.type: "string",
    primary_client_email.description: "Email of primary client (if known)",
    // 3 required(s)
    inputSchema.required: ["trip_name","start_date","end_date"],
    required.0: "trip_name",
    required.1: "start_date",
    required.2: "end_date",
    inputSchema.additionalProperties: false,
    inputSchema.$schema: "http://json-schema.org/draft-07/schema#",
    11.name: "create_client_v2",
    11.description: "Create a new client in the clients_v2 table with proper JSON structure",
    inputSchema.type: "object",
    email.type: "string",
    email.format: "email",
    email.description: "Client email address (required)",
    full_name.type: "string",
    full_name.description: "Client full name (required)",
    phone.type: "string",
    phone.description: "Phone number",
    address.type: "string",
    address.description: "Full address",
    preferences.type: "object",
    preferences.properties: [object Object],
    preferences.additionalProperties: false,
    preferences.description: "Travel preferences as key-value pairs",
    travel_docs.type: "object",
    travel_docs.properties: [object Object],
    travel_docs.additionalProperties: false,
    travel_docs.description: "Travel document information",
    loyalty_programs.type: "object",
    loyalty_programs.properties: [object Object],
    loyalty_programs.additionalProperties: false,
    loyalty_programs.description: "Loyalty program memberships",
    notes.type: "string",
    notes.description: "Additional notes about client",
    // 2 required(s)
    inputSchema.required: ["email","full_name"],
    required.0: "email",
    required.1: "full_name",
    inputSchema.additionalProperties: false,
    inputSchema.$schema: "http://json-schema.org/draft-07/schema#",
    12.name: "create_trip_with_client",
    12.description: "Create a new trip and assign a client (new or existing) in a single operation",
    inputSchema.type: "object",
    trip_name.type: "string",
    trip_name.description: "Name/title for the trip",
    start_date.type: "string",
    start_date.description: "Start date (YYYY-MM-DD format)",
    end_date.type: "string",
    end_date.description: "End date (YYYY-MM-DD format)",
    destinations.type: "string",
    destinations.description: "Primary destination(s)",
    total_cost.type: "number",
    total_cost.default: 0,
    total_cost.description: "Total estimated cost",
    status.type: "string",
    status.default: "planning",
    status.description: "Trip status",
    trip_notes.type: "string",
    trip_notes.description: "Trip notes or description",
    client_email.type: "string",
    client_email.format: "email",
    client_email.description: "Client email address",
    client_full_name.type: "string",
    client_full_name.description: "Client full name",
    client_phone.type: "string",
    client_phone.description: "Client phone number",
    client_preferences.type: "object",
    client_preferences.properties: [object Object],
    client_preferences.additionalProperties: false,
    client_preferences.description: "Client travel preferences",
    client_role.type: "string",
    client_role.default: "primary_traveler",
    client_role.description: "Client role in trip",
    // 5 required(s)
    inputSchema.required: ["trip_name","start_date","end_date","client_email","client_full_name"],
    required.0: "trip_name",
    required.1: "start_date",
    required.2: "end_date",
    required.3: "client_email",
    required.4: "client_full_name",
    inputSchema.additionalProperties: false,
    inputSchema.$schema: "http://json-schema.org/draft-07/schema#",
    13.name: "advance_workflow_phase",
    13.description: "Advance a trip to the next workflow phase with completion data and validation",
    inputSchema.type: "object",
    trip_identifier.type: "string",
    trip_identifier.description: "Trip name or ID",
    new_phase.type: "string",
    // 7 enum(s)
    new_phase.enum: ["interview","conceptualization","planning","proposal","revision","finalization","preparation"],
    enum.0: "interview",
    enum.1: "conceptualization",
    enum.2: "planning",
    enum.3: "proposal",
    enum.4: "revision",
    enum.5: "finalization",
    enum.6: "preparation",
    new_phase.description: "New workflow phase to advance to",
    completion_data.type: "object",
    completion_data.properties: [object Object],
    completion_data.additionalProperties: false,
    completion_data.description: "Data about the completed phase",
    step_number.type: "number",
    step_number.default: 1,
    step_number.description: "Step number within the new phase",
    notes.type: "string",
    notes.description: "Notes about the phase transition",
    // 2 required(s)
    inputSchema.required: ["trip_identifier","new_phase"],
    required.0: "trip_identifier",
    required.1: "new_phase",
    inputSchema.additionalProperties: false,
    inputSchema.$schema: "http://json-schema.org/draft-07/schema#",
    14.name: "set_workflow_step",
    14.description: "Set the current step within the current workflow phase",
    inputSchema.type: "object",
    trip_identifier.type: "string",
    trip_identifier.description: "Trip name or ID",
    step_number.type: "number",
    step_number.description: "Step number within current phase",
    step_data.type: "object",
    step_data.properties: [object Object],
    step_data.additionalProperties: false,
    step_data.description: "Data specific to this step",
    // 2 required(s)
    inputSchema.required: ["trip_identifier","step_number"],
    required.0: "trip_identifier",
    required.1: "step_number",
    inputSchema.additionalProperties: false,
    inputSchema.$schema: "http://json-schema.org/draft-07/schema#",
    15.name: "get_workflow_status",
    15.description: "Get detailed workflow status for a trip including phase history and current state",
    inputSchema.type: "object",
    trip_identifier.type: "string",
    trip_identifier.description: "Trip name or ID",
    // 1 required(s)
    inputSchema.required: ["trip_identifier"],
    required.0: "trip_identifier",
    inputSchema.additionalProperties: false,
    inputSchema.$schema: "http://json-schema.org/draft-07/schema#",
    16.name: "get_workflow_instructions",
    16.description: "Get phase-specific instructions for the current workflow state of a trip",
    inputSchema.type: "object",
    trip_identifier.type: "string",
    trip_identifier.description: "Trip name or ID",
    include_all_phases.type: "boolean",
    include_all_phases.default: false,
    include_all_phases.description: "Include instructions for all phases, not just current",
    // 1 required(s)
    inputSchema.required: ["trip_identifier"],
    required.0: "trip_identifier",
    inputSchema.additionalProperties: false,
    inputSchema.$schema: "http://json-schema.org/draft-07/schema#",
    17.name: "initialize_workflow",
    17.description: "Initialize workflow state for a trip with a starting phase",
    inputSchema.type: "object",
    trip_identifier.type: "string",
    trip_identifier.description: "Trip name or ID",
    starting_phase.type: "string",
    // 7 enum(s)
    starting_phase.enum: ["interview","conceptualization","planning","proposal","revision","finalization","preparation"],
    enum.0: "interview",
    enum.1: "conceptualization",
    enum.2: "planning",
    enum.3: "proposal",
    enum.4: "revision",
    enum.5: "finalization",
    enum.6: "preparation",
    starting_phase.default: "interview",
    starting_phase.description: "Starting workflow phase",
    initial_data.type: "object",
    initial_data.properties: [object Object],
    initial_data.additionalProperties: false,
    initial_data.description: "Initial workflow data",
    // 1 required(s)
    inputSchema.required: ["trip_identifier"],
    required.0: "trip_identifier",
    inputSchema.additionalProperties: false,
    inputSchema.$schema: "http://json-schema.org/draft-07/schema#",
    18.name: "analyze_recent_errors",
    18.description: "Analyze recent database errors and provide insights",
    inputSchema.type: "object",
    hours.type: "number",
    hours.default: 24,
    hours.description: "Hours to look back for errors",
    limit.type: "number",
    limit.default: 10,
    limit.description: "Maximum number of error patterns to return",
    inputSchema.additionalProperties: false,
    inputSchema.$schema: "http://json-schema.org/draft-07/schema#",
    19.name: "resolve_error_pattern",
    19.description: "Mark error patterns as resolved and track successful solutions",
    inputSchema.type: "object",
    error_pattern.type: "string",
    error_pattern.description: "Error message pattern to resolve",
    resolution.type: "string",
    resolution.description: "Description of how the error was resolved",
    session_id.type: "string",
    session_id.description: "Session ID if resolving a specific error",
    // 2 required(s)
    inputSchema.required: ["error_pattern","resolution"],
    required.0: "error_pattern",
    required.1: "resolution",
    inputSchema.additionalProperties: false,
    inputSchema.$schema: "http://json-schema.org/draft-07/schema#",
    20.name: "get_recent_activities",
    20.description: "Get recent activities from ActivityLog for CTA startup presentation",
    inputSchema.type: "object",
    days.type: "number",
    days.default: 7,
    days.description: "Number of days to look back",
    limit.type: "number",
    limit.default: 10,
    limit.description: "Maximum number of activities to return",
    inputSchema.additionalProperties: false,
    inputSchema.$schema: "http://json-schema.org/draft-07/schema#",
    21.name: "continue_trip",
    21.description: "Resume work on a trip from ActivityLog with full context and status. Use without parameters for most... [truncated]",
    inputSchema.type: "object",
    search_query.type: "string",
    search_query.description: "Optional search terms to find specific trip (name, client, destination, dates)",
    activity_id.type: "number",
    activity_id.description: "Specific activity ID to continue from",
    inputSchema.additionalProperties: false,
    inputSchema.$schema: "http://json-schema.org/draft-07/schema#",
    22.name: "cleanup_duplicate_clients",
    22.description: "Remove duplicate or test client records based on email patterns or names while preserving legitimate... [truncated]",
    inputSchema.type: "object",
    dry_run.type: "boolean",
    dry_run.default: true,
    dry_run.description: "If true, only show what would be deleted without actually deleting",
    email_patterns.type: "array",
    items.type: "string",
    email_patterns.description: "Email patterns to match for deletion (e.g., [\"@example.com\"])",
    name_patterns.type: "array",
    items.type: "string",
    name_patterns.description: "Name patterns to match for deletion (e.g., [\"Test\", \"Sarah & Michael\"])",
    preserve_client_ids.type: "array",
    items.type: "number",
    preserve_client_ids.description: "Client IDs to preserve even if they match patterns",
    preserve_emails.type: "array",
    items.type: "string",
    preserve_emails.description: "Specific emails to preserve even if they match patterns",
    inputSchema.additionalProperties: false,
    inputSchema.$schema: "http://json-schema.org/draft-07/schema#",
    23.name: "cleanup_duplicate_trips",
    23.description: "Remove duplicate or test trip records based on name patterns while preserving legitimate trips",
    inputSchema.type: "object",
    dry_run.type: "boolean",
    dry_run.default: true,
    dry_run.description: "If true, only show what would be deleted without actually deleting",
    name_patterns.type: "array",
    items.type: "string",
    name_patterns.description: "Trip name patterns to match for deletion (e.g., [\"Sarah & Michael\", \"Test Trip\"])",
    preserve_trip_ids.type: "array",
    items.type: "number",
    preserve_trip_ids.description: "Trip IDs to preserve even if they match patterns",
    preserve_trip_names.type: "array",
    items.type: "string",
    preserve_trip_names.description: "Specific trip names to preserve even if they match patterns",
    // 1 required(s)
    inputSchema.required: ["name_patterns"],
    required.0: "name_patterns",
    inputSchema.additionalProperties: false,
    inputSchema.$schema: "http://json-schema.org/draft-07/schema#",
}
2025-08-29T18:20:26.448Z debug: [MCP][mcp-chrome] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librecha... [truncated]
2025-08-29T18:20:26.448Z debug: [MCP][template-document] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@l... [truncated]
2025-08-29T18:20:26.467Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":5}
2025-08-29T18:20:26.584Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":5,"result":{"tools":[{"name":"get_instruction","d... [truncated]
2025-08-29T18:20:26.584Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":4}
2025-08-29T18:20:26.708Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][d1-database] Transport received: {"jsonrpc":"2.0","id":4,"result":{"tools":[{"name":"health_check","description"... [truncated]
2025-08-29T18:20:26.710Z debug: Merged 33 user-level tools
2025-08-29T18:20:27.477Z error: [MCP][template-document] Connection failed: MCP error -32000: Connection closed
2025-08-29T18:20:29.484Z debug: [MCP][template-document] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@l... [truncated]
2025-08-29T18:20:30.494Z error: [MCP][template-document] Connection failed: MCP error -32000: Connection closed
2025-08-29T18:20:34.500Z debug: [MCP][template-document] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@l... [truncated]
2025-08-29T18:20:35.414Z error: [MCP][template-document] Connection failed: MCP error -32000: Connection closed
2025-08-29T18:20:35.415Z error: [MCP][template-document] Failed to connect after 3 attempts MCP error -32000: Connection closed
2025-08-29T18:20:35.415Z error: [MCP][User: 68b1ababa6d361e541dc7c03] Error getting app connections: MCP error -32000: Connection closed
2025-08-29T18:20:42.518Z info: [MCP Reinitialize] Reinitializing server: mcp-chrome
2025-08-29T18:20:42.520Z info: [MCP Reinitialize] Disconnected existing user connection for server: mcp-chrome
2025-08-29T18:20:42.520Z info: [MCP][User: 68b1ababa6d361e541dc7c03][mcp-chrome] Establishing new connection
2025-08-29T18:20:42.772Z debug: [mcp_get_tokens:68b1ababa6d361e541dc7c03:mcp-chrome] Creating initial flow state
2025-08-29T18:20:42.774Z info: [MCP][User: 68b1ababa6d361e541dc7c03][mcp-chrome] Access token missing
2025-08-29T18:20:42.776Z info: [MCP][User: 68b1ababa6d361e541dc7c03][mcp-chrome] Access token missing and no refresh token available
2025-08-29T18:20:42.783Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][mcp-chrome] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{}... [truncated]
2025-08-29T18:21:11.691Z debug: [MCP][mcp-chrome] Transport sending: {"jsonrpc":"2.0","method":"notifications/cancelled","params":{"requestId":0,"reason":"McpError: MCP error -32001:... [truncated]
2025-08-29T18:21:11.692Z error: [MCP][mcp-chrome] Connection failed: MCP error -32001: Request timed out
2025-08-29T18:21:12.778Z error: [MCP][User: 68b1ababa6d361e541dc7c03][mcp-chrome] Failed to establish connection Connection timeout after 30000ms
2025-08-29T18:21:12.779Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][mcp-chrome] Removed connection entry.
2025-08-29T18:21:12.779Z info: [MCP Reinitialize] getUserConnection threw error: Connection timeout after 30000ms
2025-08-29T18:21:12.779Z info: [MCP Reinitialize] OAuth state - oauthRequired: false, oauthUrl: null
2025-08-29T18:21:12.779Z error: [MCP Reinitialize] Error initializing MCP server mcp-chrome for user: Connection timeout after 30000ms
2025-08-29T18:21:12.779Z debug: [MCP Reinitialize] Sending response for mcp-chrome - oauthRequired: false, oauthUrl: null
2025-08-29T18:21:12.779Z debug: Failed to reinitialize MCP server 'mcp-chrome'
{
  availableTools: null,
  success: false,
  oauthRequired: false,
  serverName: "mcp-chrome",
  oauthUrl: null,
  tools: null,
}
2025-08-29T18:21:13.698Z debug: [MCP][mcp-chrome] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librecha... [truncated]
2025-08-29T18:21:26.449Z debug: [MCP][mcp-chrome] Transport sending: {"jsonrpc":"2.0","method":"notifications/cancelled","params":{"requestId":0,"reason":"McpError: MCP error -32001:... [truncated]
2025-08-29T18:21:26.450Z error: [MCP][mcp-chrome] Connection failed: MCP error -32001: Request timed out
2025-08-29T18:21:28.458Z debug: [MCP][mcp-chrome] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librecha... [truncated]
2025-08-29T18:21:42.784Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][mcp-chrome] Transport sending: {"jsonrpc":"2.0","method":"notifications/cancelled","params":{"requestId":0,"reas... [truncated]
2025-08-29T18:21:42.785Z error: [MCP][User: 68b1ababa6d361e541dc7c03][mcp-chrome] Connection failed: MCP error -32001: Request timed out
2025-08-29T18:21:44.792Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][mcp-chrome] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{}... [truncated]
2025-08-29T18:22:13.699Z debug: [MCP][mcp-chrome] Transport sending: {"jsonrpc":"2.0","method":"notifications/cancelled","params":{"requestId":1,"reason":"McpError: MCP error -32001:... [truncated]
2025-08-29T18:22:13.700Z error: [MCP][mcp-chrome] Connection failed: MCP error -32001: Request timed out
2025-08-29T18:22:17.708Z debug: [MCP][mcp-chrome] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librecha... [truncated]
2025-08-29T18:22:28.457Z debug: [MCP][mcp-chrome] Transport sending: {"jsonrpc":"2.0","method":"notifications/cancelled","params":{"requestId":1,"reason":"McpError: MCP error -32001:... [truncated]
2025-08-29T18:22:28.458Z error: [MCP][mcp-chrome] Connection failed: MCP error -32001: Request timed out
2025-08-29T18:22:32.465Z debug: [MCP][mcp-chrome] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"@librecha... [truncated]
2025-08-29T18:22:44.794Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][mcp-chrome] Transport sending: {"jsonrpc":"2.0","method":"notifications/cancelled","params":{"requestId":1,"reas... [truncated]
2025-08-29T18:22:44.795Z error: [MCP][User: 68b1ababa6d361e541dc7c03][mcp-chrome] Connection failed: MCP error -32001: Request timed out
2025-08-29T18:22:48.802Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][mcp-chrome] Transport sending: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{}... [truncated]
2025-08-29T18:23:17.708Z debug: [MCP][mcp-chrome] Transport sending: {"jsonrpc":"2.0","method":"notifications/cancelled","params":{"requestId":2,"reason":"McpError: MCP error -32001:... [truncated]
2025-08-29T18:23:17.708Z error: [MCP][mcp-chrome] Connection failed: MCP error -32001: Request timed out
2025-08-29T18:23:17.709Z error: [MCP][mcp-chrome] Failed to connect after 3 attempts MCP error -32001: Request timed out
2025-08-29T18:23:32.465Z debug: [MCP][mcp-chrome] Transport sending: {"jsonrpc":"2.0","method":"notifications/cancelled","params":{"requestId":2,"reason":"McpError: MCP error -32001:... [truncated]
2025-08-29T18:23:32.465Z error: [MCP][mcp-chrome] Connection failed: MCP error -32001: Request timed out
2025-08-29T18:23:32.466Z error: [MCP][mcp-chrome] Failed to connect after 3 attempts MCP error -32001: Request timed out
2025-08-29T18:23:48.803Z debug: [MCP][User: 68b1ababa6d361e541dc7c03][mcp-chrome] Transport sending: {"jsonrpc":"2.0","method":"notifications/cancelled","params":{"requestId":2,"reas... [truncated]
2025-08-29T18:23:48.804Z error: [MCP][User: 68b1ababa6d361e541dc7c03][mcp-chrome] Connection failed: MCP error -32001: Request timed out
2025-08-29T18:23:48.805Z error: [MCP][mcp-chrome][68b1ababa6d361e541dc7c03] Failed to connect after 3 attempts MCP error -32001: Request timed out
2025-08-29T18:24:12.044Z debug: [AgentController] Request aborted on close
2025-08-29T18:24:12.046Z debug: [BaseClient] Loading history:
{
  conversationId: "eae637ad-ba39-464e-a686-f12bdefd2dc2",
  parentMessageId: "00000000-0000-0000-0000-000000000000",
}
2025-08-29T18:24:12.057Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 179990,
  maxContextTokens: 180000,
}
2025-08-29T18:24:12.057Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 179990,
  maxContextTokens: 180000,
}
2025-08-29T18:24:12.057Z debug: [BaseClient] tokenCountMap:
{
  a160cd4f-7aab-4940-83a3-ef70a463b52e: 7,
}
2025-08-29T18:24:12.057Z debug: [BaseClient]
{
  promptTokens: 10,
  remainingContextTokens: 179990,
  payloadSize: 1,
  maxContextTokens: 180000,
}
2025-08-29T18:24:12.058Z debug: [BaseClient] tokenCountMap
{
  a160cd4f-7aab-4940-83a3-ef70a463b52e: 7,
}
2025-08-29T18:24:12.060Z debug: [BaseClient] userMessage
{
  messageId: "a160cd4f-7aab-4940-83a3-ef70a463b52e",
  parentMessageId: "00000000-0000-0000-0000-000000000000",
  conversationId: "eae637ad-ba39-464e-a686-f12bdefd2dc2",
  sender: "User",
  text: "travel_agent_start",
  isCreatedByUser: true,
  tokenCount: 7,
}
2025-08-29T18:24:12.134Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T18:24:18.533Z debug: [AgentController] Request closed
2025-08-29T18:24:18.535Z debug: [AgentController] Request aborted on close
2025-08-29T18:24:18.542Z error: [api/server/controllers/agents/client.js #sendCompletion] Operation aborted Aborted
2025-08-29T18:24:18.572Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T18:24:19.449Z debug: [saveConvo] api/server/services/Endpoints/agents/title.js
2025-08-29T18:24:19.463Z debug: [AgentController] Title generation started
2025-08-29T18:24:19.463Z debug: [AgentController] Title generation completed
2025-08-29T18:24:19.463Z debug: [AgentController] Performing cleanup
2025-08-29T18:24:19.463Z debug: [AgentController] Cleaning up abort controller
2025-08-29T18:24:19.463Z debug: [AgentController] Cleanup completed
2025-08-29T18:24:40.966Z debug: [AgentController] Request aborted on close
2025-08-29T18:24:40.966Z debug: [BaseClient] Loading history:
{
  conversationId: "ce9edad8-0a28-455a-bd74-61e48fc46f91",
  parentMessageId: "00000000-0000-0000-0000-000000000000",
}
2025-08-29T18:24:40.969Z debug: [AgentClient] Injected MCP instructions for servers:
["\"d1-database\"","\"prompt-instructions\""]
2025-08-29T18:24:40.969Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 179990,
  maxContextTokens: 180000,
}
2025-08-29T18:24:40.969Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 179990,
  maxContextTokens: 180000,
}
2025-08-29T18:24:40.970Z debug: [BaseClient] tokenCountMap:
{
  70763315-1a72-4b91-8ac3-5c0c9c7385a6: 7,
}
2025-08-29T18:24:40.970Z debug: [BaseClient]
{
  promptTokens: 10,
  remainingContextTokens: 179990,
  payloadSize: 1,
  maxContextTokens: 180000,
}
2025-08-29T18:24:40.970Z debug: [BaseClient] tokenCountMap
{
  70763315-1a72-4b91-8ac3-5c0c9c7385a6: 7,
}
2025-08-29T18:24:40.970Z debug: [BaseClient] userMessage
{
  messageId: "70763315-1a72-4b91-8ac3-5c0c9c7385a6",
  parentMessageId: "00000000-0000-0000-0000-000000000000",
  conversationId: "ce9edad8-0a28-455a-bd74-61e48fc46f91",
  sender: "User",
  text: "travel_agent_start",
  isCreatedByUser: true,
  tokenCount: 7,
}
2025-08-29T18:24:41.179Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T18:24:41.334Z debug: [FinalizationRegistry] Cleaning up client for user 68b1ababa6d361e541dc7c03
2025-08-29T18:24:41.334Z debug: [FinalizationRegistry] Cleaning up client for user 68b1ababa6d361e541dc7c03
2025-08-29T18:24:44.165Z debug: [MCP][prompt-instructions] Transport sending: {"method":"ping","jsonrpc":"2.0","id":5}
2025-08-29T18:24:44.294Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":5,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T18:24:44.294Z debug: [MCP][prompt-instructions] Server does not support ping method, verifying connection with capabilities
2025-08-29T18:24:44.294Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":6}
2025-08-29T18:24:44.343Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":6,"result":{"tools":[{"name":"get_instruction","description":"Retrieve a specific... [truncated]
2025-08-29T18:24:44.344Z debug: [MCP][prompt-instructions] Transport sending: {"method":"tools/call","params":{"name":"travel_agent_start","arguments":{}},"jsonrpc":"2.0","id":7}
2025-08-29T18:24:45.265Z debug: [MCP][prompt-instructions] Transport received: {"jsonrpc":"2.0","id":7,"result":{"content":[{"type":"text","text":"‚úÖ **Claude Travel Agent System Read... [truncated]
2025-08-29T18:24:45.265Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T18:24:45.265Z
2025-08-29T18:24:49.703Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T18:24:49.710Z debug: [AgentController] Request closed
2025-08-29T18:24:50.478Z debug: [saveConvo] api/server/services/Endpoints/agents/title.js
2025-08-29T18:24:50.488Z debug: [AgentController] Title generation started
2025-08-29T18:24:50.488Z debug: [AgentController] Title generation completed
2025-08-29T18:24:50.488Z debug: [AgentController] Performing cleanup
2025-08-29T18:24:50.488Z debug: [AgentController] Cleaning up abort controller
2025-08-29T18:24:50.488Z debug: [AgentController] Cleanup completed
2025-08-29T18:25:07.181Z debug: [AgentController] Request aborted on close
2025-08-29T18:25:07.181Z debug: [BaseClient] Loading history:
{
  conversationId: "ce9edad8-0a28-455a-bd74-61e48fc46f91",
  parentMessageId: "8d2806e6-046a-48fa-b7d3-3cf6198c0e76",
}
2025-08-29T18:25:07.184Z debug: [AgentClient] Injected MCP instructions for servers:
["\"d1-database\"","\"prompt-instructions\""]
2025-08-29T18:25:07.184Z debug: [BaseClient] Context Count (1/2)
{
  remainingContextTokens: 179660,
  maxContextTokens: 180000,
}
2025-08-29T18:25:07.184Z debug: [BaseClient] Context Count (2/2)
{
  remainingContextTokens: 179660,
  maxContextTokens: 180000,
}
2025-08-29T18:25:07.185Z debug: [BaseClient] tokenCountMap:
{
  70763315-1a72-4b91-8ac3-5c0c9c7385a6: 7,
  8d2806e6-046a-48fa-b7d3-3cf6198c0e76: 319,
  4c7644c7-7328-4838-bb29-ca4c0d9f23f4: 11,
}
2025-08-29T18:25:07.185Z debug: [BaseClient]
{
  promptTokens: 340,
  remainingContextTokens: 179660,
  payloadSize: 3,
  maxContextTokens: 180000,
}
2025-08-29T18:25:07.185Z debug: [BaseClient] tokenCountMap
{
  70763315-1a72-4b91-8ac3-5c0c9c7385a6: 7,
  8d2806e6-046a-48fa-b7d3-3cf6198c0e76: 319,
  4c7644c7-7328-4838-bb29-ca4c0d9f23f4: 11,
}
2025-08-29T18:25:07.185Z debug: [BaseClient] userMessage
{
  messageId: "4c7644c7-7328-4838-bb29-ca4c0d9f23f4",
  parentMessageId: "8d2806e6-046a-48fa-b7d3-3cf6198c0e76",
  conversationId: "ce9edad8-0a28-455a-bd74-61e48fc46f91",
  sender: "User",
  text: "look up Sara and Darren Jones trip",
  isCreatedByUser: true,
  tokenCount: 11,
}
2025-08-29T18:25:07.385Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T18:25:10.328Z debug: [MCP][d1-database] Transport sending: {"method":"ping","jsonrpc":"2.0","id":5}
2025-08-29T18:25:10.471Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":5,"error":{"code":-32601,"message":"Method not found: ping"}}
2025-08-29T18:25:10.472Z debug: [MCP][d1-database] Server does not support ping method, verifying connection with capabilities
2025-08-29T18:25:10.472Z debug: [MCP][d1-database] Transport sending: {"method":"tools/list","jsonrpc":"2.0","id":6}
2025-08-29T18:25:10.516Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":6,"result":{"tools":[{"name":"health_check","description":"Check database health and stat... [truncated]
2025-08-29T18:25:10.517Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_anything","arguments":{"query":"Sara and Darren Jones trip"}},"json... [truncated]
2025-08-29T18:25:10.768Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":7,"result":{"content":[{"type":"text","text":"{\n  \"response\": \"üìä **Trip Status Dashb... [truncated]
2025-08-29T18:25:10.768Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T18:25:10.768Z
2025-08-29T18:25:13.971Z debug: [MCP][d1-database] Transport sending: {"method":"tools/call","params":{"name":"get_workflow_status","arguments":{"trip_identifier":"Sara & Darren Jone... [truncated]
2025-08-29T18:25:14.113Z debug: [MCP][d1-database] Transport received: {"jsonrpc":"2.0","id":8,"result":{"content":[{"type":"text","text":"{\n  \"success\": true,\n  \"trip_id\": 26,... [truncated]
2025-08-29T18:25:14.114Z debug: [MCP][User: 68b1ababa6d361e541dc7c03] Updated last activity timestamp: 2025-08-29T18:25:14.114Z
2025-08-29T18:25:19.417Z debug: [saveConvo] api/app/clients/BaseClient.js - saveMessageToDatabase #saveConvo
2025-08-29T18:25:19.424Z debug: [AgentController] Request closed
2025-08-29T18:25:19.427Z debug: [AgentController] Performing cleanup
2025-08-29T18:25:19.428Z debug: [AgentController] Cleaning up abort controller
2025-08-29T18:25:19.428Z debug: [AgentController] Cleanup completed
